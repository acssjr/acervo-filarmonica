(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,54489,e=>{"use strict";var r=e.i(89123),t=e.i(65590),i=e.i(40915),a=e.i(7690),o=e.i(87766);let s=({repertorio:e,partituras:i,isActive:a,isExpanded:s,onEdit:n,onDelete:d,onDuplicate:l,onActivate:p,onToggleExpand:c,onReorder:x})=>{let[h,g]=(0,t.useState)(null),[u,y]=(0,t.useState)(null),v=()=>{y(null)},m=()=>{g(null),y(null)};return(0,r.jsxs)("div",{style:{background:"var(--bg-secondary)",borderRadius:"16px",border:a?"2px solid rgba(46, 204, 113, 0.5)":"1px solid var(--border)",overflow:"hidden"},children:[(0,r.jsxs)("div",{onClick:c,className:"card-header-hover",style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},children:[(0,r.jsxs)("div",{style:{flex:1},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,r.jsx)("h3",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text-primary)",margin:0},children:e.nome}),a&&(0,r.jsx)("span",{style:{padding:"2px 8px",borderRadius:"4px",background:"rgba(46, 204, 113, 0.2)",color:"#2ecc71",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:"Ativo"})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginTop:"8px",fontSize:"13px",color:"var(--text-muted)"},children:[(0,r.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,r.jsx)("div",{style:{width:"14px",height:"14px"},children:(0,r.jsx)(o.Icons.Music,{})}),e.total_partituras||0," musicas"]}),e.data_apresentacao&&(0,r.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,r.jsx)("div",{style:{width:"14px",height:"14px"},children:(0,r.jsx)(o.Icons.Calendar,{})}),new Date(e.data_apresentacao).toLocaleDateString("pt-BR")]})]})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center"},onClick:e=>e.stopPropagation(),children:[!a&&p&&(0,r.jsx)("button",{onClick:p,title:"Ativar repertório",className:"btn-success-hover",style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(46, 204, 113, 0.1)",border:"1px solid rgba(46, 204, 113, 0.3)",color:"#2ecc71",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(o.Icons.Check,{})}),(0,r.jsx)("button",{onClick:l,title:"Duplicar",className:"btn-purple-hover",style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(155, 89, 182, 0.1)",border:"1px solid rgba(155, 89, 182, 0.3)",color:"#9b59b6",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)("div",{style:{width:"14px",height:"14px"},children:(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),(0,r.jsx)("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})}),(0,r.jsx)("button",{onClick:n,title:"Editar",className:"btn-info-hover",style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(52, 152, 219, 0.1)",border:"1px solid rgba(52, 152, 219, 0.3)",color:"#3498db",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,r.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),(0,r.jsx)("button",{onClick:d,title:"Excluir",className:"btn-danger-hover",style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(231, 76, 60, 0.1)",border:"1px solid rgba(231, 76, 60, 0.3)",color:"#e74c3c",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,r.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,r.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})}),(0,r.jsx)("div",{style:{width:"14px",height:"14px",transition:"transform 0.2s",transform:s?"rotate(180deg)":"rotate(0deg)"},children:(0,r.jsx)(o.Icons.ChevronDown,{})})]})]}),s&&(0,r.jsxs)("div",{style:{padding:"0 20px 16px",borderTop:"1px solid var(--border)"},children:[(0,r.jsx)("p",{style:{fontSize:"12px",color:"var(--text-muted)",textTransform:"uppercase",marginTop:"16px",marginBottom:"12px"},children:"Músicas do repertório"}),i?0===i.length?(0,r.jsx)("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Nenhuma musica adicionada"}):(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:i.map((e,t)=>(0,r.jsxs)("div",{draggable:!0,onDragStart:e=>{g(t),e.dataTransfer.effectAllowed="move"},onDragOver:e=>{e.preventDefault(),h!==t&&y(t)},onDragLeave:v,onDrop:e=>{e.preventDefault(),null!==h&&h!==t&&x(h,t),g(null),y(null)},onDragEnd:m,className:h!==t&&u!==t?"draggable-item-hover":"",style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",background:h===t?"rgba(212, 175, 55, 0.1)":u===t?"rgba(212, 175, 55, 0.2)":"var(--bg-primary)",borderRadius:"8px",border:u===t?"2px dashed #D4AF37":"1px solid var(--border)",cursor:"grab",opacity:h===t?.5:1,transition:"all 0.15s ease"},children:[(0,r.jsx)("div",{style:{width:"16px",height:"16px",color:"var(--text-muted)",flexShrink:0},children:(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:[(0,r.jsx)("circle",{cx:"9",cy:"6",r:"1.5"}),(0,r.jsx)("circle",{cx:"15",cy:"6",r:"1.5"}),(0,r.jsx)("circle",{cx:"9",cy:"12",r:"1.5"}),(0,r.jsx)("circle",{cx:"15",cy:"12",r:"1.5"}),(0,r.jsx)("circle",{cx:"9",cy:"18",r:"1.5"}),(0,r.jsx)("circle",{cx:"15",cy:"18",r:"1.5"})]})}),(0,r.jsx)("span",{style:{width:"22px",height:"22px",borderRadius:"50%",background:"rgba(212, 175, 55, 0.2)",color:"#D4AF37",fontSize:"11px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:t+1}),(0,r.jsx)("span",{style:{fontSize:"13px",color:"var(--text-primary)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",flex:1},children:e.titulo})]},e.id))}):(0,r.jsx)("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Carregando..."})]})]})};e.s(["default",0,()=>{let{showToast:e}=(0,i.useUI)(),[n,d]=(0,t.useState)([]),[l,p]=(0,t.useState)(!0),[c,x]=(0,t.useState)(!1),[h,g]=(0,t.useState)(null),[u,y]=(0,t.useState)({nome:"",descricao:"",data_apresentacao:"",ativo:!1}),[v,m]=(0,t.useState)(!1),[b,f]=(0,t.useState)(null),[j,w]=(0,t.useState)({}),k=async()=>{if(!l){p(!0);try{let e=await a.API.getRepertorios();d(e||[])}catch(r){e(r instanceof Error?r.message:"Erro ao carregar repertórios","error")}p(!1)}};(0,t.useEffect)(()=>{k()},[]);let R=()=>{g(null),y({nome:"",descricao:"",data_apresentacao:"",ativo:!0}),x(!0)},S=e=>{g(e),y({nome:e.nome||"",descricao:e.descricao||"",data_apresentacao:e.data_apresentacao||"",ativo:1===e.ativo}),x(!0)},C=()=>{x(!1),g(null),y({nome:"",descricao:"",data_apresentacao:"",ativo:!1})},I=async()=>{if(!u.nome.trim())return void e("Nome é obrigatório","error");m(!0);try{h?(await a.API.updateRepertorio(h.id,u),e("Repertório atualizado!")):(await a.API.createRepertorio(u),e("Repertório criado!")),C(),k()}catch(r){e(r instanceof Error?r.message:"Erro ao salvar","error")}m(!1)},D=async r=>{if(window.confirm("Excluir este repertório?"))try{await a.API.deleteRepertorio(r),e("Repertório excluído!"),k()}catch(r){e(r instanceof Error?r.message:"Erro ao excluir","error")}},z=async r=>{try{await a.API.duplicarRepertorio(r),e("Repertório duplicado!"),k()}catch(r){e(r instanceof Error?r.message:"Erro ao duplicar","error")}},A=async r=>{try{await a.API.updateRepertorio(r.id,{...r,ativo:!0}),e("Repertório ativado!"),k()}catch(r){e(r instanceof Error?r.message:"Erro ao ativar","error")}},E=async r=>{if(b===r.id)f(null);else if(f(r.id),!j[r.id])try{let e=await a.API.getRepertorio(r.id);w(t=>({...t,[r.id]:e.partituras||[]}))}catch{e("Erro ao carregar partituras","error")}},B=async(r,t,i)=>{let o=[...j[r]||[]];if(i<0||i>=o.length)return;let[s]=o.splice(t,1);o.splice(i,0,s),w(e=>({...e,[r]:o}));try{let e=o.map((e,r)=>({id:e.id,ordem:r}));await a.API.reorderRepertorioPartituras(r,e)}catch{e("Erro ao reordenar","error");let t=await a.API.getRepertorio(r);w(e=>({...e,[r]:t.partituras||[]}))}},N=n.find(e=>1===e.ativo),T=n.filter(e=>1!==e.ativo);return(0,r.jsxs)("div",{style:{padding:"24px 32px",maxWidth:"1200px",margin:"0 auto"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",flexWrap:"wrap",gap:"16px"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{style:{fontSize:"24px",fontWeight:"700",color:"var(--text-primary)",margin:0},children:"Repertório"}),(0,r.jsx)("p",{style:{fontSize:"14px",color:"var(--text-muted)",margin:"4px 0 0"},children:"Gerencie os repertórios das apresentações"})]}),(0,r.jsxs)("button",{onClick:R,className:"btn-primary-hover",style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",borderRadius:"12px",background:"linear-gradient(135deg, #D4AF37 0%, #B8860B 100%)",color:"#fff",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:[(0,r.jsx)("div",{style:{width:"16px",height:"16px"},children:(0,r.jsx)(o.Icons.Plus,{})}),"Novo Repertório"]})]}),l?(0,r.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"var(--text-muted)"},children:"Carregando..."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,r.jsxs)("h2",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,r.jsx)("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#2ecc71"}}),"Repertório Ativo"]}),N?(0,r.jsx)(s,{repertorio:N,partituras:j[N.id],isActive:!0,isExpanded:b===N.id,onEdit:()=>S(N),onDelete:()=>D(N.id),onDuplicate:()=>z(N.id),onToggleExpand:()=>E(N),onReorder:(e,r)=>B(N.id,e,r)}):(0,r.jsxs)("div",{style:{padding:"32px",background:"var(--bg-secondary)",borderRadius:"16px",textAlign:"center",color:"var(--text-muted)"},children:[(0,r.jsx)("p",{children:"Nenhum repertório ativo"}),(0,r.jsx)("button",{onClick:R,className:"btn-secondary-hover",style:{marginTop:"12px",padding:"8px 16px",borderRadius:"8px",background:"rgba(212, 175, 55, 0.2)",border:"1px solid rgba(212, 175, 55, 0.3)",color:"#D4AF37",cursor:"pointer"},children:"Criar Repertório"})]})]}),T.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,r.jsx)("div",{style:{width:"16px",height:"16px"},children:(0,r.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.jsx)("polyline",{points:"12 6 12 12 16 14"})]})}),"Historico"]}),(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:T.map(e=>(0,r.jsx)(s,{repertorio:e,partituras:j[e.id],isExpanded:b===e.id,onEdit:()=>S(e),onDelete:()=>D(e.id),onDuplicate:()=>z(e.id),onActivate:()=>A(e),onToggleExpand:()=>E(e),onReorder:(r,t)=>B(e.id,r,t)},e.id))})]})]}),c&&(0,r.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:(0,r.jsxs)("div",{style:{background:"var(--bg-card)",borderRadius:"16px",width:"100%",maxWidth:"480px",maxHeight:"90vh",overflow:"auto"},children:[(0,r.jsx)("div",{style:{padding:"20px",borderBottom:"1px solid var(--border)"},children:(0,r.jsx)("h3",{style:{fontSize:"18px",fontWeight:"600",color:"var(--text-primary)",margin:0},children:h?"Editar Repertório":"Novo Repertório"})}),(0,r.jsxs)("div",{style:{padding:"20px",display:"flex",flexDirection:"column",gap:"16px"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"12px",color:"var(--text-muted)",marginBottom:"6px"},children:"Nome *"}),(0,r.jsx)("input",{type:"text",value:u.nome,onChange:e=>y({...u,nome:e.target.value}),placeholder:"Ex: Apresentacao 7 de Setembro",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--bg-primary)",color:"var(--text-primary)",fontSize:"14px"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"12px",color:"var(--text-muted)",marginBottom:"6px"},children:"Descricao"}),(0,r.jsx)("textarea",{value:u.descricao,onChange:e=>y({...u,descricao:e.target.value}),placeholder:"Descricao opcional...",rows:3,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--bg-primary)",color:"var(--text-primary)",fontSize:"14px",resize:"vertical"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:"12px",color:"var(--text-muted)",marginBottom:"6px"},children:"Data da Apresentacao"}),(0,r.jsx)("input",{type:"date",value:u.data_apresentacao,onChange:e=>y({...u,data_apresentacao:e.target.value}),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--bg-primary)",color:"var(--text-primary)",fontSize:"14px"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer"},children:[(0,r.jsx)("input",{type:"checkbox",checked:u.ativo,onChange:e=>y({...u,ativo:e.target.checked}),style:{width:"18px",height:"18px"}}),(0,r.jsx)("span",{style:{fontSize:"14px",color:"var(--text-primary)"},children:"Definir como repertório ativo"})]}),(0,r.jsx)("p",{style:{fontSize:"12px",color:"var(--text-muted)",marginTop:"4px",marginLeft:"30px"},children:"O repertório atual será arquivado"})]})]}),(0,r.jsxs)("div",{style:{padding:"16px 20px",borderTop:"1px solid var(--border)",display:"flex",justifyContent:"flex-end",gap:"12px"},children:[(0,r.jsx)("button",{onClick:C,className:"btn-ghost-hover",style:{padding:"10px 20px",borderRadius:"8px",border:"1px solid var(--border)",background:"transparent",color:"var(--text-primary)",cursor:"pointer"},children:"Cancelar"}),(0,r.jsx)("button",{onClick:I,disabled:v,className:"btn-primary-hover",style:{padding:"10px 20px",borderRadius:"8px",border:"none",background:"linear-gradient(135deg, #D4AF37 0%, #B8860B 100%)",color:"#fff",cursor:v?"wait":"pointer",opacity:v?.7:1},children:v?"Salvando...":"Salvar"})]})]})})]})}])},10455,e=>{e.n(e.i(54489))}]);