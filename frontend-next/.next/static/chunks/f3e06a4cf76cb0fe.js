(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,40833,(e,t,r)=>{t.exports=e.r(60384)},52283,e=>{"use strict";var t=e.i(89123),r=e.i(65590),i=e.i(40833),n=e.i(3249),a=e.i(40915),o=e.i(8597),s=e.i(47621),l=e.i(7690),d=e.i(85365);let x=()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{style:{position:"fixed",inset:0,background:`
          linear-gradient(135deg, rgba(61, 21, 24, 0.92) 0%, rgba(92, 26, 27, 0.88) 50%, rgba(61, 21, 24, 0.92) 100%),
          url('/assets/images/banda/foto-banda-sao-goncalo.webp')
        `,backgroundSize:"cover",backgroundPosition:"center",filter:"brightness(0.9)",zIndex:-2}}),(0,t.jsx)("div",{style:{position:"fixed",inset:0,opacity:.03,backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")",pointerEvents:"none",zIndex:-1}})]}),c=()=>(0,t.jsxs)("div",{style:{textAlign:"center",marginBottom:"32px"},children:[(0,t.jsx)("div",{style:{width:"80px",height:"80px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.05) 100%)",border:"2px solid rgba(212, 175, 55, 0.4)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",boxShadow:"0 8px 32px rgba(212, 175, 55, 0.2)",overflow:"hidden",padding:"8px"},children:(0,t.jsx)("img",{src:"/assets/images/ui/brasao-256x256.png",alt:"Brasão Filarmônica 25 de Março",style:{width:"100%",height:"100%",objectFit:"contain"}})}),(0,t.jsx)("h1",{style:{fontFamily:"var(--font-sans)",fontSize:"24px",fontWeight:"700",color:"#F4E4BC",marginBottom:"4px"},children:"Acervo Digital"}),(0,t.jsx)("p",{style:{fontFamily:"var(--font-sans)",fontSize:"14px",color:"rgba(244, 228, 188, 0.6)"},children:"S.F. 25 de Março - Feira de Santana"}),(0,t.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",marginTop:"12px",padding:"6px 12px",background:"rgba(34, 197, 94, 0.15)",borderRadius:"20px",border:"1px solid rgba(34, 197, 94, 0.3)"},children:[(0,t.jsx)("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#22C55E",animation:"pulse 2s ease-in-out infinite"}}),(0,t.jsx)("span",{style:{fontFamily:"var(--font-sans)",fontSize:"11px",fontWeight:"600",color:"#22C55E",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Sistema Online"})]})]}),g=({pin:e,pinRefs:r,isLoading:i,onPinChange:n,onKeyDown:a,onFocus:o,disabled:s})=>(0,t.jsxs)("div",{style:{marginBottom:"20px",opacity:s?.5:1,transition:"opacity 0.2s ease"},children:[(0,t.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontFamily:"var(--font-sans)",fontSize:"13px",fontWeight:"600",color:"rgba(244, 228, 188, 0.8)",marginBottom:"12px"},children:[(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),(0,t.jsx)("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),"PIN"]}),(0,t.jsx)("div",{style:{display:"flex",justifyContent:"center",gap:"12px"},children:e.map((e,l)=>(0,t.jsx)("input",{ref:e=>{r.current&&(r.current[l]=e)},type:"password",inputMode:"numeric",maxLength:1,value:e,onChange:e=>n(l,e.target.value),onKeyDown:e=>a(l,e),disabled:i||s,style:{width:"56px",minWidth:"56px",maxWidth:"56px",height:"56px",borderRadius:"12px",background:e?"rgba(212, 175, 55, 0.15)":"rgba(255, 255, 255, 0.06)",border:e?"2px solid rgba(212, 175, 55, 0.4)":"1px solid rgba(255, 255, 255, 0.12)",color:"#F4E4BC",fontSize:"22px",fontFamily:"var(--font-sans)",fontWeight:"700",textAlign:"center",outline:"none",transition:"all 0.2s ease",boxSizing:"border-box",flexShrink:0,flexGrow:0},onFocus:e=>{e.target.style.borderColor="rgba(212, 175, 55, 0.5)",e.target.style.background="rgba(255, 255, 255, 0.1)",o?.()},onBlur:t=>{!e&&(t.target.style.borderColor="rgba(255, 255, 255, 0.12)",t.target.style.background="rgba(255, 255, 255, 0.06)")}},l))})]});function p(){let{username:e,pin:p,rememberMe:u,isLoading:h,error:f,userFound:b,userNotFound:m,checkingUser:y,userInfo:v,pinRefs:j,cardRef:k,handleUsernameChange:w,handlePinChange:C,handlePinKeyDown:S,toggleRememberMe:F,scrollToCard:I}=(({onClose:e})=>{let t=(0,i.useRouter)(),{setUser:x}=(0,n.useAuth)(),{showToast:c}=(0,a.useUI)(),{setFavorites:g}=(0,o.useData)(),[p,u]=(0,r.useState)(""),[h,f]=(0,r.useState)(["","","",""]),[b,m]=(0,r.useState)(()=>s.default.get("rememberMe",!1)),[y,v]=(0,r.useState)(!1),[j,k]=(0,r.useState)(""),[w,C]=(0,r.useState)(!1),[S,F]=(0,r.useState)(!1),[I,B]=(0,r.useState)(!1),[z,E]=(0,r.useState)(null),R=(0,r.useRef)([null,null,null,null]),T=(0,r.useRef)(null),W=(0,r.useRef)(null),A=(0,r.useCallback)(()=>{T.current&&window.innerWidth<768&&setTimeout(()=>{T.current?.scrollIntoView({behavior:"smooth",block:"center"})},300)},[]),D=(0,r.useCallback)(async e=>{if(!e||e.length<2){C(!1),F(!1),E(null);return}B(!0);try{let t=await fetch(`${d.API_BASE_URL}/api/check-user`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e})}),r=await t.json();r.exists?(C(!0),F(!1),E({name:r.nome,instrument:r.instrumento}),setTimeout(()=>R.current[0]?.focus(),100)):(C(!1),F(!0),E(null))}catch(e){console.error("Erro ao verificar usuario:",e),C(!1),F(!1),E(null)}finally{B(!1)}},[]);(0,r.useEffect)(()=>{if(b){let e=s.default.get("savedUsername","");e&&(u(e),D(e))}},[]);let M=(0,r.useCallback)(e=>{let t=e.toLowerCase().replace(/\s/g,"");if(u(t),k(""),W.current&&clearTimeout(W.current),!t||t.length<2){C(!1),F(!1),E(null),B(!1);return}B(!0),W.current=setTimeout(()=>{D(t)},150)},[D]),P=(0,r.useCallback)(async(r,i)=>{if(i&&!/^\d$/.test(i))return;let n=[...h];if(n[r]=i,f(n),k(""),i&&r<3&&R.current[r+1]?.focus(),i&&3===r){let r=n.join(""),i=p.toLowerCase().replace(/\s/g,"");if(!i){k("Digite seu usuario"),f(["","","",""]);return}v(!0);try{if(l.USE_API){let n=await l.API.login(i,r,b);if(n.success&&n.user){s.default.set("rememberMe",b),b?s.default.set("savedUsername",i):s.default.remove("savedUsername");let r={id:n.user.id,username:n.user.username,nome:n.user.nome,is_admin:n.user.admin,instrumento:n.user.instrumento_nome||"Músico",instrumento_id:n.user.instrumento_id,foto_url:n.user.foto_url};x(r),s.default.set("user",r);try{let e=await l.API.getFavoritosIds();if(e&&Array.isArray(e)){let t=e.map(e=>String(e));g(t),s.default.set("favorites",t)}}catch{}c(`Bem-vindo, ${n.user.nome.split(" ")[0]}!`),e?e():t.push("/"),v(!1);return}}k("Usuario ou PIN incorreto"),f(["","","",""]),setTimeout(()=>{R.current[0]?.focus()},100),navigator.vibrate&&navigator.vibrate([100,50,100])}catch(e){console.error("Erro no login:",e),k("Usuario ou PIN incorreto"),f(["","","",""]),setTimeout(()=>{R.current[0]?.focus()},100),navigator.vibrate&&navigator.vibrate([100,50,100])}v(!1)}},[h,p,b,e,t,x,g,c]),L=(0,r.useCallback)((e,t)=>{"Backspace"===t.key&&!h[e]&&e>0&&R.current[e-1]?.focus()},[h]);return{username:p,pin:h,rememberMe:b,isLoading:y,error:j,userFound:w,userNotFound:S,checkingUser:I,userInfo:z,pinRefs:R,cardRef:T,handleUsernameChange:M,handlePinChange:P,handlePinKeyDown:L,toggleRememberMe:(0,r.useCallback)(()=>{m(e=>!e)},[]),scrollToCard:A}})({}),B=()=>b?"rgba(34, 197, 94, 0.4)":m?"rgba(239, 68, 68, 0.4)":"rgba(255, 255, 255, 0.12)";return(0,t.jsxs)("div",{style:{position:"fixed",inset:0,zIndex:9999,display:"flex",flexDirection:"column",overflowY:"auto",overflowX:"hidden",WebkitOverflowScrolling:"touch"},children:[(0,t.jsx)(x,{}),(0,t.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",minHeight:"min-content"},children:(0,t.jsxs)("div",{ref:k,style:{position:"relative",width:"100%",maxWidth:"400px",background:"rgba(255, 255, 255, 0.08)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",borderRadius:"24px",border:"1px solid rgba(255, 255, 255, 0.15)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5), inset 0 1px 1px rgba(255,255,255,0.1)",padding:"40px 32px",margin:"20px 0",animation:"scaleInLogin 0.4s cubic-bezier(0.16, 1, 0.3, 1)"},children:[(0,t.jsx)(c,{}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,t.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"8px",fontFamily:"var(--font-sans)",fontSize:"13px",fontWeight:"600",color:"rgba(244, 228, 188, 0.8)",marginBottom:"8px"},children:[(0,t.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,t.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),"Usuario",y&&(0,t.jsxs)("span",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"4px",color:"rgba(212, 175, 55, 0.8)",fontSize:"11px"},children:[(0,t.jsx)("div",{style:{width:"12px",height:"12px",border:"2px solid rgba(212, 175, 55, 0.3)",borderTopColor:"#D4AF37",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),"Verificando..."]}),!y&&b&&(0,t.jsxs)("span",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"4px",color:"#22C55E",fontSize:"11px"},children:[(0,t.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,t.jsx)("path",{d:"M20 6L9 17l-5-5"})}),v?.name]}),!y&&m&&(0,t.jsxs)("span",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:"4px",color:"#EF4444",fontSize:"11px"},children:[(0,t.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.jsx)("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),(0,t.jsx)("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),"Nao encontrado"]})]}),(0,t.jsx)("input",{type:"text",name:"username",autoComplete:"username",placeholder:"seuusuario",value:e,onChange:e=>w(e.target.value),className:"login-input",style:{width:"100%",padding:"14px 16px",borderRadius:"12px",background:"rgba(255, 255, 255, 0.06)",border:`1px solid ${B()}`,color:"#F4E4BC",fontSize:"16px",fontFamily:"var(--font-sans)",outline:"none",transition:"all 0.2s ease",boxSizing:"border-box"},onFocus:e=>{e.target.style.borderColor="rgba(212, 175, 55, 0.5)",e.target.style.background="rgba(255, 255, 255, 0.1)",I()},onBlur:e=>{e.target.style.borderColor=B(),e.target.style.background="rgba(255, 255, 255, 0.06)"}})]}),(0,t.jsx)(g,{pin:p,pinRefs:j,isLoading:h,onPinChange:C,onKeyDown:S,onFocus:I}),f&&(0,t.jsxs)("div",{style:{background:"rgba(239, 68, 68, 0.15)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"10px",padding:"12px 16px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px",animation:"shake 0.5s ease"},children:[(0,t.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"#EF4444",strokeWidth:"2",children:[(0,t.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,t.jsx)("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),(0,t.jsx)("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),(0,t.jsx)("span",{style:{fontFamily:"var(--font-sans)",fontSize:"13px",color:"#EF4444"},children:f})]}),h&&(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"16px",padding:"24px",background:"rgba(212, 175, 55, 0.08)",borderRadius:"16px",marginBottom:"20px",border:"1px solid rgba(212, 175, 55, 0.2)"},children:[(0,t.jsx)("div",{style:{display:"flex",alignItems:"flex-end",justifyContent:"center",gap:"4px",height:"40px"},children:[0,1,2,3,4].map(e=>(0,t.jsx)("div",{style:{width:"6px",borderRadius:"3px",background:"linear-gradient(to top, #D4AF37, #F4E4BC)",animation:"equalizer 1s ease-in-out infinite",animationDelay:`${.1*e}s`}},e))}),(0,t.jsx)("span",{style:{fontFamily:"var(--font-sans)",fontSize:"14px",fontWeight:"600",color:"#D4AF37"},children:"Entrando..."})]}),(0,t.jsxs)("div",{role:"checkbox","aria-checked":u,tabIndex:0,onClick:F,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),F())},style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[(0,t.jsx)("div",{style:{width:"20px",height:"20px",borderRadius:"6px",background:u?"#D4AF37":"rgba(255, 255, 255, 0.06)",border:u?"none":"1px solid rgba(255, 255, 255, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease",flexShrink:0},children:u&&(0,t.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"#3D1518",strokeWidth:"3",children:(0,t.jsx)("polyline",{points:"20 6 9 17 4 12"})})}),(0,t.jsx)("span",{style:{fontFamily:"var(--font-sans)",fontSize:"13px",color:"rgba(244, 228, 188, 0.7)"},children:"Lembrar meu acesso"})]})]}),(0,t.jsx)("div",{style:{marginTop:"28px",paddingTop:"20px",borderTop:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",color:"rgba(244, 228, 188, 0.4)",fontSize:"11px",fontFamily:"var(--font-sans)"},children:[(0,t.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,t.jsx)("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),"Conexao Segura"]})}),(0,t.jsx)("p",{style:{textAlign:"center",marginTop:"16px",fontSize:"11px",fontFamily:"var(--font-sans)",color:"rgba(244, 228, 188, 0.3)"},children:"Sociedade Filarmonica 25 de Marco - Fundada em 1868"})]})})]})}e.s(["default",()=>p],52283)}]);