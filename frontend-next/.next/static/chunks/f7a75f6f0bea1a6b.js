(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19638,96873,97052,e=>{"use strict";var t=e.i(89123),r=e.i(65590),a=e.i(40833),i=e.i(57324),n=e.i(50294),o=e.i(84375),l=e.i(3249),s=e.i(40915),d=e.i(8597),p=e.i(87766),c=e.i(7690),x=e.i(79765),h=e.i(8608),u=e.i(85365),g=e.i(47621);let f=(e,t)=>{let r=window.navigator;if(r.msSaveBlob)return void r.msSaveBlob(e,t);let a=window.URL.createObjectURL(e),i=document.createElement("a");i.href=a,i.download=t,i.style.display="none",document.body.appendChild(i),setTimeout(()=>{i.click(),setTimeout(()=>{document.body.removeChild(i),window.URL.revokeObjectURL(a)},250)},0)},b=e=>e.toLowerCase().replace(/\./g,"").replace(/saxofone/g,"sax").replace(/clarineta/g,"clarinete").replace(/\s+/g," ").trim(),m=e=>{let t=e.match(/\s+(bb|eb|f|c)\b/i);return t?t[1].toLowerCase():null},y=(e,t)=>{if(!e||0===t.length)return[];let r=b(e),a=m(r),i=r.replace(/\s*(bb|eb|f|c)?\s*\d*$/i,"").trim();return t.filter(e=>{let t=b(e.instrumento),n=m(t),o=t.replace(/\s*(bb|eb|f|c)?\s*\d*$/i,"").trim();return(!a||!n||a===n)&&(t===r||t.startsWith(r)||o===i||r.startsWith(o))})},v=(e,t)=>t.find(t=>t.instrumento.toLowerCase()===e.toLowerCase()),w=({isOpen:e,partes:r,instrumentName:a="",downloading:i=!1,onSelectParte:n,onClose:o})=>e&&0!==r.length?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{onClick:o,role:"presentation",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.6)",zIndex:2002,animation:"fadeIn 0.15s ease"}}),(0,t.jsxs)("div",{role:"dialog","aria-modal":"true","aria-labelledby":"parte-picker-title",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"var(--bg-card)",borderRadius:"20px",padding:"24px",zIndex:2003,width:"340px",maxWidth:"90vw",boxShadow:"0 25px 50px rgba(0,0,0,0.4)",animation:"scaleIn 0.25s cubic-bezier(0.16, 1, 0.3, 1)"},children:[(0,t.jsxs)("div",{style:{textAlign:"center",marginBottom:"20px"},children:[(0,t.jsx)("div",{style:{width:"56px",height:"56px",borderRadius:"50%",background:"linear-gradient(145deg, #722F37 0%, #5C1A1B 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 12px",boxShadow:"0 4px 12px rgba(114, 47, 55, 0.3)"},children:(0,t.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#F4E4BC",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,t.jsx)("path",{d:"M9 18V5l12-2v13"}),(0,t.jsx)("circle",{cx:"6",cy:"18",r:"3"}),(0,t.jsx)("circle",{cx:"18",cy:"16",r:"3"})]})}),(0,t.jsx)("h3",{id:"parte-picker-title",style:{fontFamily:"var(--font-sans)",fontSize:"18px",fontWeight:"700",color:"var(--text-primary)",marginBottom:"6px"},children:"Escolha sua parte"}),(0,t.jsxs)("p",{style:{fontFamily:"var(--font-sans)",fontSize:"13px",color:"var(--text-muted)"},children:["Encontramos ",r.length," partes de"," ",(0,t.jsx)("strong",{style:{color:"var(--accent)"},children:a})]})]}),(0,t.jsx)("div",{role:"list",style:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"20px",maxHeight:"200px",overflowY:"auto"},children:r.map((e,r)=>(0,t.jsxs)("button",{role:"listitem",onClick:()=>n(e),disabled:i,"aria-label":`Baixar ${e.instrumento}`,style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"14px 16px",borderRadius:"12px",background:"var(--bg-secondary)",border:"1px solid var(--border)",color:"var(--text-primary)",fontFamily:"var(--font-sans)",fontSize:"14px",fontWeight:"500",cursor:i?"wait":"pointer",transition:"all 0.2s ease",opacity:i?.6:1},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,t.jsx)("span",{style:{width:"28px",height:"28px",borderRadius:"50%",background:"rgba(212, 175, 55, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"700",color:"var(--accent)"},children:r+1}),(0,t.jsx)("span",{children:e.instrumento})]}),(0,t.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:(0,t.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"})})]},String(e.id)))}),(0,t.jsx)("button",{onClick:o,style:{width:"100%",padding:"12px",borderRadius:"10px",background:"transparent",border:"1px solid var(--border)",color:"var(--text-muted)",fontFamily:"var(--font-sans)",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Cancelar"})]})]}):null,j=({isOpen:e,instrumentName:r="",downloading:a=!1,onConfirm:i,onCancel:n})=>e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{onClick:n,role:"presentation",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",zIndex:2002,animation:"fadeIn 0.15s ease"}}),(0,t.jsxs)("div",{role:"alertdialog","aria-modal":"true","aria-labelledby":"download-confirm-title","aria-describedby":"download-confirm-desc",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"var(--bg-card)",borderRadius:"16px",padding:"24px",zIndex:2003,width:"300px",maxWidth:"85vw",boxShadow:"0 20px 40px rgba(0,0,0,0.3)",animation:"scaleIn 0.25s cubic-bezier(0.16, 1, 0.3, 1)"},children:[(0,t.jsx)("h3",{id:"download-confirm-title",style:{fontFamily:"var(--font-sans)",fontSize:"16px",fontWeight:"700",color:"var(--text-primary)",marginBottom:"8px",textAlign:"center"},children:"Confirmar Download"}),(0,t.jsxs)("p",{id:"download-confirm-desc",style:{fontFamily:"var(--font-sans)",fontSize:"14px",color:"var(--text-muted)",marginBottom:"20px",textAlign:"center"},children:["Baixar partitura de"," ",(0,t.jsx)("strong",{style:{color:"var(--accent)"},children:r}),"?"]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,t.jsx)("button",{onClick:n,style:{flex:1,padding:"12px",borderRadius:"10px",background:"var(--bg-secondary)",border:"1px solid var(--border)",color:"var(--text-primary)",fontFamily:"var(--font-sans)",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Cancelar"}),(0,t.jsx)("button",{onClick:i,disabled:a,style:{flex:1,padding:"12px",borderRadius:"10px",background:"linear-gradient(145deg, #722F37 0%, #5C1A1B 100%)",border:"none",color:"#F4E4BC",fontFamily:"var(--font-sans)",fontSize:"14px",fontWeight:"600",cursor:a?"wait":"pointer",opacity:a?.6:1},children:a?"Baixando...":"Confirmar"})]})]})]}):null,k=({isOpen:e,instruments:r,userInstrument:a="",isMaestro:i=!1,downloading:n=!1,canShare:o=!1,shareCart:l=[],onToggle:s,onSelectInstrument:d,onPrintInstrument:c,onViewInstrument:x,onShareInstrument:u,onAddToCart:g,onRemoveFromCart:f})=>{let b=(0,h.useMediaQuery)("(max-width: 767px)"),m=i?"Grade":a,y={padding:"6px",borderRadius:"6px",border:"none",cursor:n?"wait":"pointer",display:"flex",alignItems:"center",justifyContent:"center",opacity:n?.5:1};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{onClick:s,"aria-expanded":e,"aria-controls":"instrument-list",style:{width:"100%",padding:"12px 14px",borderRadius:e?"10px 10px 0 0":"10px",background:"var(--bg-secondary)",border:"1px solid var(--border)",borderBottom:e?"none":"1px solid var(--border)",color:"var(--text-primary)",fontFamily:"var(--font-sans)",fontSize:"13px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,t.jsx)("div",{style:{width:"16px",height:"16px"},children:(0,t.jsx)(p.Icons.Music,{})}),(0,t.jsx)("span",{children:i?"Escolher Parte":"Outro Instrumento"})]}),(0,t.jsx)("div",{style:{width:"16px",height:"16px",transition:"transform 0.2s ease",transform:e?"rotate(180deg)":"rotate(0deg)"},children:(0,t.jsx)(p.Icons.ChevronDown,{})})]}),e&&(0,t.jsx)("div",{id:"instrument-list",role:"listbox","aria-label":"Lista de instrumentos",style:{background:"var(--bg-secondary)",border:"1px solid var(--border)",borderTop:"none",borderRadius:"0 0 10px 10px",maxHeight:"200px",overflowY:"auto",animation:"expandDown 0.2s ease-out"},children:r.map((e,a)=>{let s=e===m,h=l.some(t=>t.instrument===e);return(0,t.jsxs)("div",{role:"option","aria-selected":s,style:{width:"100%",padding:"8px 14px",background:"transparent",borderBottom:a<r.length-1?"1px solid var(--border)":"none",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"8px"},children:[(0,t.jsxs)("button",{onClick:()=>d(e),disabled:n,style:{flex:1,display:"flex",alignItems:"center",gap:"8px",minWidth:0,background:"transparent",border:"none",padding:"4px 0",cursor:n?"wait":"pointer",textAlign:"left"},children:[(0,t.jsx)("span",{style:{color:s?"var(--accent)":"var(--text-primary)",fontFamily:"var(--font-sans)",fontSize:"13px",fontWeight:s?"600":"500",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e}),s&&(0,t.jsx)("span",{style:{fontSize:"9px",background:"rgba(212,175,55,0.2)",color:"var(--accent)",padding:"2px 6px",borderRadius:"4px",fontWeight:"700",flexShrink:0},children:i?"★":"MEU"})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"3px",flexShrink:0},children:[b?x&&(0,t.jsx)("button",{onClick:()=>x(e),disabled:n,"aria-label":`Visualizar ${e}`,title:"Visualizar",className:"action-btn",style:{...y,background:"rgba(52, 152, 219, 0.12)",color:"#3498db",transition:"all 0.15s ease"},children:(0,t.jsx)("div",{style:{width:"13px",height:"13px"},children:(0,t.jsx)(p.Icons.Eye,{})})}):c&&(0,t.jsx)("button",{onClick:()=>c(e),disabled:n,"aria-label":`Imprimir ${e}`,title:"Imprimir",className:"action-btn",style:{...y,background:"rgba(52, 152, 219, 0.12)",color:"#3498db",transition:"all 0.15s ease"},children:(0,t.jsx)("div",{style:{width:"13px",height:"13px"},children:(0,t.jsx)(p.Icons.Printer,{})})}),o&&u&&(0,t.jsx)("button",{onClick:()=>u(e),disabled:n,"aria-label":`Enviar ${e}`,title:"Enviar",className:"action-btn",style:{...y,background:"rgba(37, 211, 102, 0.12)",color:"#25D366",transition:"all 0.15s ease"},children:(0,t.jsx)("div",{style:{width:"13px",height:"13px"},children:(0,t.jsx)(p.Icons.Share,{})})}),g&&(0,t.jsx)("button",{onClick:()=>{if(h&&f){let t=l.find(t=>t.instrument===e);t&&void 0!==t.parteId&&f(t.parteId)}else g(e)},disabled:n,"aria-label":h?`Remover ${e} do carrinho`:`Adicionar ${e} ao carrinho`,title:h?"Remover do carrinho":"Adicionar ao carrinho",className:"action-btn",style:{...y,background:h?"rgba(39, 174, 96, 0.2)":"rgba(155, 89, 182, 0.12)",color:h?"#27ae60":"#9b59b6",transition:"all 0.15s ease"},children:(0,t.jsx)("div",{style:{width:"13px",height:"13px"},children:h?(0,t.jsx)(p.Icons.Check,{}):(0,t.jsx)(p.Icons.Plus,{})})})]})]},e)})})]})},C=(0,i.default)(()=>e.A(21365),{loadableGenerated:{modules:[22287]},ssr:!1});e.s(["default",0,()=>{let e=(0,a.useRouter)(),i=(0,a.usePathname)(),{user:b}=(0,l.useAuth)(),{selectedSheet:m,setSelectedSheet:I,showToast:S,addToShareCart:F,removeFromShareCart:R,shareCart:z}=(0,s.useUI)(),{favorites:$,toggleFavorite:B,categoriesMap:E,instrumentNames:A}=(0,d.useData)(),W=(0,h.useMediaQuery)("(min-width: 1024px)"),[P,L]=(0,r.useState)(!1),[T,D]=(0,r.useState)([]),[U,O]=(0,r.useState)(!1),M=(({showToast:e,selectedSheet:t,partes:a=[]})=>{let[i,n]=(0,r.useState)(!1),[o,l]=(0,r.useState)(null),[s,d]=(0,r.useState)(null),[p,c]=(0,r.useState)(!1),[x,h]=(0,r.useState)([]),[b,m]=(0,r.useState)({isOpen:!1,url:null,title:"",instrument:""}),w=(0,r.useCallback)(async r=>{if(!i&&t){n(!0),e(`Preparando "${t.title}" - ${r.instrumento}...`);try{let a=await fetch(`${u.API_BASE_URL}/api/download/parte/${r.id}`,{headers:{Authorization:`Bearer ${g.default.get("authToken",null)}`}});if(a.ok){let i=`${t.title} - ${r.instrumento}.pdf`,n=a.headers.get("Content-Disposition");if(n){let e=n.match(/filename="(.+)"/);e&&(i=e[1])}let o=await a.blob(),l=new Blob([o],{type:"application/pdf"});f(l,i),e("Download iniciado!")}else{let t=await a.json().catch(()=>({}));e(t.error||"Erro ao baixar arquivo","error")}}catch(t){console.error("Erro no download:",t),e("Erro ao baixar arquivo","error")}n(!1),c(!1),l(null)}},[i,t,e]),j=(0,r.useCallback)(async()=>{if(!i&&t){n(!0),e(`Preparando "${t.title}"...`);try{let r=await fetch(`${u.API_BASE_URL}/api/download/${t.id}`,{headers:{Authorization:`Bearer ${g.default.get("authToken",null)}`}});if(r.ok){let a=await r.blob(),i=new Blob([a],{type:"application/pdf"});f(i,`${t.title}.pdf`),e("Iniciando download...")}else e("Erro ao baixar arquivo","error")}catch(t){console.error("Erro no download:",t),e("Erro ao baixar arquivo","error")}n(!1)}},[i,t,e]),k=(0,r.useCallback)(e=>{let t=y(e,a);0===t.length?l(e):1===t.length?w(t[0]):(h(t),c(!0),l(e))},[a,w]),C=(0,r.useCallback)(t=>{let r=v(t,a);r?(l(t),d(r)):e("Parte não encontrada","error")},[a,e]),I=(0,r.useCallback)(async()=>{if(s){await w(s),l(null),d(null);return}let e=y(o,a);e.length>0?await w(e[0]):await j(),l(null)},[s,o,a,w,j]),S=(0,r.useCallback)(()=>{l(null),d(null),c(!1),h([])},[]),F=(0,r.useCallback)(()=>{c(!1),l(null)},[]),R=(0,r.useCallback)(async r=>{if(!i&&t){n(!0),e(`Preparando impress\xe3o "${t.title}" - ${r.instrumento}...`);try{let t=await fetch(`${u.API_BASE_URL}/api/download/parte/${r.id}`,{headers:{Authorization:`Bearer ${g.default.get("authToken",null)}`}});if(t.ok){let r=await t.blob(),a=URL.createObjectURL(r),i=window.open(a,"_blank");i&&(i.onload=()=>{i.print()}),e("Abrindo impressão...")}else{let r=await t.json().catch(()=>({}));e(r.error||"Erro ao preparar impressão","error")}}catch(t){console.error("Erro na impressao:",t),e("Erro ao preparar impressão","error")}n(!1)}},[i,t,e]),z=(0,r.useCallback)(t=>{let r=y(t,a);0===r.length?e("Parte não encontrada para impressão","error"):(r.length,R(r[0]))},[a,R,e]),$=(0,r.useCallback)(async r=>{if(!i&&t){n(!0),e(`Carregando "${t.title}" - ${r.instrumento}...`);try{let a=await fetch(`${u.API_BASE_URL}/api/download/parte/${r.id}`,{headers:{Authorization:`Bearer ${g.default.get("authToken",null)}`}});if(a.ok){let e=await a.blob(),i=URL.createObjectURL(e);m({isOpen:!0,url:i,title:t.title,instrument:r.instrumento})}else{let t=await a.json().catch(()=>({}));e(t.error||"Erro ao abrir arquivo","error")}}catch(t){console.error("Erro ao visualizar:",t),e("Erro ao abrir arquivo","error")}n(!1)}},[i,t,e]),B=(0,r.useCallback)(()=>{b.url&&URL.revokeObjectURL(b.url),m({isOpen:!1,url:null,title:"",instrument:""})},[b.url]),E=(0,r.useCallback)(t=>{let r=y(t,a);0===r.length?e("Parte não encontrada","error"):(r.length,$(r[0]))},[a,$,e]),A=(0,r.useCallback)(()=>{if(!navigator.share||!navigator.canShare)return!1;let e=new File([""],"test.pdf",{type:"application/pdf"});return navigator.canShare({files:[e]})},[]),W=(0,r.useCallback)(async r=>{if(!i&&t){n(!0),e(`Preparando "${t.title}" - ${r.instrumento}...`);try{let a=await fetch(`${u.API_BASE_URL}/api/download/parte/${r.id}`,{headers:{Authorization:`Bearer ${g.default.get("authToken",null)}`}});if(a.ok){let i=await a.blob(),n=`${t.title} - ${r.instrumento}.pdf`,o=new File([i],n,{type:"application/pdf"});if(navigator.canShare&&navigator.canShare({files:[o]}))await navigator.share({files:[o],title:`${t.title} - ${r.instrumento}`,text:`Partitura: ${t.title}
Parte: ${r.instrumento}`}),e("Compartilhado com sucesso!");else{e("Compartilhamento nao suportado. Baixando arquivo...","error");let t=new Blob([i],{type:"application/pdf"});f(t,n)}}else{let t=await a.json().catch(()=>({}));e(t.error||"Erro ao preparar arquivo","error")}}catch(t){"AbortError"!==t.name&&(console.error("Erro no compartilhamento:",t),e("Erro ao compartilhar arquivo","error"))}n(!1)}},[i,t,e]),P=(0,r.useCallback)(t=>{let r=y(t,a);0===r.length?e("Parte não encontrada para compartilhar","error"):(r.length,W(r[0]))},[a,W,e]);return{downloading:i,confirmInstrument:o,selectedParte:s,showPartePicker:p,partesDisponiveis:x,pdfViewer:b,downloadParteDireta:w,handleSelectInstrument:k,handleSelectParteEspecifica:C,handleConfirmDownload:I,handleCancelDownload:S,closePartePicker:F,printParte:R,handlePrintInstrument:z,viewParte:$,handleViewInstrument:E,closePdfViewer:B,shareParte:W,handleShareInstrument:P,canShareFiles:A,findPartesCorrespondentes:e=>y(e,a),findParteExata:e=>v(e,a)}})({showToast:S,selectedSheet:m,partes:T}),N=(0,r.useCallback)(e=>{if(!m)return;let t=v(e,T);t?(F({parteId:t.id,parteName:t.instrumento,partituraTitle:m.title,downloadUrl:""}),S(`${t.instrumento} adicionado ao carrinho`)):S("Parte não encontrada","error")},[m,T,F,S]);(0,r.useEffect)(()=>{if(m){let e=window.scrollY;return document.documentElement.classList.add("modal-open"),document.body.style.top=`-${e}px`,()=>{document.documentElement.classList.remove("modal-open"),document.body.style.top="",window.scrollTo(0,e)}}},[m]),(0,r.useEffect)(()=>{if(!m)return;let e=!1;return L(!1),M.handleCancelDownload(),(async()=>{O(!0);try{let t=await c.API.getPartesPartitura(m.id);e||D(t||[])}catch(t){e||(console.error("Erro ao buscar partes:",t),D([]))}e||O(!1)})(),()=>{e=!0}},[m]);let q=()=>{if(I(null),i.includes("/acervo/")&&i.split("/").length>3){let t=m?.category||"dobrado";e.push(`/acervo/${t}`)}},_=m?E.get(m.category):null,V=!!m&&$.includes(m.id),H=b?.instrumento||"Trompete Bb",G=H?.toLowerCase()||"",Y="maestro"===G||"regente"===G,K=T.some(e=>e.instrumento?.toLowerCase()==="grade"),Q=T.length>0?[...new Set(T.map(e=>e.instrumento))]:A;return(0,t.jsx)(o.AnimatePresence,{children:m&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.motion.div,{onClick:q,role:"presentation",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",zIndex:2e3}},"sheet-modal-overlay"),(0,t.jsx)(w,{isOpen:M.showPartePicker,partes:M.partesDisponiveis,instrumentName:M.confirmInstrument||"",downloading:M.downloading,onSelectParte:M.downloadParteDireta,onClose:M.closePartePicker}),(0,t.jsx)(j,{isOpen:!!M.confirmInstrument&&!M.showPartePicker,instrumentName:M.confirmInstrument||"",downloading:M.downloading,onConfirm:M.handleConfirmDownload,onCancel:M.handleCancelDownload}),(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"32px"},children:"Carregando visualizador..."}),children:(0,t.jsx)(C,{isOpen:M.pdfViewer.isOpen,pdfUrl:M.pdfViewer.url,title:`${M.pdfViewer.title} - ${M.pdfViewer.instrument}`,onClose:M.closePdfViewer,onDownload:()=>{M.pdfViewer.url&&window.open(M.pdfViewer.url,"_blank")}})}),(0,t.jsxs)(n.motion.div,{role:"dialog","aria-modal":"true","aria-labelledby":"sheet-detail-title",initial:W?{opacity:0,scale:.95}:{opacity:1,y:"100%"},animate:W?{opacity:1,scale:1}:{opacity:1,y:0},exit:W?{opacity:0,scale:.95}:{opacity:1,y:"100%"},transition:{type:"spring",stiffness:350,damping:30},style:{position:"fixed",...W?{top:"50%",left:"50%",x:"-50%",y:"-50%",width:"420px",maxWidth:"90vw",borderRadius:"20px"}:{bottom:0,left:0,right:0,borderRadius:"24px 24px 0 0"},background:"var(--bg-card)",zIndex:2001,maxHeight:W?"85vh":"90vh",overflow:"hidden",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",display:"flex",flexDirection:"column"},children:[!W&&(0,t.jsx)("div",{style:{width:"40px",height:"4px",background:"var(--border)",borderRadius:"2px",margin:"12px auto",flexShrink:0}}),(0,t.jsxs)("div",{style:{background:"linear-gradient(145deg, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.05) 100%)",padding:W?"20px":"16px 20px",position:"relative",overflow:"hidden",flexShrink:0},children:[(0,t.jsx)("div",{style:{position:"absolute",top:"-20px",right:"-20px",width:"100px",height:"100px",background:"rgba(212, 175, 55, 0.1)",borderRadius:"50%"}}),(0,t.jsxs)("div",{style:{display:"flex",gap:"14px",alignItems:"flex-start",position:"relative",zIndex:1},children:[(0,t.jsx)("div",{style:{width:"56px",height:"56px",borderRadius:"14px",background:"linear-gradient(145deg, #3a3a4a 0%, #2a2a38 100%)",border:"1px solid rgba(212, 175, 55, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,t.jsx)(x.default,{categoryId:_?.id||"",size:26,color:"var(--accent)"})}),(0,t.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,t.jsx)("h2",{id:"sheet-detail-title",style:{fontFamily:"var(--font-sans)",fontSize:"17px",fontWeight:"700",color:"var(--text-primary)",marginBottom:"3px",lineHeight:"1.3"},children:m.title}),(0,t.jsx)("p",{style:{fontFamily:"var(--font-sans)",fontSize:"13px",color:"var(--text-muted)",marginBottom:"6px"},children:m.composer}),(0,t.jsx)("span",{style:{display:"inline-block",padding:"3px 8px",background:"rgba(212, 175, 55, 0.15)",color:"var(--accent)",borderRadius:"6px",fontSize:"10px",fontWeight:"600",fontFamily:"var(--font-sans)"},children:_?.name})]}),(0,t.jsx)("button",{onClick:q,"aria-label":"Fechar modal",style:{width:"32px",height:"32px",borderRadius:"50%",background:"var(--bg-secondary)",border:"none",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"var(--text-muted)",flexShrink:0},children:(0,t.jsx)("div",{style:{width:"16px",height:"16px"},children:(0,t.jsx)(p.Icons.Close,{})})})]})]}),(0,t.jsxs)("div",{style:{padding:W?"16px 20px 20px":"16px 20px 28px",overflowY:"auto",flex:1},children:[(0,t.jsxs)("div",{style:{display:"flex",gap:"8px",marginBottom:"16px",flexWrap:"wrap"},children:[(0,t.jsxs)("div",{style:{background:"var(--bg-secondary)",padding:"8px 12px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[(0,t.jsx)("div",{style:{width:"12px",height:"12px",color:"var(--text-muted)"},children:(0,t.jsx)(p.Icons.Download,{})}),(0,t.jsx)("span",{style:{fontSize:"12px",fontWeight:"600",color:"var(--text-primary)",fontFamily:"var(--font-sans)"},children:m.downloads||0})]}),(0,t.jsx)("div",{style:{background:"var(--bg-secondary)",padding:"8px 12px",borderRadius:"8px"},children:(0,t.jsx)("span",{style:{fontSize:"12px",fontWeight:"600",color:"var(--text-primary)",fontFamily:"var(--font-sans)"},children:m.year})}),m.featured&&(0,t.jsx)("div",{style:{background:"rgba(212, 175, 55, 0.15)",padding:"8px 12px",borderRadius:"8px"},children:(0,t.jsxs)("span",{style:{fontSize:"12px",fontWeight:"600",color:"var(--accent)",fontFamily:"var(--font-sans)",display:"flex",alignItems:"center",gap:"4px"},children:[(0,t.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"var(--accent)",stroke:"none","aria-hidden":"true",children:(0,t.jsx)("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),"Destaque"]})})]}),(0,t.jsxs)("div",{style:{marginBottom:"14px"},children:[(0,t.jsx)("p",{style:{fontSize:"10px",color:"var(--text-muted)",marginBottom:"8px",fontFamily:"var(--font-sans)",textTransform:"uppercase",letterSpacing:"0.5px",fontWeight:"600"},children:"Baixar Partitura"}),!Y||K||U?(0,t.jsxs)("button",{"data-walkthrough":"quick-download",onClick:()=>M.handleSelectInstrument(Y?"Grade":H),"aria-label":Y?"Baixar grade":`Baixar partitura para ${H}`,disabled:U,style:{width:"100%",padding:"12px 14px",borderRadius:"10px",background:U?"var(--bg-secondary)":"linear-gradient(145deg, #722F37 0%, #5C1A1B 100%)",border:"none",color:U?"var(--text-muted)":"#F4E4BC",fontFamily:"var(--font-sans)",fontSize:"13px",fontWeight:"600",cursor:U?"wait":"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px",boxShadow:U?"none":"0 4px 12px rgba(114, 47, 55, 0.3)"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,t.jsx)("div",{style:{width:"16px",height:"16px"},children:(0,t.jsx)(p.Icons.Download,{})}),(0,t.jsx)("span",{children:U?"Carregando...":Y?"Baixar Grade":"Meu Instrumento"})]}),(0,t.jsx)("span",{style:{background:"rgba(244, 228, 188, 0.2)",padding:"3px 8px",borderRadius:"5px",fontSize:"10px",fontWeight:"700"},children:Y?"Grade":H})]}):(0,t.jsxs)("button",{"data-walkthrough":"quick-download",disabled:!0,"aria-label":"Grade não disponível",style:{width:"100%",padding:"12px 14px",borderRadius:"10px",background:"var(--bg-secondary)",border:"1px solid var(--border)",color:"var(--text-muted)",fontFamily:"var(--font-sans)",fontSize:"13px",fontWeight:"600",cursor:"not-allowed",display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px",opacity:.6},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,t.jsx)("div",{style:{width:"16px",height:"16px"},children:(0,t.jsx)(p.Icons.Download,{})}),(0,t.jsx)("span",{children:"Grade nao disponivel"})]}),(0,t.jsx)("span",{style:{background:"var(--bg-card)",padding:"3px 8px",borderRadius:"5px",fontSize:"10px",fontWeight:"700"},children:"Indisponivel"})]}),(0,t.jsx)("div",{"data-walkthrough":"instrument-selector",children:(0,t.jsx)(k,{isOpen:P,instruments:Q,userInstrument:H,isMaestro:Y,downloading:M.downloading,canShare:M.canShareFiles(),shareCart:z.filter(e=>void 0!==e.parteId).map(e=>({instrument:e.parteName,parteId:e.parteId})),onToggle:()=>L(!P),onSelectInstrument:M.handleSelectParteEspecifica,onPrintInstrument:M.handlePrintInstrument,onViewInstrument:M.handleViewInstrument,onShareInstrument:M.handleShareInstrument,onAddToCart:N,onRemoveFromCart:R})})]}),(0,t.jsxs)("div",{"data-walkthrough":"sheet-options",style:{display:"flex",gap:"8px"},children:[(0,t.jsxs)("button",{onClick:()=>M.handlePrintInstrument(Y?"Grade":H),disabled:M.downloading||U||Y&&!K,"aria-label":"Imprimir partitura",style:{flex:1,padding:"10px",borderRadius:"10px",background:Y&&!K?"var(--bg-secondary)":"rgba(52, 152, 219, 0.1)",border:Y&&!K?"1.5px solid var(--border)":"1.5px solid rgba(52, 152, 219, 0.3)",color:Y&&!K?"var(--text-muted)":"#3498db",fontFamily:"var(--font-sans)",fontSize:"12px",fontWeight:"600",cursor:Y&&!K||M.downloading||U?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",opacity:Y&&!K?.5:1},children:[(0,t.jsx)("div",{style:{width:"14px",height:"14px"},children:(0,t.jsx)(p.Icons.Printer,{})}),"Imprimir"]}),M.canShareFiles()&&(0,t.jsxs)("button",{onClick:()=>M.handleShareInstrument(Y?"Grade":H),disabled:M.downloading||U||Y&&!K,"aria-label":"Compartilhar partitura",style:{flex:1,padding:"10px",borderRadius:"10px",background:Y&&!K?"var(--bg-secondary)":"rgba(37, 211, 102, 0.1)",border:Y&&!K?"1.5px solid var(--border)":"1.5px solid rgba(37, 211, 102, 0.3)",color:Y&&!K?"var(--text-muted)":"#25D366",fontFamily:"var(--font-sans)",fontSize:"12px",fontWeight:"600",cursor:Y&&!K||M.downloading||U?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px",opacity:Y&&!K?.5:1},children:[(0,t.jsx)("div",{style:{width:"14px",height:"14px"},children:(0,t.jsx)(p.Icons.Share,{})}),"Enviar"]}),(0,t.jsxs)("button",{onClick:()=>B(m.id),"aria-pressed":V,"aria-label":V?"Remover dos favoritos":"Adicionar aos favoritos",style:{flex:1,padding:"10px",borderRadius:"10px",background:V?"rgba(232,90,79,0.1)":"transparent",border:V?"1.5px solid var(--primary)":"1.5px solid var(--border)",color:V?"var(--primary)":"var(--text-muted)",fontFamily:"var(--font-sans)",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[(0,t.jsx)("div",{style:{width:"14px",height:"14px"},children:(0,t.jsx)(p.Icons.Heart,{filled:V})}),V?"Favorito":"Favoritar"]})]})]})]},"sheet-modal-content")]})})}],19638);var I=e.i(63806),S=e.i(66570),F=e.i(61936);e.s(["default",0,()=>{let e=(0,a.useRouter)(),{showNotifications:i,setShowNotifications:n,theme:o}=(0,s.useUI)(),{sheets:l}=(0,d.useData)(),{notifications:c,loading:x,markNotificationAsRead:h,markAllNotificationsAsRead:u,refreshNotifications:g}=(0,I.useNotifications)(),f=(0,S.useIsMobile)();return((0,r.useEffect)(()=>{i&&g()},[i,g]),(0,r.useEffect)(()=>{if(i&&f)document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.top=`-${window.scrollY}px`;else{let e=document.body.style.top;document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.style.top="",e&&window.scrollTo(0,-1*parseInt(e||"0"))}return()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.style.top=""}},[i,f]),i)?(0,t.jsxs)(t.Fragment,{children:[f&&(0,t.jsx)("div",{onClick:()=>n(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",zIndex:1e3,animation:"fadeIn 0.2s ease"}}),!f&&(0,t.jsx)("div",{onClick:()=>n(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3}}),(0,t.jsxs)("div",{style:{position:"fixed",top:f?"50%":"70px",left:f?"50%":"auto",right:f?"auto":"16px",transform:f?"translate(-50%, -50%)":"none",width:f?"calc(100% - 40px)":"calc(100% - 32px)",maxWidth:"360px",maxHeight:f?"80vh":"70vh",background:"var(--bg-card)",borderRadius:"20px",boxShadow:"0 8px 32px rgba(0,0,0,0.25)",zIndex:1001,overflow:"hidden",animation:f?"popIn 0.25s ease":"slideUp 0.3s ease",border:"1px solid var(--border)"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 20px",borderBottom:"1px solid var(--border)"},children:[(0,t.jsx)("h3",{style:{fontFamily:"var(--font-sans)",fontSize:"18px",fontWeight:"700",color:"var(--text-primary)"},children:"Notificações"}),c.some(e=>!e.read)&&(0,t.jsx)("button",{onClick:u,style:{background:"none",border:"none",color:"var(--primary)",fontSize:"13px",fontWeight:"600",cursor:"pointer",fontFamily:"var(--font-sans)"},children:"Marcar como lidas"})]}),(0,t.jsx)("div",{style:{maxHeight:"calc(70vh - 60px)",overflowY:"auto"},children:x?(0,t.jsxs)("div",{style:{padding:"40px 20px",textAlign:"center"},children:[(0,t.jsx)("div",{style:{width:"32px",height:"32px",border:"3px solid var(--border)",borderTopColor:"var(--primary)",borderRadius:"50%",margin:"0 auto 12px",animation:"spin 1s linear infinite"}}),(0,t.jsx)("p",{style:{fontSize:"14px",color:"var(--text-muted)",fontFamily:"var(--font-sans)"},children:"Carregando..."})]}):0===c.length?(0,t.jsx)(F.default,{icon:p.Icons.Music,title:"Nenhuma partitura nova",size:"small"}):c.map(r=>{let a,i;return(0,t.jsxs)("div",{onClick:()=>{let t;return h(r.id),void((t=l.find(e=>e.title.toLowerCase()===r.title.toLowerCase()))?e.push(`/acervo/${t.category}/${t.id}`):e.push("/acervo"),n(!1))},style:{display:"flex",alignItems:"center",gap:"12px",padding:"14px 20px",cursor:"pointer",background:r.read?"transparent":"dark"===o?"rgba(212,175,55,0.08)":"rgba(212,175,55,0.1)",borderBottom:"1px solid var(--border)",transition:"background 0.2s ease"},children:[(0,t.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(145deg, #722F37 0%, #5C1A1B 100%)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:(0,t.jsx)("div",{style:{width:"20px",height:"20px",color:"#D4AF37"},children:(0,t.jsx)(p.Icons.Music,{})})}),(0,t.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,t.jsx)("p",{style:{fontSize:"14px",fontWeight:r.read?"500":"600",color:"var(--text-primary)",marginBottom:"2px",fontFamily:"var(--font-sans)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:r.title}),(0,t.jsx)("p",{style:{fontSize:"13px",color:"var(--text-muted)",fontFamily:"var(--font-sans)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:r.composer||"Compositor desconhecido"}),(0,t.jsx)("p",{style:{fontSize:"11px",color:"var(--text-muted)",opacity:.6,fontFamily:"var(--font-sans)",marginTop:"2px"},children:(a=new Date(r.date),(i=Math.floor((new Date().getTime()-a.getTime())/864e5))<0||0===i?"Hoje":1===i?"Ontem":i<7?`${i} dias atras`:a.toLocaleDateString("pt-BR",{day:"2-digit",month:"short"}))})]}),!r.read&&(0,t.jsx)("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#D4AF37",flexShrink:0}})]},r.id)})})]})]}):null}],96873);var R=e.i(63221);e.s(["default",0,()=>{let{shareCart:e,showShareCart:a,setShowShareCart:i,removeFromShareCart:n,clearShareCart:o,showToast:l}=(0,s.useUI)(),[d]=(0,r.useState)(window.innerWidth>=1024),[c,x]=(0,r.useState)(!1),[h,f]=(0,r.useState)([]),[b,m]=(0,r.useState)({current:0,total:0}),[y,v]=(0,r.useState)(!1),[w,j]=(0,r.useState)(null),k=(0,r.useRef)(null),{shouldRender:C,isExiting:I}=(0,R.default)(a,250),S=e.reduce((e,t)=>{let r=t.partituraTitle;return e[r]||(e[r]={title:t.partituraTitle,partes:[]}),e[r].partes.push(t),e},{});(0,r.useEffect)(()=>{if(!a||0===e.length){let e=requestAnimationFrame(()=>{f([]),m({current:0,total:0}),j(null)});return()=>cancelAnimationFrame(e)}k.current&&k.current.abort();let t=new AbortController;k.current=t;let r=!1;return(async()=>{v(!0),j(null),m({current:0,total:e.length});let a=[],i=[];for(let n=0;n<e.length;n++){if(t.signal.aborted||r)return;let o=e[n];m({current:n+1,total:e.length});try{let e=await fetch(`${u.API_BASE_URL}/api/download/parte/${o.parteId}`,{headers:{Authorization:`Bearer ${g.default.get("authToken",null)}`},signal:t.signal});if(e.ok){let t=await e.blob(),r=`${o.partituraTitle} - ${o.parteName}.pdf`;a.push(new File([t],r,{type:"application/pdf"}))}else i.push(`${o.parteName}: erro ${e.status}`)}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;console.error(`Erro ao baixar ${o.parteName}:`,e),i.push(`${o.parteName}: falha`)}}t.signal.aborted||r||(f(a),v(!1),i.length>0&&0===a.length&&j("Erro ao preparar arquivos"))})(),()=>{r=!0,t.abort()}},[a,e]);let F=(0,r.useCallback)(()=>{try{let e=new File(["test"],"test.txt",{type:"text/plain"});return"function"==typeof navigator.canShare&&navigator.canShare({files:[e]})}catch{return!1}},[]),z=(0,r.useCallback)(e=>{l(`Baixando ${e.length} arquivo(s)...`),e.forEach((t,r)=>{setTimeout(()=>{let a=URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download=t.name,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a),r===e.length-1&&setTimeout(()=>{l("Downloads concluidos!"),o(),i(!1)},500)},500*r)})},[l,o,i]),$=(0,r.useCallback)(()=>{c||0===h.length||(x(!0),F()&&navigator.canShare({files:h})?navigator.share({files:h,title:`${h.length} partituras`,text:`Partituras: ${e.map(e=>e.partituraTitle).join(", ")}`}).then(()=>{l("Compartilhado com sucesso!"),o(),i(!1)}).catch(e=>{"AbortError"!==e.name&&(console.error("Erro no share:",e),z(h))}).finally(()=>{x(!1)}):(z(h),x(!1)))},[c,h,e,F,o,i,l,z]),B=()=>i(!1),E=h.length>0&&!y,A=b.total>0?Math.round(b.current/b.total*100):0;return C?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{onClick:B,role:"presentation",style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",zIndex:2e3,animation:I?"modalBackdropOut 0.25s ease forwards":"modalBackdropIn 0.2s ease"}}),(0,t.jsxs)("div",{role:"dialog","aria-modal":"true","aria-labelledby":"share-cart-title",style:{position:"fixed",...d?{top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"400px",maxWidth:"90vw",borderRadius:"20px",animation:I?"modalScaleOut 0.25s ease forwards":"popIn 0.3s cubic-bezier(0.16, 1, 0.3, 1)"}:{bottom:0,left:0,right:0,borderRadius:"24px 24px 0 0",animation:I?"slideDownModal 0.25s ease forwards":"slideUpModal 0.35s cubic-bezier(0.16, 1, 0.3, 1)"},background:"var(--bg-card)",zIndex:2001,maxHeight:d?"80vh":"85vh",overflow:"hidden",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",display:"flex",flexDirection:"column"},children:[!d&&(0,t.jsx)("div",{style:{width:"40px",height:"4px",background:"var(--border)",borderRadius:"2px",margin:"12px auto",flexShrink:0}}),(0,t.jsxs)("div",{style:{padding:"16px 20px",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between",flexShrink:0},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,t.jsx)("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:"rgba(37, 211, 102, 0.15)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,t.jsx)("div",{style:{width:"18px",height:"18px",color:"#25D366"},children:(0,t.jsx)(p.Icons.Share,{})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{id:"share-cart-title",style:{fontFamily:"var(--font-sans)",fontSize:"16px",fontWeight:"700",color:"var(--text-primary)",margin:0},children:"Carrinho de Envio"}),(0,t.jsxs)("p",{style:{fontFamily:"var(--font-sans)",fontSize:"12px",color:"var(--text-muted)",margin:0},children:[e.length," ",1===e.length?"parte selecionada":"partes selecionadas"]})]})]}),(0,t.jsx)("button",{onClick:B,"aria-label":"Fechar",style:{width:"32px",height:"32px",borderRadius:"50%",background:"var(--bg-secondary)",border:"none",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"var(--text-muted)"},children:(0,t.jsx)("div",{style:{width:"16px",height:"16px"},children:(0,t.jsx)(p.Icons.Close,{})})})]}),y&&(0,t.jsx)("div",{style:{height:"3px",background:"var(--bg-secondary)",overflow:"hidden"},children:(0,t.jsx)("div",{style:{height:"100%",width:`${A}%`,background:"linear-gradient(90deg, #25D366 0%, #128C7E 100%)",transition:"width 0.3s ease"}})}),(0,t.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"12px 20px"},children:[Object.entries(S).map(([e,r])=>(0,t.jsxs)("div",{style:{marginBottom:"16px"},children:[(0,t.jsx)("p",{style:{fontFamily:"var(--font-sans)",fontSize:"11px",fontWeight:"600",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"8px"},children:r.title}),(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:r.partes.map(e=>(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",background:"var(--bg-secondary)",borderRadius:"10px"},children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,t.jsx)("div",{style:{width:"14px",height:"14px",color:"var(--accent)"},children:(0,t.jsx)(p.Icons.Music,{})}),(0,t.jsx)("span",{style:{fontFamily:"var(--font-sans)",fontSize:"13px",fontWeight:"500",color:"var(--text-primary)"},children:e.parteName})]}),(0,t.jsx)("button",{onClick:()=>n(e.parteId),"aria-label":`Remover ${e.parteName}`,style:{width:"28px",height:"28px",borderRadius:"7px",background:"rgba(231, 76, 60, 0.1)",border:"none",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"#e74c3c"},children:(0,t.jsx)("div",{style:{width:"14px",height:"14px"},children:(0,t.jsx)(p.Icons.Close,{})})})]},e.parteId))})]},e)),0===e.length&&(0,t.jsxs)("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-muted)"},children:[(0,t.jsx)("div",{style:{width:"48px",height:"48px",margin:"0 auto 12px",opacity:.4},children:(0,t.jsx)(p.Icons.Music,{})}),(0,t.jsx)("p",{style:{fontFamily:"var(--font-sans)",fontSize:"14px"},children:"Nenhuma parte selecionada"})]}),w&&(0,t.jsx)("p",{style:{fontFamily:"var(--font-sans)",fontSize:"12px",color:"#e74c3c",textAlign:"center",marginTop:"8px"},children:w})]}),(0,t.jsxs)("div",{style:{padding:"16px 20px",borderTop:"1px solid var(--border)",display:"flex",gap:"10px",flexShrink:0},children:[(0,t.jsx)("button",{onClick:o,disabled:0===e.length,style:{flex:1,padding:"12px",borderRadius:"10px",background:"var(--bg-secondary)",border:"1px solid var(--border)",color:0===e.length?"var(--text-muted)":"var(--text-primary)",fontFamily:"var(--font-sans)",fontSize:"13px",fontWeight:"600",cursor:0===e.length?"not-allowed":"pointer",opacity:0===e.length?.5:1},children:"Limpar"}),(0,t.jsxs)("button",{onClick:$,disabled:!E||c,style:{flex:2,padding:"12px",borderRadius:"10px",background:E?"linear-gradient(145deg, #25D366 0%, #128C7E 100%)":"var(--bg-secondary)",border:"none",color:E?"#FFFFFF":"var(--text-muted)",fontFamily:"var(--font-sans)",fontSize:"13px",fontWeight:"600",cursor:!E||c?"not-allowed":"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",boxShadow:E?"0 4px 12px rgba(37, 211, 102, 0.3)":"none",opacity:E?1:.5},children:[(0,t.jsx)("div",{style:{width:"16px",height:"16px"},children:y||c?(0,t.jsx)("div",{style:{width:"16px",height:"16px",border:"2px solid rgba(255,255,255,0.3)",borderTopColor:E?"#fff":"var(--text-muted)",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}):(0,t.jsx)(p.Icons.Share,{})}),y?`Preparando... ${A}%`:c?"Enviando...":"Compartilhar"]})]})]})]}):null}],97052)}]);