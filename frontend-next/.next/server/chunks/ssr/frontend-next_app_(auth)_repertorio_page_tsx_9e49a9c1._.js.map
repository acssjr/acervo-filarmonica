{"version":3,"sources":["../../../../../frontend-next/app/%28auth%29/repertorio/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect, useMemo, useSyncExternalStore } from \"react\";\r\nimport { motion } from \"motion/react\";\r\nimport { useAuth } from \"@contexts/AuthContext\";\r\nimport { useUI } from \"@contexts/UIContext\";\r\nimport { useData } from \"@contexts/DataContext\";\r\nimport { API } from \"@lib/api\";\r\nimport Storage from \"@lib/storage\";\r\nimport { Icons } from \"@constants/icons\";\r\nimport Header from \"@components/common/Header\";\r\nimport EmptyState from \"@components/common/EmptyState\";\r\n\r\n// Hook to detect desktop via useSyncExternalStore (SSR-safe, no setState in effect)\r\nfunction subscribeToResize(callback: () => void) {\r\n  window.addEventListener(\"resize\", callback);\r\n  return () => window.removeEventListener(\"resize\", callback);\r\n}\r\nfunction getIsDesktop() {\r\n  return window.innerWidth >= 1024;\r\n}\r\nfunction getIsDesktopServer() {\r\n  return false;\r\n}\r\nfunction useIsDesktop() {\r\n  return useSyncExternalStore(subscribeToResize, getIsDesktop, getIsDesktopServer);\r\n}\r\n\r\n// ============ TYPES ============\r\n\r\ninterface RepertorioPartitura {\r\n  id: number;\r\n  titulo: string;\r\n  compositor: string;\r\n  categoria_id: string;\r\n}\r\n\r\ninterface Repertorio {\r\n  id: number;\r\n  nome: string;\r\n  data_apresentacao?: string;\r\n  partituras?: RepertorioPartitura[];\r\n}\r\n\r\ninterface SimplifiedSheet {\r\n  id: number;\r\n  title: string;\r\n  composer: string;\r\n  category: string;\r\n}\r\n\r\ninterface DownloadModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  sheets: SimplifiedSheet[];\r\n  instruments: string[];\r\n  userInstrument: string | undefined;\r\n  downloading: boolean;\r\n  onDownload: (formato: string, instrumento: string, partituraIds: number[]) => void;\r\n}\r\n\r\n// ============ SKELETON LOADING ============\r\nconst RepertorioSkeleton = () => (\r\n  <div>\r\n    {/* Header skeleton */}\r\n    <div style={{ padding: \"20px 20px 0\" }}>\r\n      <div style={{\r\n        width: \"160px\",\r\n        height: \"24px\",\r\n        background: \"linear-gradient(90deg, var(--bg-secondary) 25%, var(--bg-card) 50%, var(--bg-secondary) 75%)\",\r\n        backgroundSize: \"200% 100%\",\r\n        animation: \"shimmer 1.5s infinite\",\r\n        borderRadius: \"6px\",\r\n        marginBottom: \"8px\"\r\n      }} />\r\n      <div style={{\r\n        width: \"100px\",\r\n        height: \"16px\",\r\n        background: \"linear-gradient(90deg, var(--bg-secondary) 25%, var(--bg-card) 50%, var(--bg-secondary) 75%)\",\r\n        backgroundSize: \"200% 100%\",\r\n        animation: \"shimmer 1.5s infinite\",\r\n        borderRadius: \"4px\"\r\n      }} />\r\n    </div>\r\n\r\n    {/* Download button skeleton */}\r\n    <div style={{ padding: \"16px\", display: \"flex\", justifyContent: \"center\" }}>\r\n      <div style={{\r\n        width: \"140px\",\r\n        height: \"44px\",\r\n        background: \"linear-gradient(90deg, var(--bg-secondary) 25%, var(--bg-card) 50%, var(--bg-secondary) 75%)\",\r\n        backgroundSize: \"200% 100%\",\r\n        animation: \"shimmer 1.5s infinite\",\r\n        borderRadius: \"12px\"\r\n      }} />\r\n    </div>\r\n\r\n    {/* List skeleton */}\r\n    <div style={{ padding: \"0 16px\", display: \"flex\", flexDirection: \"column\", gap: \"8px\" }}>\r\n      {[1, 2, 3, 4, 5].map(i => (\r\n        <div\r\n          key={i}\r\n          style={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: \"12px\",\r\n            padding: \"12px 16px\",\r\n            background: \"var(--bg-secondary)\",\r\n            borderRadius: \"12px\"\r\n          }}\r\n        >\r\n          {/* Number circle */}\r\n          <div style={{\r\n            width: \"28px\",\r\n            height: \"28px\",\r\n            borderRadius: \"50%\",\r\n            background: \"linear-gradient(90deg, var(--bg-card) 25%, var(--border) 50%, var(--bg-card) 75%)\",\r\n            backgroundSize: \"200% 100%\",\r\n            animation: \"shimmer 1.5s infinite\",\r\n            animationDelay: `${i * 0.1}s`,\r\n            flexShrink: 0\r\n          }} />\r\n          {/* Text area */}\r\n          <div style={{ flex: 1 }}>\r\n            <div style={{\r\n              width: \"80%\",\r\n              height: \"14px\",\r\n              background: \"linear-gradient(90deg, var(--bg-card) 25%, var(--border) 50%, var(--bg-card) 75%)\",\r\n              backgroundSize: \"200% 100%\",\r\n              animation: \"shimmer 1.5s infinite\",\r\n              animationDelay: `${i * 0.1}s`,\r\n              borderRadius: \"4px\",\r\n              marginBottom: \"6px\"\r\n            }} />\r\n            <div style={{\r\n              width: \"50%\",\r\n              height: \"12px\",\r\n              background: \"linear-gradient(90deg, var(--bg-card) 25%, var(--border) 50%, var(--bg-card) 75%)\",\r\n              backgroundSize: \"200% 100%\",\r\n              animation: \"shimmer 1.5s infinite\",\r\n              animationDelay: `${i * 0.1}s`,\r\n              borderRadius: \"4px\"\r\n            }} />\r\n          </div>\r\n          {/* Action button */}\r\n          <div style={{\r\n            width: \"32px\",\r\n            height: \"32px\",\r\n            borderRadius: \"8px\",\r\n            background: \"linear-gradient(90deg, var(--bg-card) 25%, var(--border) 50%, var(--bg-card) 75%)\",\r\n            backgroundSize: \"200% 100%\",\r\n            animation: \"shimmer 1.5s infinite\",\r\n            animationDelay: `${i * 0.1}s`\r\n          }} />\r\n        </div>\r\n      ))}\r\n    </div>\r\n  </div>\r\n);\r\n\r\n// ============ MODAL DE DOWNLOAD ============\r\nconst DownloadModal = ({\r\n  isOpen,\r\n  onClose,\r\n  sheets,\r\n  instruments,\r\n  userInstrument,\r\n  downloading,\r\n  onDownload\r\n}: DownloadModalProps) => {\r\n  const [selectedInstrument, setSelectedInstrument] = useState(\"\");\r\n  const [selectedIds, setSelectedIds] = useState<Set<number>>(() => new Set(sheets.map(s => s.id)));\r\n  const [showInstrumentPicker, setShowInstrumentPicker] = useState(false);\r\n  const isDesktop = useIsDesktop();\r\n\r\n  const toggleSelection = (id: number) => {\r\n    setSelectedIds(prev => {\r\n      const newSet = new Set(prev);\r\n      if (newSet.has(id)) newSet.delete(id);\r\n      else newSet.add(id);\r\n      return newSet;\r\n    });\r\n  };\r\n\r\n  const selectAll = () => setSelectedIds(new Set(sheets.map(s => s.id)));\r\n  const deselectAll = () => setSelectedIds(new Set());\r\n  const allSelected = selectedIds.size === sheets.length;\r\n\r\n  const handleDownload = (formato: string) => {\r\n    onDownload(formato, selectedInstrument, Array.from(selectedIds));\r\n  };\r\n\r\n  const handleSelectInstrument = (inst: string) => {\r\n    setSelectedInstrument(inst);\r\n    setShowInstrumentPicker(false);\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  // Filtrar instrumentos (sem Grade para download em lote)\r\n  const filteredInstruments = instruments.filter(i => i.toLowerCase() !== \"grade\");\r\n\r\n  return (\r\n    <>\r\n      {/* Overlay */}\r\n      <div\r\n        onClick={onClose}\r\n        style={{\r\n          position: \"fixed\",\r\n          inset: 0,\r\n          background: \"rgba(0,0,0,0.6)\",\r\n          backdropFilter: \"blur(4px)\",\r\n          zIndex: 2000\r\n        }}\r\n      />\r\n\r\n      {/* Modal - desktop centralizado, mobile bottom-sheet */}\r\n      <div style={{\r\n        position: \"fixed\",\r\n        ...(isDesktop ? {\r\n          top: \"50%\",\r\n          left: \"50%\",\r\n          transform: \"translate(-50%, -50%)\",\r\n          width: \"400px\",\r\n          maxWidth: \"90vw\",\r\n          borderRadius: \"20px\",\r\n          maxHeight: \"70vh\"\r\n        } : {\r\n          bottom: 0,\r\n          left: 0,\r\n          right: 0,\r\n          borderRadius: \"24px 24px 0 0\",\r\n          maxHeight: \"80vh\"\r\n        }),\r\n        background: \"var(--bg-card)\",\r\n        zIndex: 2001,\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        overflow: \"hidden\",\r\n        boxShadow: isDesktop ? \"0 25px 50px -12px rgba(0, 0, 0, 0.25)\" : \"0 -10px 40px rgba(0,0,0,0.3)\"\r\n      }}>\r\n        {/* Handle - apenas mobile */}\r\n        {!isDesktop && (\r\n          <div style={{\r\n            width: \"40px\",\r\n            height: \"4px\",\r\n            background: \"var(--border)\",\r\n            borderRadius: \"2px\",\r\n            margin: \"12px auto 8px\",\r\n            flexShrink: 0\r\n          }} />\r\n        )}\r\n\r\n        {/* Header */}\r\n        <div style={{\r\n          padding: isDesktop ? \"20px 20px 16px\" : \"0 20px 16px\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"space-between\"\r\n        }}>\r\n          <h3 style={{\r\n            margin: 0,\r\n            fontSize: \"17px\",\r\n            fontWeight: \"700\",\r\n            fontFamily: \"var(--font-sans)\",\r\n            color: \"var(--text-primary)\"\r\n          }}>\r\n            Baixar Partituras\r\n          </h3>\r\n          <button\r\n            onClick={onClose}\r\n            aria-label=\"Fechar\"\r\n            style={{\r\n              width: \"32px\",\r\n              height: \"32px\",\r\n              borderRadius: \"50%\",\r\n              background: \"var(--bg-secondary)\",\r\n              border: \"none\",\r\n              color: \"var(--text-muted)\",\r\n              cursor: \"pointer\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\"\r\n            }}\r\n          >\r\n            <div style={{ width: \"16px\", height: \"16px\" }}><Icons.Close /></div>\r\n          </button>\r\n        </div>\r\n\r\n        {/* Conteudo scrollavel */}\r\n        <div style={{\r\n          padding: \"0 20px 20px\",\r\n          overflowY: \"auto\",\r\n          flex: 1\r\n        }}>\r\n          {/* Secao: Instrumento */}\r\n          <p style={{\r\n            fontSize: \"10px\",\r\n            color: \"var(--text-muted)\",\r\n            marginBottom: \"8px\",\r\n            fontFamily: \"var(--font-sans)\",\r\n            textTransform: \"uppercase\",\r\n            letterSpacing: \"0.5px\",\r\n            fontWeight: \"600\"\r\n          }}>Instrumento</p>\r\n\r\n          {/* Estado 1: Mostrar botoes Meu Instrumento + Outro Instrumento */}\r\n          {!showInstrumentPicker && !selectedInstrument && userInstrument && (\r\n            <>\r\n              {/* Botao Meu Instrumento */}\r\n              <button\r\n                onClick={() => handleSelectInstrument(userInstrument)}\r\n                style={{\r\n                  width: \"100%\",\r\n                  padding: \"12px 14px\",\r\n                  borderRadius: \"10px\",\r\n                  background: \"linear-gradient(145deg, #722F37 0%, #5C1A1B 100%)\",\r\n                  border: \"none\",\r\n                  color: \"#F4E4BC\",\r\n                  fontFamily: \"var(--font-sans)\",\r\n                  fontSize: \"13px\",\r\n                  fontWeight: \"600\",\r\n                  cursor: \"pointer\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"space-between\",\r\n                  marginBottom: \"8px\",\r\n                  boxShadow: \"0 4px 12px rgba(114, 47, 55, 0.3)\"\r\n                }}\r\n              >\r\n                <div style={{ display: \"flex\", alignItems: \"center\", gap: \"8px\" }}>\r\n                  <div style={{ width: \"16px\", height: \"16px\" }}><Icons.Download /></div>\r\n                  <span>Meu Instrumento</span>\r\n                </div>\r\n                <span style={{\r\n                  background: \"rgba(244, 228, 188, 0.2)\",\r\n                  padding: \"3px 8px\",\r\n                  borderRadius: \"5px\",\r\n                  fontSize: \"10px\",\r\n                  fontWeight: \"700\"\r\n                }}>{userInstrument}</span>\r\n              </button>\r\n\r\n              {/* Botao Outro Instrumento */}\r\n              <button\r\n                onClick={() => setShowInstrumentPicker(true)}\r\n                style={{\r\n                  width: \"100%\",\r\n                  padding: \"12px 14px\",\r\n                  borderRadius: \"10px\",\r\n                  background: \"var(--bg-secondary)\",\r\n                  border: \"1px solid var(--border)\",\r\n                  color: \"var(--text-primary)\",\r\n                  fontFamily: \"var(--font-sans)\",\r\n                  fontSize: \"13px\",\r\n                  fontWeight: \"600\",\r\n                  cursor: \"pointer\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"space-between\",\r\n                  marginBottom: \"14px\"\r\n                }}\r\n              >\r\n                <div style={{ display: \"flex\", alignItems: \"center\", gap: \"8px\" }}>\r\n                  <div style={{ width: \"16px\", height: \"16px\" }}><Icons.Music /></div>\r\n                  <span>Outro Instrumento</span>\r\n                </div>\r\n                <div style={{ width: \"16px\", height: \"16px\" }}><Icons.ChevronDown /></div>\r\n              </button>\r\n            </>\r\n          )}\r\n\r\n          {/* Estado 2: Instrumento ja selecionado - mostrar qual e permitir trocar */}\r\n          {!showInstrumentPicker && selectedInstrument && (\r\n            <button\r\n              onClick={() => setShowInstrumentPicker(true)}\r\n              style={{\r\n                width: \"100%\",\r\n                padding: \"12px 14px\",\r\n                borderRadius: \"10px\",\r\n                background: \"linear-gradient(145deg, #722F37 0%, #5C1A1B 100%)\",\r\n                border: \"none\",\r\n                color: \"#F4E4BC\",\r\n                fontFamily: \"var(--font-sans)\",\r\n                fontSize: \"13px\",\r\n                fontWeight: \"600\",\r\n                cursor: \"pointer\",\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"space-between\",\r\n                marginBottom: \"14px\",\r\n                boxShadow: \"0 4px 12px rgba(114, 47, 55, 0.3)\"\r\n              }}\r\n            >\r\n              <div style={{ display: \"flex\", alignItems: \"center\", gap: \"8px\" }}>\r\n                <div style={{ width: \"16px\", height: \"16px\" }}><Icons.Music /></div>\r\n                <span>{selectedInstrument}</span>\r\n              </div>\r\n              <span style={{\r\n                background: \"rgba(244, 228, 188, 0.2)\",\r\n                padding: \"3px 8px\",\r\n                borderRadius: \"5px\",\r\n                fontSize: \"10px\",\r\n                fontWeight: \"700\"\r\n              }}>\r\n                {selectedInstrument === userInstrument ? \"MEU\" : \"ALTERAR\"}\r\n              </span>\r\n            </button>\r\n          )}\r\n\r\n          {/* Estado 3: Lista de instrumentos aberta (picker) */}\r\n          {showInstrumentPicker && (\r\n            <>\r\n              <div style={{\r\n                background: \"var(--bg-secondary)\",\r\n                border: \"1px solid var(--border)\",\r\n                borderRadius: \"10px\",\r\n                maxHeight: \"180px\",\r\n                overflowY: \"auto\",\r\n                marginBottom: \"8px\"\r\n              }}>\r\n                {filteredInstruments.map((inst, idx) => {\r\n                  const isUserInst = inst === userInstrument;\r\n                  return (\r\n                    <button\r\n                      key={inst}\r\n                      onClick={() => handleSelectInstrument(inst)}\r\n                      style={{\r\n                        width: \"100%\",\r\n                        padding: \"10px 14px\",\r\n                        background: \"transparent\",\r\n                        border: \"none\",\r\n                        borderBottom: idx < filteredInstruments.length - 1 ? \"1px solid var(--border)\" : \"none\",\r\n                        color: isUserInst ? \"var(--accent)\" : \"var(--text-primary)\",\r\n                        fontFamily: \"var(--font-sans)\",\r\n                        fontSize: \"13px\",\r\n                        fontWeight: isUserInst ? \"600\" : \"500\",\r\n                        cursor: \"pointer\",\r\n                        display: \"flex\",\r\n                        alignItems: \"center\",\r\n                        justifyContent: \"space-between\",\r\n                        textAlign: \"left\"\r\n                      }}\r\n                    >\r\n                      <span>{inst}</span>\r\n                      {isUserInst && (\r\n                        <span style={{\r\n                          fontSize: \"9px\",\r\n                          background: \"rgba(212,175,55,0.2)\",\r\n                          color: \"var(--accent)\",\r\n                          padding: \"2px 6px\",\r\n                          borderRadius: \"4px\",\r\n                          fontWeight: \"700\"\r\n                        }}>MEU</span>\r\n                      )}\r\n                    </button>\r\n                  );\r\n                })}\r\n              </div>\r\n\r\n              {/* Botao voltar */}\r\n              <button\r\n                onClick={() => setShowInstrumentPicker(false)}\r\n                style={{\r\n                  width: \"100%\",\r\n                  padding: \"10px\",\r\n                  borderRadius: \"8px\",\r\n                  background: \"transparent\",\r\n                  border: \"1px solid var(--border)\",\r\n                  color: \"var(--text-muted)\",\r\n                  fontFamily: \"var(--font-sans)\",\r\n                  fontSize: \"12px\",\r\n                  fontWeight: \"600\",\r\n                  cursor: \"pointer\",\r\n                  marginBottom: \"14px\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                  gap: \"6px\"\r\n                }}\r\n              >\r\n                <div style={{ width: \"14px\", height: \"14px\", transform: \"rotate(90deg)\" }}>\r\n                  <Icons.ChevronDown />\r\n                </div>\r\n                Voltar\r\n              </button>\r\n            </>\r\n          )}\r\n\r\n          {/* Estado 4: Usuario nao tem instrumento definido - mostrar lista direto */}\r\n          {!showInstrumentPicker && !selectedInstrument && !userInstrument && (\r\n            <div style={{\r\n              background: \"var(--bg-secondary)\",\r\n              border: \"1px solid var(--border)\",\r\n              borderRadius: \"10px\",\r\n              maxHeight: \"180px\",\r\n              overflowY: \"auto\",\r\n              marginBottom: \"14px\"\r\n            }}>\r\n              {filteredInstruments.map((inst, idx) => (\r\n                <button\r\n                  key={inst}\r\n                  onClick={() => handleSelectInstrument(inst)}\r\n                  style={{\r\n                    width: \"100%\",\r\n                    padding: \"10px 14px\",\r\n                    background: \"transparent\",\r\n                    border: \"none\",\r\n                    borderBottom: idx < filteredInstruments.length - 1 ? \"1px solid var(--border)\" : \"none\",\r\n                    color: \"var(--text-primary)\",\r\n                    fontFamily: \"var(--font-sans)\",\r\n                    fontSize: \"13px\",\r\n                    fontWeight: \"500\",\r\n                    cursor: \"pointer\",\r\n                    textAlign: \"left\"\r\n                  }}\r\n                >\r\n                  {inst}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          {/* Secao: Partituras (so aparece quando tem instrumento selecionado e picker fechado) */}\r\n          {selectedInstrument && !showInstrumentPicker && (\r\n            <>\r\n              <div style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"space-between\",\r\n                marginBottom: \"8px\"\r\n              }}>\r\n                <p style={{\r\n                  fontSize: \"10px\",\r\n                  color: \"var(--text-muted)\",\r\n                  margin: 0,\r\n                  fontFamily: \"var(--font-sans)\",\r\n                  textTransform: \"uppercase\",\r\n                  letterSpacing: \"0.5px\",\r\n                  fontWeight: \"600\"\r\n                }}>Partituras ({selectedIds.size}/{sheets.length})</p>\r\n                <button\r\n                  onClick={allSelected ? deselectAll : selectAll}\r\n                  style={{\r\n                    padding: \"4px 8px\",\r\n                    borderRadius: \"4px\",\r\n                    background: \"transparent\",\r\n                    border: \"none\",\r\n                    color: \"var(--accent)\",\r\n                    fontSize: \"11px\",\r\n                    fontWeight: \"600\",\r\n                    cursor: \"pointer\",\r\n                    fontFamily: \"var(--font-sans)\"\r\n                  }}\r\n                >\r\n                  {allSelected ? \"Desmarcar\" : \"Todas\"}\r\n                </button>\r\n              </div>\r\n\r\n              <div style={{\r\n                background: \"var(--bg-secondary)\",\r\n                border: \"1px solid var(--border)\",\r\n                borderRadius: \"10px\",\r\n                maxHeight: \"150px\",\r\n                overflowY: \"auto\",\r\n                marginBottom: \"16px\"\r\n              }}>\r\n                {sheets.map((sheet, idx) => {\r\n                  const isSelected = selectedIds.has(sheet.id);\r\n                  return (\r\n                    <button\r\n                      key={sheet.id}\r\n                      onClick={() => toggleSelection(sheet.id)}\r\n                      style={{\r\n                        width: \"100%\",\r\n                        padding: \"10px 14px\",\r\n                        background: \"transparent\",\r\n                        border: \"none\",\r\n                        borderBottom: idx < sheets.length - 1 ? \"1px solid var(--border)\" : \"none\",\r\n                        color: \"var(--text-primary)\",\r\n                        fontFamily: \"var(--font-sans)\",\r\n                        fontSize: \"13px\",\r\n                        cursor: \"pointer\",\r\n                        display: \"flex\",\r\n                        alignItems: \"center\",\r\n                        gap: \"10px\",\r\n                        textAlign: \"left\"\r\n                      }}\r\n                    >\r\n                      {/* Checkbox */}\r\n                      <div style={{\r\n                        width: \"18px\",\r\n                        height: \"18px\",\r\n                        borderRadius: \"4px\",\r\n                        border: `2px solid ${isSelected ? \"#D4AF37\" : \"rgba(255,255,255,0.3)\"}`,\r\n                        background: isSelected ? \"#D4AF37\" : \"transparent\",\r\n                        display: \"flex\",\r\n                        alignItems: \"center\",\r\n                        justifyContent: \"center\",\r\n                        flexShrink: 0\r\n                      }}>\r\n                        {isSelected && (\r\n                          <div style={{ width: \"10px\", height: \"10px\", color: \"#fff\" }}>\r\n                            <Icons.Check />\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                      <span style={{\r\n                        flex: 1,\r\n                        whiteSpace: \"nowrap\",\r\n                        overflow: \"hidden\",\r\n                        textOverflow: \"ellipsis\",\r\n                        fontWeight: \"500\"\r\n                      }}>\r\n                        {idx + 1}. {sheet.title}\r\n                      </span>\r\n                    </button>\r\n                  );\r\n                })}\r\n              </div>\r\n\r\n              {/* Botoes de download */}\r\n              <div style={{ display: \"flex\", gap: \"8px\", flexWrap: \"wrap\" }}>\r\n                <button\r\n                  onClick={() => handleDownload(\"pdf\")}\r\n                  disabled={selectedIds.size === 0 || downloading}\r\n                  style={{\r\n                    flex: \"1 1 45%\",\r\n                    padding: \"12px\",\r\n                    borderRadius: \"10px\",\r\n                    background: selectedIds.size > 0 ? \"linear-gradient(135deg, #D4AF37 0%, #B8860B 100%)\" : \"var(--bg-secondary)\",\r\n                    color: selectedIds.size > 0 ? \"#fff\" : \"var(--text-muted)\",\r\n                    border: \"none\",\r\n                    fontSize: \"13px\",\r\n                    fontWeight: \"700\",\r\n                    cursor: selectedIds.size > 0 ? \"pointer\" : \"not-allowed\",\r\n                    fontFamily: \"var(--font-sans)\",\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    justifyContent: \"center\",\r\n                    gap: \"6px\",\r\n                    boxShadow: selectedIds.size > 0 ? \"0 4px 12px rgba(212, 175, 55, 0.3)\" : \"none\"\r\n                  }}\r\n                >\r\n                  {downloading ? (\r\n                    <div style={{\r\n                      width: \"16px\",\r\n                      height: \"16px\",\r\n                      border: \"2px solid rgba(255,255,255,0.3)\",\r\n                      borderTopColor: \"#fff\",\r\n                      borderRadius: \"50%\",\r\n                      animation: \"spin 1s linear infinite\"\r\n                    }} />\r\n                  ) : (\r\n                    <div style={{ width: \"16px\", height: \"16px\" }}><Icons.File /></div>\r\n                  )}\r\n                  PDF\r\n                </button>\r\n\r\n                <button\r\n                  onClick={() => handleDownload(\"zip\")}\r\n                  disabled={selectedIds.size === 0 || downloading}\r\n                  style={{\r\n                    flex: \"1 1 45%\",\r\n                    padding: \"12px\",\r\n                    borderRadius: \"10px\",\r\n                    background: selectedIds.size > 0 ? \"#9b59b6\" : \"var(--bg-secondary)\",\r\n                    color: selectedIds.size > 0 ? \"#fff\" : \"var(--text-muted)\",\r\n                    border: \"none\",\r\n                    fontSize: \"13px\",\r\n                    fontWeight: \"700\",\r\n                    cursor: selectedIds.size > 0 ? \"pointer\" : \"not-allowed\",\r\n                    fontFamily: \"var(--font-sans)\",\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    justifyContent: \"center\",\r\n                    gap: \"6px\",\r\n                    boxShadow: selectedIds.size > 0 ? \"0 4px 12px rgba(155, 89, 182, 0.3)\" : \"none\"\r\n                  }}\r\n                >\r\n                  <div style={{ width: \"16px\", height: \"16px\" }}><Icons.Archive /></div>\r\n                  ZIP\r\n                </button>\r\n\r\n                <button\r\n                  onClick={() => handleDownload(\"print\")}\r\n                  disabled={selectedIds.size === 0 || downloading}\r\n                  style={{\r\n                    flex: \"1 1 100%\",\r\n                    padding: \"12px\",\r\n                    borderRadius: \"10px\",\r\n                    background: selectedIds.size > 0 ? \"#3498db\" : \"var(--bg-secondary)\",\r\n                    color: selectedIds.size > 0 ? \"#fff\" : \"var(--text-muted)\",\r\n                    border: \"none\",\r\n                    fontSize: \"13px\",\r\n                    fontWeight: \"700\",\r\n                    cursor: selectedIds.size > 0 ? \"pointer\" : \"not-allowed\",\r\n                    fontFamily: \"var(--font-sans)\",\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    justifyContent: \"center\",\r\n                    gap: \"6px\",\r\n                    boxShadow: selectedIds.size > 0 ? \"0 4px 12px rgba(52, 152, 219, 0.3)\" : \"none\"\r\n                  }}\r\n                >\r\n                  <div style={{ width: \"16px\", height: \"16px\" }}><Icons.Printer /></div>\r\n                  Imprimir Tudo\r\n                </button>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <style>{`\r\n        @keyframes spin {\r\n          to { transform: rotate(360deg); }\r\n        }\r\n      `}</style>\r\n    </>\r\n  );\r\n};\r\n\r\n// ============ COMPONENTE PRINCIPAL ============\r\nexport default function RepertorioPage() {\r\n  const { user } = useAuth();\r\n  const { showToast, setSelectedSheet } = useUI();\r\n  const { favorites, toggleFavorite, categoriesMap } = useData();\r\n\r\n  const [repertorio, setRepertorio] = useState<Repertorio | null>(null);\r\n  const [repertorioInstrumentos, setRepertorioInstrumentos] = useState<string[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [downloading, setDownloading] = useState(false);\r\n  const [showDownloadModal, setShowDownloadModal] = useState(false);\r\n\r\n  // Carregar repertorio ativo (instrumentos sao prefetched em background)\r\n  const loadRepertorio = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const data = await API.getRepertorioAtivo();\r\n      setRepertorio(data);\r\n      setLoading(false);\r\n\r\n      // Prefetch instrumentos em background (non-blocking)\r\n      if (data?.id) {\r\n        API.getRepertorioInstrumentos(data.id)\r\n          .then((instrumentos: string[]) => setRepertorioInstrumentos(instrumentos))\r\n          .catch((err: unknown) => console.error(\"Prefetch instrumentos falhou:\", err));\r\n      }\r\n    } catch (err: unknown) {\r\n      const message = err instanceof Error ? err.message : \"Erro ao carregar repertório\";\r\n      console.error(\"Erro ao carregar repertorio:\", err);\r\n      showToast(message, \"error\");\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Recarregar instrumentos quando o modal abre (para refletir mudancas feitas no admin)\r\n  const reloadInstrumentos = async () => {\r\n    if (repertorio?.id) {\r\n      try {\r\n        const instrumentos = await API.getRepertorioInstrumentos(repertorio.id);\r\n        setRepertorioInstrumentos(instrumentos);\r\n      } catch (err: unknown) {\r\n        console.error(\"Erro ao recarregar instrumentos:\", err);\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadRepertorio();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  // Recarrega instrumentos sempre que o modal abre\r\n  useEffect(() => {\r\n    if (showDownloadModal) {\r\n      reloadInstrumentos();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [showDownloadModal]);\r\n\r\n  // Handler de download\r\n  const handleDownload = async (formato: string, instrumento: string, partituraIds: number[]) => {\r\n    if (!repertorio || !instrumento) return;\r\n\r\n    setDownloading(true);\r\n    const isPrint = formato === \"print\";\r\n\r\n    try {\r\n      const url = API.getRepertorioDownloadUrl(\r\n        repertorio.id,\r\n        instrumento,\r\n        isPrint ? \"pdf\" : formato,\r\n        partituraIds\r\n      );\r\n\r\n      const response = await fetch(url, {\r\n        headers: { \"Authorization\": `Bearer ${Storage.get<string>(\"authToken\", \"\")}` }\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const error = await response.json().catch(() => ({}));\r\n        throw new Error((error as { error?: string }).error || \"Erro no download\");\r\n      }\r\n\r\n      const blob = await response.blob();\r\n      const blobUrl = URL.createObjectURL(blob);\r\n\r\n      if (isPrint) {\r\n        // Abrir em nova janela para impressao\r\n        const printWindow = window.open(blobUrl, \"_blank\");\r\n        if (printWindow) {\r\n          printWindow.onload = () => {\r\n            printWindow.print();\r\n            URL.revokeObjectURL(blobUrl);\r\n          };\r\n        } else {\r\n          URL.revokeObjectURL(blobUrl);\r\n        }\r\n        showToast(\"Abrindo impressão...\");\r\n      } else {\r\n        // Download normal\r\n        const contentDisposition = response.headers.get(\"Content-Disposition\");\r\n        const filename = contentDisposition?.match(/filename=\"(.+)\"/)?.[1]\r\n          || `Repertorio_${repertorio.nome}.${formato === \"zip\" ? \"zip\" : \"pdf\"}`;\r\n\r\n        const link = document.createElement(\"a\");\r\n        link.href = blobUrl;\r\n        link.download = filename;\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n        URL.revokeObjectURL(blobUrl);\r\n        showToast(\"Download iniciado!\");\r\n      }\r\n\r\n      setShowDownloadModal(false);\r\n    } catch (err: unknown) {\r\n      const message = err instanceof Error ? err.message : \"Erro no download\";\r\n      console.error(\"Erro no download:\", err);\r\n      showToast(message, \"error\");\r\n    }\r\n\r\n    setDownloading(false);\r\n  };\r\n\r\n  // Handler para remover do repertorio (admin)\r\n  const handleRemoveFromRepertorio = async (partituraId: number) => {\r\n    if (!user?.is_admin || !repertorio) return;\r\n\r\n    try {\r\n      await API.removePartituraFromRepertorio(repertorio.id, partituraId);\r\n      showToast(\"Partitura removida do repertório\");\r\n      loadRepertorio();\r\n    } catch (err: unknown) {\r\n      const message = err instanceof Error ? err.message : \"Erro ao remover\";\r\n      showToast(message, \"error\");\r\n    }\r\n  };\r\n\r\n  // Converter partituras para formato simplificado\r\n  const sheets = useMemo((): SimplifiedSheet[] => {\r\n    if (!repertorio?.partituras) return [];\r\n    return repertorio.partituras.map(p => ({\r\n      id: p.id,\r\n      title: p.titulo,\r\n      composer: p.compositor,\r\n      category: p.categoria_id\r\n    }));\r\n  }, [repertorio]);\r\n\r\n  if (loading) {\r\n    return <RepertorioSkeleton />;\r\n  }\r\n\r\n  if (!repertorio) {\r\n    return (\r\n      <div>\r\n        <Header title=\"Repertório\" subtitle=\"Próxima apresentação\" />\r\n        <EmptyState\r\n          icon={Icons.ListMusic}\r\n          title=\"Nenhum repertório definido\"\r\n          subtitle=\"O regente ainda não definiu o repertório da próxima apresentação\"\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Header\r\n        title={repertorio.nome}\r\n        subtitle={`${repertorio.partituras?.length || 0} música${(repertorio.partituras?.length || 0) !== 1 ? \"s\" : \"\"}`}\r\n      />\r\n\r\n      {/* Acoes */}\r\n      <div style={{ padding: \"0 16px\", marginBottom: \"16px\" }}>\r\n        {/* Data da apresentacao */}\r\n        {repertorio.data_apresentacao && (\r\n          <p style={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            gap: \"8px\",\r\n            fontSize: \"14px\",\r\n            color: \"var(--text-muted)\",\r\n            margin: \"0 0 12px 0\"\r\n          }}>\r\n            <span style={{ width: \"16px\", height: \"16px\" }}><Icons.Calendar /></span>\r\n            {new Date(repertorio.data_apresentacao).toLocaleDateString(\"pt-BR\")}\r\n          </p>\r\n        )}\r\n\r\n        {/* Botao centralizado */}\r\n        <div style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n          <button\r\n            onClick={() => setShowDownloadModal(true)}\r\n            disabled={!repertorio.partituras?.length}\r\n            style={{\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              gap: \"8px\",\r\n              padding: \"12px 24px\",\r\n              borderRadius: \"12px\",\r\n              background: \"linear-gradient(135deg, #D4AF37 0%, #B8860B 100%)\",\r\n              color: \"#fff\",\r\n              border: \"none\",\r\n              fontSize: \"14px\",\r\n              fontWeight: \"700\",\r\n              cursor: \"pointer\",\r\n              opacity: repertorio.partituras?.length ? 1 : 0.5,\r\n              boxShadow: \"0 4px 12px rgba(212, 175, 55, 0.3)\"\r\n            }}\r\n          >\r\n            <div style={{ width: \"18px\", height: \"18px\" }}><Icons.Archive /></div>\r\n            Baixar Tudo\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Lista de partituras */}\r\n      {sheets.length === 0 ? (\r\n        <EmptyState\r\n          icon={Icons.Music}\r\n          title=\"Repertório vazio\"\r\n          subtitle=\"Nenhuma partitura adicionada ainda\"\r\n        />\r\n      ) : (\r\n        <div style={{ padding: \"0 16px\", display: \"flex\", flexDirection: \"column\", gap: \"8px\" }}>\r\n          {sheets.map((sheet, index) => {\r\n            const category = categoriesMap.get(sheet.category);\r\n            return (\r\n              <motion.div\r\n                key={sheet.id}\r\n                initial={{ opacity: 0, y: 12 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{\r\n                  delay: index * 0.04,\r\n                  duration: 0.3,\r\n                  ease: [0.25, 0.1, 0.25, 1]\r\n                }}\r\n                whileTap={{ scale: 0.98 }}\r\n                onClick={() => setSelectedSheet(sheet)}\r\n                style={{\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  gap: \"12px\",\r\n                  padding: \"12px 16px\",\r\n                  background: \"var(--bg-secondary)\",\r\n                  borderRadius: \"12px\",\r\n                  cursor: \"pointer\",\r\n                  border: \"1px solid transparent\"\r\n                }}\r\n              >\r\n                {/* Numero da ordem */}\r\n                <div style={{\r\n                  width: \"28px\",\r\n                  height: \"28px\",\r\n                  borderRadius: \"50%\",\r\n                  background: \"linear-gradient(135deg, #D4AF37 0%, #B8860B 100%)\",\r\n                  color: \"#fff\",\r\n                  fontSize: \"13px\",\r\n                  fontWeight: \"700\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                  flexShrink: 0\r\n                }}>\r\n                  {index + 1}\r\n                </div>\r\n\r\n                {/* Titulo, compositor e tag de categoria */}\r\n                <div style={{ flex: 1, minWidth: 0 }}>\r\n                  <div style={{ display: \"flex\", alignItems: \"center\", gap: \"8px\", marginBottom: \"2px\" }}>\r\n                    <p style={{\r\n                      fontSize: \"14px\",\r\n                      fontWeight: \"600\",\r\n                      color: \"var(--text-primary)\",\r\n                      margin: 0,\r\n                      whiteSpace: \"nowrap\",\r\n                      overflow: \"hidden\",\r\n                      textOverflow: \"ellipsis\"\r\n                    }}>\r\n                      {sheet.title}\r\n                    </p>\r\n                    {category && (\r\n                      <span style={{\r\n                        fontSize: \"10px\",\r\n                        fontWeight: \"600\",\r\n                        padding: \"2px 6px\",\r\n                        borderRadius: \"4px\",\r\n                        background: \"rgba(212, 175, 55, 0.15)\",\r\n                        color: \"var(--accent)\",\r\n                        whiteSpace: \"nowrap\",\r\n                        flexShrink: 0\r\n                      }}>\r\n                        {category.name}\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                  {sheet.composer && (\r\n                    <p style={{\r\n                      fontSize: \"12px\",\r\n                      color: \"var(--text-muted)\",\r\n                      margin: 0,\r\n                      whiteSpace: \"nowrap\",\r\n                      overflow: \"hidden\",\r\n                      textOverflow: \"ellipsis\"\r\n                    }}>\r\n                      {sheet.composer}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Acoes */}\r\n                <div style={{ display: \"flex\", alignItems: \"center\", gap: \"8px\" }}>\r\n                  <button\r\n                    onClick={(e) => { e.stopPropagation(); toggleFavorite(String(sheet.id)); }}\r\n                    style={{\r\n                      width: \"32px\",\r\n                      height: \"32px\",\r\n                      borderRadius: \"8px\",\r\n                      background: \"transparent\",\r\n                      border: \"none\",\r\n                      color: favorites.includes(String(sheet.id)) ? \"#e74c3c\" : \"var(--text-muted)\",\r\n                      cursor: \"pointer\",\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      justifyContent: \"center\"\r\n                    }}\r\n                  >\r\n                    <div style={{ width: \"18px\", height: \"18px\" }}>\r\n                      <Icons.Heart filled={favorites.includes(String(sheet.id))} />\r\n                    </div>\r\n                  </button>\r\n\r\n                  {user?.is_admin && (\r\n                    <button\r\n                      onClick={(e) => { e.stopPropagation(); handleRemoveFromRepertorio(sheet.id); }}\r\n                      title=\"Remover do repertório\"\r\n                      style={{\r\n                        width: \"32px\",\r\n                        height: \"32px\",\r\n                        borderRadius: \"8px\",\r\n                        background: \"rgba(231, 76, 60, 0.1)\",\r\n                        border: \"none\",\r\n                        color: \"#e74c3c\",\r\n                        cursor: \"pointer\",\r\n                        display: \"flex\",\r\n                        alignItems: \"center\",\r\n                        justifyContent: \"center\"\r\n                      }}\r\n                    >\r\n                      <div style={{ width: \"16px\", height: \"16px\" }}>\r\n                        <Icons.Close />\r\n                      </div>\r\n                    </button>\r\n                  )}\r\n                </div>\r\n              </motion.div>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n\r\n      {/* Modal de Download - conditionally rendered so state resets on each open */}\r\n      {showDownloadModal && (\r\n        <DownloadModal\r\n          isOpen={showDownloadModal}\r\n          onClose={() => setShowDownloadModal(false)}\r\n          sheets={sheets}\r\n          instruments={repertorioInstrumentos}\r\n          userInstrument={user?.instrumento}\r\n          downloading={downloading}\r\n          onDownload={handleDownload}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}