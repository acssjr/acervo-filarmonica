{"version":3,"sources":["../../../../../frontend-next/src/components/modals/ImportacaoLoteModal.tsx","../../../../../frontend-next/src/utils/batchParser.ts","../../../../../frontend-next/src/utils/uploadBatch.ts"],"sourcesContent":["\"use client\";\r\n\r\n// ===== IMPORTACAO LOTE MODAL =====\r\n// Modal fullscreen para importacao massiva de partituras\r\n// Estados: SELECTION -> ANALYZING -> FEEDBACK -> REVIEW -> UPLOADING -> COMPLETE\r\n\r\nimport { useState, useEffect, useCallback, useRef, type DragEvent, type ChangeEvent } from \"react\";\r\nimport { useUI } from \"@contexts/UIContext\";\r\nimport { API } from \"@lib/api\";\r\n\r\nimport { processarLote, processarFileList, filtrarPorStatus, calcularResultado } from \"@utils/batchParser\";\r\nimport { uploadLote, estimarTempo, gerarResumo } from \"@utils/uploadBatch\";\r\n\r\n// Estados do modal\r\nconst STATES = {\r\n  SELECTION: \"selection\",\r\n  ANALYZING: \"analyzing\",\r\n  FEEDBACK: \"feedback\",\r\n  REVIEW: \"review\",\r\n  UPLOADING: \"uploading\",\r\n  COMPLETE: \"complete\",\r\n} as const;\r\n\r\ntype ModalState = (typeof STATES)[keyof typeof STATES];\r\n\r\n// Tabs de revisao\r\nconst TABS = {\r\n  ALL: \"all\",\r\n  READY: \"ready\",\r\n  ATTENTION: \"attention\",\r\n  PROBLEM: \"problem\",\r\n} as const;\r\n\r\ntype TabKey = (typeof TABS)[keyof typeof TABS];\r\n\r\ninterface Arquivo {\r\n  reconhecido: boolean;\r\n  instrumento: string;\r\n}\r\n\r\ninterface Pasta {\r\n  id: string;\r\n  titulo: string;\r\n  nomePasta?: string;\r\n  compositor: string;\r\n  arranjador: string;\r\n  categoria: string;\r\n  status: \"ready\" | \"attention\" | \"problem\";\r\n  statusMotivo: string | null;\r\n  selecionada: boolean;\r\n  duplicada?: boolean;\r\n  arquivos: Arquivo[];\r\n}\r\n\r\ninterface Estatisticas {\r\n  total: number;\r\n  prontas: number;\r\n}\r\n\r\ninterface AnalyzeProgress {\r\n  processadas: number;\r\n  total: number;\r\n  percentual: number;\r\n}\r\n\r\ninterface UploadProgress {\r\n  processadas: number;\r\n  total: number;\r\n  percentual: number;\r\n  pastaAtual: string;\r\n}\r\n\r\ninterface UploadResultados {\r\n  resultados: Array<{ success: boolean; titulo: string; error?: string }>;\r\n  estatisticas: { sucesso: number; erro: number };\r\n}\r\n\r\ninterface Categoria {\r\n  id: string;\r\n  nome: string;\r\n}\r\n\r\ninterface ImportacaoLoteModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSuccess?: () => void;\r\n  onOpenUploadPasta?: (pasta: Pasta) => void;\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  initialEntries?: any[] | null;\r\n}\r\n\r\nconst ImportacaoLoteModal = ({\r\n  isOpen,\r\n  onClose,\r\n  onSuccess,\r\n  onOpenUploadPasta,\r\n  initialEntries,\r\n}: ImportacaoLoteModalProps) => {\r\n  const { showToast } = useUI();\r\n\r\n  // Estado principal\r\n  const [modalState, setModalState] = useState<ModalState>(STATES.SELECTION);\r\n  const [categorias, setCategorias] = useState<Categoria[]>([]);\r\n\r\n  // Dados de analise\r\n  const [pastas, setPastas] = useState<Pasta[]>([]);\r\n  const [estatisticas, setEstatisticas] = useState<Estatisticas | null>(null);\r\n  const [analyzeProgress, setAnalyzeProgress] = useState<AnalyzeProgress>({\r\n    processadas: 0,\r\n    total: 0,\r\n    percentual: 0,\r\n  });\r\n  const [partiturasExistentes, setPartiturasExistentes] = useState<unknown[]>([]);\r\n\r\n  // Revisao\r\n  const [activeTab, setActiveTab] = useState<TabKey>(TABS.ALL);\r\n  const [pastaExpandida, setPastaExpandida] = useState<string | null>(null);\r\n\r\n  // Upload\r\n  const [uploadProgress, setUploadProgress] = useState<UploadProgress>({\r\n    processadas: 0,\r\n    total: 0,\r\n    percentual: 0,\r\n    pastaAtual: \"\",\r\n  });\r\n  const [uploadResultados, setUploadResultados] = useState<UploadResultados | null>(null);\r\n  const [funnyPhraseIndex, setFunnyPhraseIndex] = useState(0);\r\n\r\n  // Frases engraçadas para mostrar durante o upload\r\n  const funnyPhrases = [\r\n    \"Adicionando os últimos detalhes...\",\r\n    \"Refinando a visualização das partituras...\",\r\n    \"Escrevendo o próximo Dobrado Tusca...\",\r\n    \"Removendo o Dobrado Ludgero da próxima apresentação...\",\r\n    \"Ratando a primeira nota de Preta Pretinha...\",\r\n    \"Esperando João Viana voltar do banheiro...\",\r\n    \"Deixando Julielson menos durinho no pandeiro...\",\r\n    \"Afinando os pistões virtuais...\",\r\n    \"Procurando a partitura perdida do saxofone...\",\r\n    \"Ajustando o compasso que ninguém acerta...\",\r\n    \"Adicionando mais uma fermata só de sacanagem...\",\r\n    \"Verificando se o bombardino está acordado...\",\r\n    \"Calibrando o volume da tuba...\",\r\n    \"Inserindo pausas estratégicas para o café...\",\r\n    \"Convencendo o maestro que está tudo certo...\",\r\n    \"Organizando as estantes de partitura...\",\r\n  ];\r\n\r\n  // UI\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const feedbackTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\r\n\r\n  // Handler para abrir o seletor de pasta\r\n  const handleClickToSelect = () => {\r\n    const input = document.getElementById(\"batch-folder-input\") as HTMLInputElement | null;\r\n    if (input) {\r\n      input.value = \"\";\r\n      input.click();\r\n    }\r\n  };\r\n\r\n  // Carrega categorias e partituras existentes\r\n  useEffect(() => {\r\n    const loadData = async () => {\r\n      try {\r\n        const [cats, partituras] = await Promise.all([API.getCategorias(), API.getPartituras()]);\r\n        setCategorias(cats || []);\r\n        setPartiturasExistentes(partituras || []);\r\n      } catch {\r\n        // silently fail\r\n      }\r\n    };\r\n    if (isOpen) loadData();\r\n  }, [isOpen]);\r\n\r\n  // Reset ao fechar\r\n  useEffect(() => {\r\n    if (!isOpen) {\r\n      if (feedbackTimeoutRef.current !== null) {\r\n        clearTimeout(feedbackTimeoutRef.current);\r\n        feedbackTimeoutRef.current = null;\r\n      }\r\n      setModalState(STATES.SELECTION);\r\n      setPastas([]);\r\n      setEstatisticas(null);\r\n      setAnalyzeProgress({ processadas: 0, total: 0, percentual: 0 });\r\n      setActiveTab(TABS.ALL);\r\n      setPastaExpandida(null);\r\n      setUploadProgress({ processadas: 0, total: 0, percentual: 0, pastaAtual: \"\" });\r\n      setUploadResultados(null);\r\n      setFunnyPhraseIndex(0);\r\n    }\r\n  }, [isOpen]);\r\n\r\n  // Alterna frases engracadas durante upload\r\n  useEffect(() => {\r\n    if (modalState === STATES.UPLOADING) {\r\n      const interval = setInterval(() => {\r\n        setFunnyPhraseIndex((prev) => (prev + 1) % funnyPhrases.length);\r\n      }, 2500);\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [modalState, funnyPhrases.length]);\r\n\r\n  // Processa items pre-carregados (drag & drop global)\r\n  useEffect(() => {\r\n    const processInitialItems = async () => {\r\n      if (!isOpen || !initialEntries || initialEntries.length === 0 || categorias.length === 0) return;\r\n      if (modalState !== STATES.SELECTION) return;\r\n\r\n      setModalState(STATES.ANALYZING);\r\n\r\n      try {\r\n        const { pastas: pastasAnalisadas, estatisticas: stats } = await processarLote(\r\n          initialEntries,\r\n          categorias,\r\n          partiturasExistentes,\r\n          setAnalyzeProgress\r\n        );\r\n\r\n        if (pastasAnalisadas.length === 0) {\r\n          showToast(\"Nenhuma pasta com PDFs encontrada\", \"error\");\r\n          setModalState(STATES.SELECTION);\r\n          return;\r\n        }\r\n\r\n        setPastas(pastasAnalisadas);\r\n        setEstatisticas(stats);\r\n\r\n        setModalState(STATES.FEEDBACK);\r\n        feedbackTimeoutRef.current = setTimeout(() => {\r\n          feedbackTimeoutRef.current = null;\r\n          setModalState(STATES.REVIEW);\r\n        }, 2500);\r\n      } catch (err) {\r\n        console.error(\"Erro na analise:\", err);\r\n        showToast(\"Erro ao analisar pastas\", \"error\");\r\n        setModalState(STATES.SELECTION);\r\n      }\r\n    };\r\n\r\n    processInitialItems();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isOpen, initialEntries, categorias, partiturasExistentes]);\r\n\r\n  // Handlers de Drag & Drop\r\n  const handleDragEnter = (e: DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsDragging(true);\r\n  };\r\n\r\n  const handleDragLeave = (e: DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (!e.currentTarget.contains(e.relatedTarget as Node)) {\r\n      setIsDragging(false);\r\n    }\r\n  };\r\n\r\n  const handleDragOver = (e: DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  };\r\n\r\n  const handleDrop = async (e: DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsDragging(false);\r\n\r\n    const items = e.dataTransfer.items;\r\n    if (!items || items.length === 0) return;\r\n\r\n    setModalState(STATES.ANALYZING);\r\n\r\n    try {\r\n      const { pastas: pastasAnalisadas, estatisticas: stats } = await processarLote(\r\n        items,\r\n        categorias,\r\n        partiturasExistentes,\r\n        setAnalyzeProgress\r\n      );\r\n\r\n      if (pastasAnalisadas.length === 0) {\r\n        showToast(\"Nenhuma pasta com PDFs encontrada\", \"error\");\r\n        setModalState(STATES.SELECTION);\r\n        return;\r\n      }\r\n\r\n      setPastas(pastasAnalisadas);\r\n      setEstatisticas(stats);\r\n\r\n      setModalState(STATES.FEEDBACK);\r\n      setTimeout(() => {\r\n        setModalState(STATES.REVIEW);\r\n      }, 2500);\r\n    } catch (err) {\r\n      console.error(\"Erro na analise:\", err);\r\n      showToast(\"Erro ao analisar pastas\", \"error\");\r\n      setModalState(STATES.SELECTION);\r\n    }\r\n  };\r\n\r\n  // Handler de input file (fallback)\r\n  const handleFileSelect = async (e: ChangeEvent<HTMLInputElement>) => {\r\n    const fileList = e.target.files;\r\n    if (!fileList || fileList.length === 0) return;\r\n\r\n    setModalState(STATES.ANALYZING);\r\n\r\n    try {\r\n      const { pastas: pastasAnalisadas, estatisticas: stats } = await processarFileList(\r\n        fileList,\r\n        categorias,\r\n        partiturasExistentes,\r\n        setAnalyzeProgress\r\n      );\r\n\r\n      if (pastasAnalisadas.length === 0) {\r\n        showToast(\"Nenhuma pasta com PDFs encontrada\", \"error\");\r\n        setModalState(STATES.SELECTION);\r\n        return;\r\n      }\r\n\r\n      setPastas(pastasAnalisadas);\r\n      setEstatisticas(stats);\r\n\r\n      setModalState(STATES.FEEDBACK);\r\n      setTimeout(() => {\r\n        setModalState(STATES.REVIEW);\r\n      }, 2500);\r\n    } catch (err) {\r\n      console.error(\"Erro na analise:\", err);\r\n      showToast(\"Erro ao analisar pastas\", \"error\");\r\n      setModalState(STATES.SELECTION);\r\n    }\r\n  };\r\n\r\n  // Toggle selecao de pasta\r\n  const togglePastaSelecionada = useCallback((pastaId: string) => {\r\n    setPastas((prev) => prev.map((p) => (p.id === pastaId ? { ...p, selecionada: !p.selecionada } : p)));\r\n  }, []);\r\n\r\n  // Selecionar/deselecionar todas\r\n  const toggleTodas = useCallback((selecionar: boolean) => {\r\n    setPastas((prev) => prev.map((p) => ({ ...p, selecionada: selecionar })));\r\n  }, []);\r\n\r\n  // Editar categoria de uma pasta\r\n  const editarCategoria = useCallback((pastaId: string, novaCategoria: string) => {\r\n    setPastas((prev) =>\r\n      prev.map((p) => {\r\n        if (p.id !== pastaId) return p;\r\n\r\n        const atualizada = { ...p, categoria: novaCategoria };\r\n\r\n        if (novaCategoria && p.status === \"attention\" && p.statusMotivo === \"Categoria nao detectada\") {\r\n          atualizada.status = \"ready\";\r\n          atualizada.statusMotivo = null;\r\n        }\r\n\r\n        return atualizada;\r\n      })\r\n    );\r\n  }, []);\r\n\r\n  // Editar titulo de uma pasta\r\n  const editarTitulo = useCallback((pastaId: string, novoTitulo: string) => {\r\n    setPastas((prev) => prev.map((p) => (p.id === pastaId ? { ...p, titulo: novoTitulo } : p)));\r\n  }, []);\r\n\r\n  // Editar compositor de uma pasta\r\n  const editarCompositor = useCallback((pastaId: string, novoCompositor: string) => {\r\n    setPastas((prev) => prev.map((p) => (p.id === pastaId ? { ...p, compositor: novoCompositor } : p)));\r\n  }, []);\r\n\r\n  // Editar arranjador de uma pasta\r\n  const editarArranjador = useCallback((pastaId: string, novoArranjador: string) => {\r\n    setPastas((prev) => prev.map((p) => (p.id === pastaId ? { ...p, arranjador: novoArranjador } : p)));\r\n  }, []);\r\n\r\n  // Iniciar upload\r\n  const iniciarUpload = async () => {\r\n    const pastasParaUpload = pastas.filter((p) => p.selecionada && p.status !== \"problem\");\r\n\r\n    if (pastasParaUpload.length === 0) {\r\n      showToast(\"Nenhuma partitura selecionada para upload\", \"error\");\r\n      return;\r\n    }\r\n\r\n    setModalState(STATES.UPLOADING);\r\n    setUploadProgress({ processadas: 0, total: pastasParaUpload.length, percentual: 0, pastaAtual: \"\" });\r\n\r\n    try {\r\n      const { resultados, estatisticas: stats } = await uploadLote(pastasParaUpload, {\r\n        onProgress: setUploadProgress,\r\n        onPastaError: ({ pasta, error }: { pasta: Pasta; error: unknown }) => {\r\n          console.error(`Erro no upload de ${pasta.titulo}:`, error);\r\n        },\r\n      });\r\n\r\n      setUploadResultados({ resultados, estatisticas: stats });\r\n      setModalState(STATES.COMPLETE);\r\n\r\n      if (stats.sucesso > 0) {\r\n        onSuccess?.();\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Erro no upload:\", err);\r\n      showToast(\"Erro durante o upload\", \"error\");\r\n      setModalState(STATES.REVIEW);\r\n    }\r\n  };\r\n\r\n  // Abrir pasta com problema no modal individual\r\n  const abrirPastaNoModalIndividual = (pasta: Pasta) => {\r\n    if (onOpenUploadPasta) {\r\n      onOpenUploadPasta(pasta);\r\n      setPastas((prev) => prev.filter((p) => p.id !== pasta.id));\r\n    }\r\n  };\r\n\r\n  // Filtra pastas para exibicao\r\n  const pastasFiltradas: Pasta[] = filtrarPorStatus(pastas, activeTab);\r\n\r\n  // Contadores por status\r\n  const contadores = {\r\n    all: pastas.length,\r\n    ready: pastas.filter((p) => p.status === \"ready\").length,\r\n    attention: pastas.filter((p) => p.status === \"attention\").length,\r\n    problem: pastas.filter((p) => p.status === \"problem\").length,\r\n  };\r\n\r\n  // Pastas selecionadas para upload (exclui problemas)\r\n  const pastasSelecionadas = pastas.filter((p) => p.selecionada && p.status !== \"problem\");\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div\r\n      onClick={onClose}\r\n      style={{\r\n        position: \"fixed\",\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n        background: \"rgba(0,0,0,0.9)\",\r\n        backdropFilter: \"blur(8px)\",\r\n        display: \"flex\",\r\n        alignItems: \"center\",\r\n        justifyContent: \"center\",\r\n        zIndex: 1000,\r\n        padding: \"20px\",\r\n      }}\r\n    >\r\n      <div\r\n        onClick={(e) => e.stopPropagation()}\r\n        style={{\r\n          background: \"var(--bg-card)\",\r\n          borderRadius: \"16px\",\r\n          width: \"100%\",\r\n          maxWidth: modalState === STATES.REVIEW ? \"900px\" : \"600px\",\r\n          maxHeight: \"90vh\",\r\n          display: \"flex\",\r\n          flexDirection: \"column\",\r\n          overflow: \"hidden\",\r\n          fontFamily: \"var(--font-sans)\",\r\n          transition: \"max-width 0.3s ease\",\r\n        }}\r\n      >\r\n        {/* Header */}\r\n        <div\r\n          style={{\r\n            padding: \"24px\",\r\n            borderBottom: \"1px solid var(--border)\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"space-between\",\r\n          }}\r\n        >\r\n          <div>\r\n            <h2\r\n              style={{\r\n                fontSize: \"20px\",\r\n                fontWeight: \"700\",\r\n                color: \"var(--text-primary)\",\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                gap: \"10px\",\r\n                marginBottom: \"4px\",\r\n              }}\r\n            >\r\n              <svg width=\"22\" height=\"22\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#D4AF37\" strokeWidth=\"2\">\r\n                <path d=\"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z\" />\r\n                <path d=\"M12 11v6M9 14h6\" />\r\n              </svg>\r\n              Importacao em Lote\r\n            </h2>\r\n            <p style={{ fontSize: \"14px\", color: \"var(--text-secondary)\" }}>\r\n              {modalState === STATES.SELECTION && \"Arraste uma pasta contendo varias partituras\"}\r\n              {modalState === STATES.ANALYZING && \"Analisando estrutura das pastas...\"}\r\n              {modalState === STATES.FEEDBACK && \"Analise concluida!\"}\r\n              {modalState === STATES.REVIEW &&\r\n                `${contadores.all} partitura${contadores.all !== 1 ? \"s\" : \"\"} detectada${contadores.all !== 1 ? \"s\" : \"\"}`}\r\n              {modalState === STATES.UPLOADING && \"Enviando partituras...\"}\r\n              {modalState === STATES.COMPLETE && \"Upload finalizado!\"}\r\n            </p>\r\n          </div>\r\n\r\n          {/* Botao fechar */}\r\n          <button\r\n            onClick={onClose}\r\n            style={{\r\n              background: \"none\",\r\n              border: \"none\",\r\n              color: \"var(--text-secondary)\",\r\n              cursor: \"pointer\",\r\n              padding: \"8px\",\r\n              borderRadius: \"8px\",\r\n              transition: \"all 0.2s\",\r\n            }}\r\n            onMouseEnter={(e) => (e.currentTarget.style.background = \"var(--bg-primary)\")}\r\n            onMouseLeave={(e) => (e.currentTarget.style.background = \"none\")}\r\n          >\r\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\r\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n\r\n        {/* Input de arquivo com ID para acesso via getElementById */}\r\n        <input\r\n          ref={fileInputRef}\r\n          id=\"batch-folder-input\"\r\n          type=\"file\"\r\n          {...{ webkitdirectory: \"\", directory: \"\" }}\r\n          multiple\r\n          onChange={handleFileSelect}\r\n          style={{ display: \"none\" }}\r\n        />\r\n\r\n        {/* Content */}\r\n        <div\r\n          style={{\r\n            flex: 1,\r\n            overflow: \"auto\",\r\n            padding: \"24px\",\r\n          }}\r\n        >\r\n          {/* SELECTION STATE */}\r\n          {modalState === STATES.SELECTION && (\r\n            <div\r\n              onClick={handleClickToSelect}\r\n              onDragEnter={handleDragEnter}\r\n              onDragLeave={handleDragLeave}\r\n              onDragOver={handleDragOver}\r\n              onDrop={handleDrop}\r\n              style={{\r\n                display: \"block\",\r\n                border: isDragging ? \"2px dashed #D4AF37\" : \"2px dashed var(--border)\",\r\n                borderRadius: \"12px\",\r\n                padding: \"60px 40px\",\r\n                textAlign: \"center\",\r\n                background: isDragging\r\n                  ? \"linear-gradient(145deg, rgba(212, 175, 55, 0.15) 0%, rgba(184, 134, 11, 0.08) 100%)\"\r\n                  : \"var(--bg-primary)\",\r\n                cursor: \"pointer\",\r\n                transition: \"all 0.3s ease\",\r\n                transform: isDragging ? \"scale(1.02)\" : \"scale(1)\",\r\n              }}\r\n            >\r\n              <div\r\n                style={{\r\n                  width: \"100px\",\r\n                  height: \"100px\",\r\n                  margin: \"0 auto 24px\",\r\n                  borderRadius: \"24px\",\r\n                  background: \"linear-gradient(145deg, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.05) 100%)\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                }}\r\n              >\r\n                <svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#D4AF37\" strokeWidth=\"1.5\">\r\n                  <path d=\"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z\" />\r\n                  <path d=\"M12 11v6M9 14h6\" opacity=\"0.6\" />\r\n                </svg>\r\n              </div>\r\n\r\n              <div\r\n                style={{\r\n                  fontSize: \"18px\",\r\n                  fontWeight: \"600\",\r\n                  color: isDragging ? \"#D4AF37\" : \"var(--text-primary)\",\r\n                  marginBottom: \"8px\",\r\n                }}\r\n              >\r\n                {isDragging ? \"Solte as pastas aqui!\" : \"Arraste uma pasta ou clique para selecionar\"}\r\n              </div>\r\n\r\n              <div style={{ fontSize: \"14px\", color: \"var(--text-secondary)\", marginBottom: \"24px\" }}>\r\n                Selecione uma pasta contendo subpastas de partituras\r\n              </div>\r\n\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  gap: \"16px\",\r\n                  justifyContent: \"center\",\r\n                  fontSize: \"12px\",\r\n                  color: \"var(--text-muted)\",\r\n                }}\r\n              >\r\n                <span style={{ display: \"flex\", alignItems: \"center\", gap: \"6px\" }}>\r\n                  <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                    <path d=\"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z\" />\r\n                  </svg>\r\n                  Multiplas pastas\r\n                </span>\r\n                <span style={{ display: \"flex\", alignItems: \"center\", gap: \"6px\" }}>\r\n                  <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                    <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\" />\r\n                  </svg>\r\n                  Arquivos PDF\r\n                </span>\r\n                <span style={{ display: \"flex\", alignItems: \"center\", gap: \"6px\" }}>\r\n                  <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                    <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n                    <polyline points=\"12 6 12 12 16 14\" />\r\n                  </svg>\r\n                  Deteccao automatica\r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* ANALYZING STATE */}\r\n          {modalState === STATES.ANALYZING && (\r\n            <div style={{ textAlign: \"center\", padding: \"40px\" }}>\r\n              <div\r\n                style={{\r\n                  width: \"140px\",\r\n                  height: \"140px\",\r\n                  margin: \"0 auto 24px\",\r\n                  borderRadius: \"50%\",\r\n                  background: \"linear-gradient(145deg, rgba(212, 175, 55, 0.12) 0%, rgba(184, 134, 11, 0.06) 100%)\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                  boxShadow: \"0 4px 24px rgba(212, 175, 55, 0.08)\",\r\n                }}\r\n              >\r\n                <svg\r\n                  width=\"60\"\r\n                  height=\"60\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  stroke=\"#D4AF37\"\r\n                  strokeWidth=\"1.5\"\r\n                  style={{ animation: \"spin 2s linear infinite\" }}\r\n                >\r\n                  <circle cx=\"12\" cy=\"12\" r=\"10\" strokeOpacity=\"0.25\" />\r\n                  <path d=\"M12 2a10 10 0 0 1 10 10\" strokeLinecap=\"round\" />\r\n                </svg>\r\n              </div>\r\n\r\n              <div\r\n                style={{\r\n                  fontSize: \"18px\",\r\n                  fontWeight: \"600\",\r\n                  color: \"var(--text-primary)\",\r\n                  marginBottom: \"8px\",\r\n                }}\r\n              >\r\n                Preparando arquivos...\r\n              </div>\r\n\r\n              <div style={{ fontSize: \"14px\", color: \"var(--text-secondary)\", marginBottom: \"24px\" }}>\r\n                {analyzeProgress.total > 0\r\n                  ? `Organizando ${analyzeProgress.total} arquivo(s)...`\r\n                  : \"Lendo estrutura de diretorios...\"}\r\n              </div>\r\n\r\n              {analyzeProgress.total > 0 && (\r\n                <div\r\n                  style={{\r\n                    width: \"100%\",\r\n                    maxWidth: \"300px\",\r\n                    height: \"6px\",\r\n                    background: \"rgba(212, 175, 55, 0.1)\",\r\n                    borderRadius: \"3px\",\r\n                    overflow: \"hidden\",\r\n                    margin: \"0 auto\",\r\n                  }}\r\n                >\r\n                  <div\r\n                    style={{\r\n                      width: `${analyzeProgress.percentual}%`,\r\n                      height: \"100%\",\r\n                      background: \"linear-gradient(90deg, #D4AF37, #B8860B)\",\r\n                      borderRadius: \"3px\",\r\n                      transition: \"width 0.3s ease-out\",\r\n                    }}\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {/* FEEDBACK STATE */}\r\n          {modalState === STATES.FEEDBACK && estatisticas && (\r\n            <div style={{ textAlign: \"center\", padding: \"40px\" }}>\r\n              {(() => {\r\n                const resultado = calcularResultado(estatisticas);\r\n                const bgColor =\r\n                  resultado.tipo === \"success\"\r\n                    ? \"rgba(39, 174, 96, 0.1)\"\r\n                    : resultado.tipo === \"partial\"\r\n                      ? \"rgba(230, 126, 34, 0.1)\"\r\n                      : \"rgba(231, 76, 60, 0.1)\";\r\n                return (\r\n                  <>\r\n                    <div\r\n                      style={{\r\n                        width: \"160px\",\r\n                        height: \"160px\",\r\n                        margin: \"0 auto 24px\",\r\n                        borderRadius: \"50%\",\r\n                        background: bgColor,\r\n                        display: \"flex\",\r\n                        alignItems: \"center\",\r\n                        justifyContent: \"center\",\r\n                        boxShadow: `0 4px 24px ${bgColor}`,\r\n                      }}\r\n                    >\r\n                      <svg width=\"60\" height=\"60\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#27ae60\" strokeWidth=\"2\">\r\n                        <polyline points=\"20 6 9 17 4 12\" />\r\n                      </svg>\r\n                    </div>\r\n\r\n                    <div\r\n                      style={{\r\n                        fontSize: \"24px\",\r\n                        fontWeight: \"700\",\r\n                        color:\r\n                          resultado.tipo === \"success\"\r\n                            ? \"#27ae60\"\r\n                            : resultado.tipo === \"partial\"\r\n                              ? \"#e67e22\"\r\n                              : \"#e74c3c\",\r\n                        marginBottom: \"8px\",\r\n                      }}\r\n                    >\r\n                      {resultado.tipo === \"success\" && \"Tudo pronto!\"}\r\n                      {resultado.tipo === \"partial\" && \"Quase la!\"}\r\n                      {resultado.tipo === \"failure\" && \"Precisa de atencao\"}\r\n                    </div>\r\n\r\n                    <div style={{ fontSize: \"16px\", color: \"var(--text-secondary)\" }}>\r\n                      {estatisticas.prontas} de {estatisticas.total} partitura\r\n                      {estatisticas.total !== 1 ? \"s\" : \"\"} pronta{estatisticas.prontas !== 1 ? \"s\" : \"\"} para upload\r\n                    </div>\r\n                  </>\r\n                );\r\n              })()}\r\n            </div>\r\n          )}\r\n\r\n          {/* REVIEW STATE */}\r\n          {modalState === STATES.REVIEW && (\r\n            <>\r\n              {/* Tabs */}\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  gap: \"8px\",\r\n                  marginBottom: \"20px\",\r\n                  borderBottom: \"1px solid var(--border)\",\r\n                  paddingBottom: \"12px\",\r\n                }}\r\n              >\r\n                {(\r\n                  [\r\n                    { key: TABS.ALL, label: \"Todas\", count: contadores.all, color: undefined },\r\n                    { key: TABS.READY, label: \"Prontas\", count: contadores.ready, color: \"#27ae60\" },\r\n                    { key: TABS.ATTENTION, label: \"Atencao\", count: contadores.attention, color: \"#e67e22\" },\r\n                    { key: TABS.PROBLEM, label: \"Problemas\", count: contadores.problem, color: \"#e74c3c\" },\r\n                  ] as const\r\n                ).map((tab) => (\r\n                  <button\r\n                    key={tab.key}\r\n                    onClick={() => setActiveTab(tab.key)}\r\n                    style={{\r\n                      padding: \"8px 16px\",\r\n                      borderRadius: \"20px\",\r\n                      border: \"none\",\r\n                      background:\r\n                        activeTab === tab.key\r\n                          ? tab.color\r\n                            ? `${tab.color}20`\r\n                            : \"rgba(212, 175, 55, 0.15)\"\r\n                          : \"transparent\",\r\n                      color: activeTab === tab.key ? (tab.color || \"#D4AF37\") : \"var(--text-secondary)\",\r\n                      fontSize: \"13px\",\r\n                      fontWeight: \"500\",\r\n                      cursor: \"pointer\",\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      gap: \"6px\",\r\n                      transition: \"all 0.2s\",\r\n                    }}\r\n                  >\r\n                    {tab.label}\r\n                    <span\r\n                      style={{\r\n                        background: tab.color ? `${tab.color}30` : \"var(--bg-primary)\",\r\n                        padding: \"2px 8px\",\r\n                        borderRadius: \"10px\",\r\n                        fontSize: \"11px\",\r\n                      }}\r\n                    >\r\n                      {tab.count}\r\n                    </span>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n\r\n              {/* Acoes em massa */}\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  gap: \"12px\",\r\n                  marginBottom: \"16px\",\r\n                  fontSize: \"13px\",\r\n                }}\r\n              >\r\n                <button\r\n                  onClick={() => toggleTodas(true)}\r\n                  style={{\r\n                    background: \"none\",\r\n                    border: \"none\",\r\n                    color: \"#D4AF37\",\r\n                    cursor: \"pointer\",\r\n                    padding: \"4px 8px\",\r\n                  }}\r\n                >\r\n                  Selecionar todas\r\n                </button>\r\n                <button\r\n                  onClick={() => toggleTodas(false)}\r\n                  style={{\r\n                    background: \"none\",\r\n                    border: \"none\",\r\n                    color: \"var(--text-secondary)\",\r\n                    cursor: \"pointer\",\r\n                    padding: \"4px 8px\",\r\n                  }}\r\n                >\r\n                  Limpar selecao\r\n                </button>\r\n              </div>\r\n\r\n              {/* Lista de pastas */}\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  flexDirection: \"column\",\r\n                  gap: \"8px\",\r\n                  maxHeight: \"400px\",\r\n                  overflowY: \"auto\",\r\n                }}\r\n              >\r\n                {pastasFiltradas.map((pasta) => (\r\n                  <div\r\n                    key={pasta.id}\r\n                    style={{\r\n                      background: \"var(--bg-primary)\",\r\n                      borderRadius: \"12px\",\r\n                      border: `1px solid ${pasta.status === \"ready\" ? \"var(--border)\" : pasta.status === \"attention\" ? \"#e67e22\" : \"#e74c3c\"}`,\r\n                    }}\r\n                  >\r\n                    {/* Cabecalho da pasta */}\r\n                    <div\r\n                      onClick={() => setPastaExpandida(pastaExpandida === pasta.id ? null : pasta.id)}\r\n                      style={{\r\n                        padding: \"12px 16px\",\r\n                        display: \"flex\",\r\n                        alignItems: \"center\",\r\n                        gap: \"12px\",\r\n                        cursor: \"pointer\",\r\n                      }}\r\n                    >\r\n                      {/* Checkbox */}\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={pasta.selecionada}\r\n                        onChange={(e) => {\r\n                          e.stopPropagation();\r\n                          togglePastaSelecionada(pasta.id);\r\n                        }}\r\n                        disabled={pasta.status === \"problem\"}\r\n                        style={{ cursor: pasta.status === \"problem\" ? \"not-allowed\" : \"pointer\" }}\r\n                      />\r\n\r\n                      {/* Icone de status */}\r\n                      <span\r\n                        style={{\r\n                          width: \"24px\",\r\n                          height: \"24px\",\r\n                          borderRadius: \"50%\",\r\n                          background:\r\n                            pasta.status === \"ready\"\r\n                              ? \"rgba(39, 174, 96, 0.15)\"\r\n                              : pasta.status === \"attention\"\r\n                                ? \"rgba(230, 126, 34, 0.15)\"\r\n                                : \"rgba(231, 76, 60, 0.15)\",\r\n                          display: \"flex\",\r\n                          alignItems: \"center\",\r\n                          justifyContent: \"center\",\r\n                        }}\r\n                      >\r\n                        {pasta.status === \"ready\" && (\r\n                          <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#27ae60\" strokeWidth=\"2.5\">\r\n                            <polyline points=\"20 6 9 17 4 12\" />\r\n                          </svg>\r\n                        )}\r\n                        {pasta.status === \"attention\" && (\r\n                          <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#e67e22\" strokeWidth=\"2\">\r\n                            <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n                            <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\" />\r\n                            <line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\" />\r\n                          </svg>\r\n                        )}\r\n                        {pasta.status === \"problem\" && (\r\n                          <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#e74c3c\" strokeWidth=\"2\">\r\n                            <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n                            <line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\" />\r\n                            <line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\" />\r\n                          </svg>\r\n                        )}\r\n                      </span>\r\n\r\n                      {/* Titulo e info */}\r\n                      <div style={{ flex: 1, minWidth: \"100px\", overflow: \"hidden\" }}>\r\n                        <div\r\n                          style={{\r\n                            fontSize: \"14px\",\r\n                            fontWeight: \"600\",\r\n                            color: \"var(--text-primary)\",\r\n                            whiteSpace: \"nowrap\",\r\n                            overflow: \"hidden\",\r\n                            textOverflow: \"ellipsis\",\r\n                            lineHeight: \"1.4\",\r\n                            marginBottom: \"6px\",\r\n                          }}\r\n                        >\r\n                          {pasta.titulo || pasta.nomePasta || \"Sem titulo\"}\r\n                        </div>\r\n                        <div\r\n                          style={{\r\n                            display: \"flex\",\r\n                            alignItems: \"center\",\r\n                            gap: \"6px\",\r\n                            flexWrap: \"wrap\",\r\n                          }}\r\n                        >\r\n                          <span\r\n                            style={{\r\n                              fontSize: \"11px\",\r\n                              padding: \"2px 8px\",\r\n                              borderRadius: \"10px\",\r\n                              background: \"var(--bg-secondary)\",\r\n                              color: \"var(--text-secondary)\",\r\n                              border: \"1px solid var(--border)\",\r\n                            }}\r\n                          >\r\n                            {pasta.arquivos.length} arquivo{pasta.arquivos.length !== 1 ? \"s\" : \"\"}\r\n                          </span>\r\n\r\n                          {/* Tag de categoria */}\r\n                          <span\r\n                            onClick={(e) => {\r\n                              e.stopPropagation();\r\n                              const select = (e.currentTarget as HTMLElement).querySelector(\"select\");\r\n                              if (select) select.click();\r\n                            }}\r\n                            style={{\r\n                              fontSize: \"11px\",\r\n                              padding: \"2px 8px\",\r\n                              borderRadius: \"10px\",\r\n                              background: pasta.categoria ? \"rgba(212, 175, 55, 0.1)\" : \"rgba(230, 126, 34, 0.1)\",\r\n                              color: pasta.categoria ? \"#D4AF37\" : \"#e67e22\",\r\n                              border: `1px solid ${pasta.categoria ? \"rgba(212, 175, 55, 0.3)\" : \"rgba(230, 126, 34, 0.3)\"}`,\r\n                              cursor: \"pointer\",\r\n                              fontWeight: \"500\",\r\n                              display: \"inline-flex\",\r\n                              alignItems: \"center\",\r\n                              gap: \"4px\",\r\n                              position: \"relative\" as const,\r\n                            }}\r\n                          >\r\n                            {categorias.find((c) => c.id === pasta.categoria)?.nome || \"Categoria\"}\r\n                            <svg width=\"8\" height=\"8\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"3\">\r\n                              <polyline points=\"6 9 12 15 18 9\" />\r\n                            </svg>\r\n                            <select\r\n                              value={pasta.categoria || \"\"}\r\n                              onClick={(e) => e.stopPropagation()}\r\n                              onChange={(e) => {\r\n                                e.stopPropagation();\r\n                                editarCategoria(pasta.id, e.target.value);\r\n                              }}\r\n                              style={{\r\n                                position: \"absolute\" as const,\r\n                                opacity: 0,\r\n                                top: 0,\r\n                                left: 0,\r\n                                width: \"100%\",\r\n                                height: \"100%\",\r\n                                cursor: \"pointer\",\r\n                              }}\r\n                            >\r\n                              <option value=\"\">Categoria</option>\r\n                              {categorias.map((cat) => (\r\n                                <option key={cat.id} value={cat.id}>\r\n                                  {cat.nome}\r\n                                </option>\r\n                              ))}\r\n                            </select>\r\n                          </span>\r\n\r\n                          {/* Tag de status/problema */}\r\n                          {pasta.statusMotivo && (\r\n                            <span\r\n                              style={{\r\n                                fontSize: \"11px\",\r\n                                padding: \"2px 8px\",\r\n                                borderRadius: \"10px\",\r\n                                background:\r\n                                  pasta.status === \"attention\" ? \"rgba(230, 126, 34, 0.1)\" : \"rgba(231, 76, 60, 0.1)\",\r\n                                color: pasta.status === \"attention\" ? \"#e67e22\" : \"#e74c3c\",\r\n                                border: `1px solid ${pasta.status === \"attention\" ? \"rgba(230, 126, 34, 0.3)\" : \"rgba(231, 76, 60, 0.3)\"}`,\r\n                              }}\r\n                            >\r\n                              {pasta.statusMotivo}\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Botoes para pastas com problema */}\r\n                      {pasta.status === \"problem\" && (\r\n                        <div style={{ display: \"flex\", gap: \"8px\" }}>\r\n                          {pasta.duplicada && (\r\n                            <button\r\n                              onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                setPastas((prev) =>\r\n                                  prev.map((p) =>\r\n                                    p.id === pasta.id\r\n                                      ? {\r\n                                          ...p,\r\n                                          status: \"attention\" as const,\r\n                                          statusMotivo: \"Duplicada (forcado)\",\r\n                                          selecionada: true,\r\n                                        }\r\n                                      : p\r\n                                  )\r\n                                );\r\n                              }}\r\n                              style={{\r\n                                padding: \"6px 12px\",\r\n                                borderRadius: \"6px\",\r\n                                border: \"1px solid #e67e22\",\r\n                                background: \"rgba(230, 126, 34, 0.1)\",\r\n                                color: \"#e67e22\",\r\n                                fontSize: \"12px\",\r\n                                cursor: \"pointer\",\r\n                                display: \"flex\",\r\n                                alignItems: \"center\",\r\n                                gap: \"4px\",\r\n                                whiteSpace: \"nowrap\",\r\n                              }}\r\n                            >\r\n                              <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                                <path d=\"M12 9v4M12 17h.01\" />\r\n                                <path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\" />\r\n                              </svg>\r\n                              Forcar\r\n                            </button>\r\n                          )}\r\n                          {!pasta.duplicada && (\r\n                            <button\r\n                              onClick={(e) => {\r\n                                e.stopPropagation();\r\n                                abrirPastaNoModalIndividual(pasta);\r\n                              }}\r\n                              style={{\r\n                                padding: \"6px 12px\",\r\n                                borderRadius: \"6px\",\r\n                                border: \"1px solid #e74c3c\",\r\n                                background: \"rgba(231, 76, 60, 0.1)\",\r\n                                color: \"#e74c3c\",\r\n                                fontSize: \"12px\",\r\n                                cursor: \"pointer\",\r\n                                display: \"flex\",\r\n                                alignItems: \"center\",\r\n                                gap: \"4px\",\r\n                              }}\r\n                            >\r\n                              <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                                <path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\" />\r\n                                <path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\" />\r\n                              </svg>\r\n                              Resolver\r\n                            </button>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Seta expandir */}\r\n                      <svg\r\n                        width=\"16\"\r\n                        height=\"16\"\r\n                        viewBox=\"0 0 24 24\"\r\n                        fill=\"none\"\r\n                        stroke=\"var(--text-muted)\"\r\n                        strokeWidth=\"2\"\r\n                        style={{\r\n                          transform: pastaExpandida === pasta.id ? \"rotate(180deg)\" : \"rotate(0deg)\",\r\n                          transition: \"transform 0.2s\",\r\n                        }}\r\n                      >\r\n                        <polyline points=\"6 9 12 15 18 9\" />\r\n                      </svg>\r\n                    </div>\r\n\r\n                    {/* Detalhes expandidos */}\r\n                    {pastaExpandida === pasta.id && (\r\n                      <div\r\n                        style={{\r\n                          padding: \"12px 16px\",\r\n                          background: \"var(--bg-secondary)\",\r\n                          borderTop: \"1px solid var(--border)\",\r\n                        }}\r\n                      >\r\n                        <div\r\n                          style={{\r\n                            display: \"grid\",\r\n                            gridTemplateColumns: \"1fr 1fr\",\r\n                            gap: \"10px\",\r\n                            marginBottom: \"12px\",\r\n                          }}\r\n                        >\r\n                          <div style={{ gridColumn: \"1 / -1\" }}>\r\n                            <label\r\n                              style={{\r\n                                display: \"block\",\r\n                                fontSize: \"11px\",\r\n                                color: \"var(--text-muted)\",\r\n                                marginBottom: \"3px\",\r\n                                fontWeight: \"500\",\r\n                              }}\r\n                            >\r\n                              Titulo\r\n                            </label>\r\n                            <input\r\n                              type=\"text\"\r\n                              value={pasta.titulo || \"\"}\r\n                              onClick={(e) => e.stopPropagation()}\r\n                              onChange={(e) => editarTitulo(pasta.id, e.target.value)}\r\n                              placeholder=\"Nome da partitura\"\r\n                              style={{\r\n                                width: \"100%\",\r\n                                padding: \"8px 10px\",\r\n                                borderRadius: \"6px\",\r\n                                border: \"1px solid var(--border)\",\r\n                                background: \"var(--bg-primary)\",\r\n                                color: \"var(--text-primary)\",\r\n                                fontSize: \"13px\",\r\n                                fontWeight: \"500\",\r\n                              }}\r\n                            />\r\n                          </div>\r\n\r\n                          <div>\r\n                            <label\r\n                              style={{\r\n                                display: \"block\",\r\n                                fontSize: \"11px\",\r\n                                color: \"var(--text-muted)\",\r\n                                marginBottom: \"3px\",\r\n                                fontWeight: \"500\",\r\n                              }}\r\n                            >\r\n                              Compositor\r\n                            </label>\r\n                            <input\r\n                              type=\"text\"\r\n                              value={pasta.compositor || \"\"}\r\n                              onClick={(e) => e.stopPropagation()}\r\n                              onChange={(e) => editarCompositor(pasta.id, e.target.value)}\r\n                              placeholder=\"Nome do compositor\"\r\n                              style={{\r\n                                width: \"100%\",\r\n                                padding: \"8px 10px\",\r\n                                borderRadius: \"6px\",\r\n                                border: \"1px solid var(--border)\",\r\n                                background: \"var(--bg-primary)\",\r\n                                color: \"var(--text-primary)\",\r\n                                fontSize: \"13px\",\r\n                              }}\r\n                            />\r\n                          </div>\r\n\r\n                          <div>\r\n                            <label\r\n                              style={{\r\n                                display: \"block\",\r\n                                fontSize: \"11px\",\r\n                                color: \"var(--text-muted)\",\r\n                                marginBottom: \"3px\",\r\n                                fontWeight: \"500\",\r\n                              }}\r\n                            >\r\n                              Arranjador\r\n                            </label>\r\n                            <input\r\n                              type=\"text\"\r\n                              value={pasta.arranjador || \"\"}\r\n                              onClick={(e) => e.stopPropagation()}\r\n                              onChange={(e) => editarArranjador(pasta.id, e.target.value)}\r\n                              placeholder=\"Nome do arranjador\"\r\n                              style={{\r\n                                width: \"100%\",\r\n                                padding: \"8px 10px\",\r\n                                borderRadius: \"6px\",\r\n                                border: \"1px solid var(--border)\",\r\n                                background: \"var(--bg-primary)\",\r\n                                color: \"var(--text-primary)\",\r\n                                fontSize: \"13px\",\r\n                              }}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Lista de arquivos */}\r\n                        <div style={{ fontSize: \"12px\" }}>\r\n                          <div style={{ color: \"var(--text-secondary)\", marginBottom: \"8px\" }}>\r\n                            Arquivos detectados:\r\n                          </div>\r\n                          <div\r\n                            style={{\r\n                              display: \"grid\",\r\n                              gridTemplateColumns: \"repeat(auto-fill, minmax(150px, 1fr))\",\r\n                              gap: \"6px\",\r\n                            }}\r\n                          >\r\n                            {pasta.arquivos.map((arq, idx) => (\r\n                              <div\r\n                                key={idx}\r\n                                style={{\r\n                                  padding: \"6px 10px\",\r\n                                  borderRadius: \"4px\",\r\n                                  background: arq.reconhecido ? \"rgba(39, 174, 96, 0.1)\" : \"rgba(230, 126, 34, 0.1)\",\r\n                                  color: arq.reconhecido ? \"#27ae60\" : \"#e67e22\",\r\n                                  display: \"flex\",\r\n                                  alignItems: \"center\",\r\n                                  gap: \"6px\",\r\n                                }}\r\n                              >\r\n                                {arq.reconhecido ? (\r\n                                  <svg\r\n                                    width=\"10\"\r\n                                    height=\"10\"\r\n                                    viewBox=\"0 0 24 24\"\r\n                                    fill=\"none\"\r\n                                    stroke=\"currentColor\"\r\n                                    strokeWidth=\"3\"\r\n                                  >\r\n                                    <polyline points=\"20 6 9 17 4 12\" />\r\n                                  </svg>\r\n                                ) : (\r\n                                  <svg\r\n                                    width=\"10\"\r\n                                    height=\"10\"\r\n                                    viewBox=\"0 0 24 24\"\r\n                                    fill=\"none\"\r\n                                    stroke=\"currentColor\"\r\n                                    strokeWidth=\"2\"\r\n                                  >\r\n                                    <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n                                    <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\" />\r\n                                    <line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\" />\r\n                                  </svg>\r\n                                )}\r\n                                {arq.instrumento}\r\n                              </div>\r\n                            ))}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </>\r\n          )}\r\n\r\n          {/* UPLOADING STATE */}\r\n          {modalState === STATES.UPLOADING && (\r\n            <div style={{ textAlign: \"center\", padding: \"40px 40px 32px\" }}>\r\n              <div\r\n                style={{\r\n                  width: \"120px\",\r\n                  height: \"120px\",\r\n                  margin: \"0 auto 28px\",\r\n                  borderRadius: \"50%\",\r\n                  background: \"linear-gradient(145deg, rgba(212, 175, 55, 0.12) 0%, rgba(184, 134, 11, 0.06) 100%)\",\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                  boxShadow: \"0 4px 24px rgba(212, 175, 55, 0.08)\",\r\n                }}\r\n              >\r\n                <svg\r\n                  width=\"50\"\r\n                  height=\"50\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  stroke=\"#D4AF37\"\r\n                  strokeWidth=\"1.5\"\r\n                  style={{ animation: \"spin 2s linear infinite\" }}\r\n                >\r\n                  <circle cx=\"12\" cy=\"12\" r=\"10\" strokeOpacity=\"0.25\" />\r\n                  <path d=\"M12 2a10 10 0 0 1 10 10\" strokeLinecap=\"round\" />\r\n                </svg>\r\n              </div>\r\n\r\n              <div\r\n                style={{\r\n                  fontSize: \"20px\",\r\n                  fontWeight: \"600\",\r\n                  color: \"var(--text-primary)\",\r\n                  marginBottom: \"6px\",\r\n                }}\r\n              >\r\n                Enviando partituras\r\n              </div>\r\n\r\n              <div style={{ fontSize: \"14px\", color: \"var(--text-secondary)\", marginBottom: \"16px\" }}>\r\n                {uploadProgress.processadas} de {uploadProgress.total} concluida\r\n                {uploadProgress.processadas !== 1 ? \"s\" : \"\"}\r\n              </div>\r\n\r\n              {/* Frase engracada animada */}\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                  gap: \"8px\",\r\n                  marginBottom: \"32px\",\r\n                  minHeight: \"24px\",\r\n                }}\r\n              >\r\n                <span\r\n                  key={funnyPhraseIndex}\r\n                  style={{\r\n                    fontSize: \"13px\",\r\n                    color: \"#D4AF37\",\r\n                    fontStyle: \"italic\",\r\n                  }}\r\n                >\r\n                  {funnyPhrases[funnyPhraseIndex]}\r\n                </span>\r\n              </div>\r\n\r\n              {/* Barra de progresso */}\r\n              <div style={{ width: \"100%\", maxWidth: \"400px\", margin: \"0 auto\" }}>\r\n                <div\r\n                  style={{\r\n                    position: \"relative\",\r\n                    height: \"8px\",\r\n                    background: \"var(--bg-primary)\",\r\n                    borderRadius: \"4px\",\r\n                    overflow: \"hidden\",\r\n                    marginBottom: \"16px\",\r\n                  }}\r\n                >\r\n                  <div\r\n                    style={{\r\n                      position: \"absolute\",\r\n                      left: 0,\r\n                      top: 0,\r\n                      width: `${uploadProgress.percentual}%`,\r\n                      height: \"100%\",\r\n                      background: \"linear-gradient(90deg, #D4AF37 0%, #F4D03F 50%, #D4AF37 100%)\",\r\n                      backgroundSize: \"200% 100%\",\r\n                      borderRadius: \"4px\",\r\n                      transition: \"width 0.4s cubic-bezier(0.4, 0, 0.2, 1)\",\r\n                      animation: \"shimmer 2s linear infinite\",\r\n                    }}\r\n                  />\r\n                </div>\r\n\r\n                {/* Indicadores de progresso */}\r\n                <div\r\n                  style={{\r\n                    display: \"flex\",\r\n                    justifyContent: \"center\",\r\n                    gap: \"6px\",\r\n                    marginTop: \"20px\",\r\n                  }}\r\n                >\r\n                  {pastas\r\n                    .filter((p) => p.selecionada && p.status !== \"problem\")\r\n                    .map((p, idx) => {\r\n                      const isCompleted = idx < uploadProgress.processadas;\r\n                      const isCurrent = idx === uploadProgress.processadas;\r\n                      return (\r\n                        <div\r\n                          key={p.id}\r\n                          title={p.titulo}\r\n                          style={{\r\n                            width: isCurrent ? \"24px\" : \"8px\",\r\n                            height: \"8px\",\r\n                            borderRadius: \"4px\",\r\n                            background: isCompleted\r\n                              ? \"#27ae60\"\r\n                              : isCurrent\r\n                                ? \"linear-gradient(90deg, #D4AF37, #F4D03F)\"\r\n                                : \"var(--bg-secondary)\",\r\n                            transition: \"all 0.3s ease\",\r\n                            cursor: \"default\",\r\n                          }}\r\n                        />\r\n                      );\r\n                    })}\r\n                </div>\r\n              </div>\r\n\r\n              <style>{`\r\n                @keyframes spin {\r\n                  to { transform: rotate(360deg); }\r\n                }\r\n                @keyframes shimmer {\r\n                  0% { background-position: 200% 0; }\r\n                  100% { background-position: -200% 0; }\r\n                }\r\n              `}</style>\r\n            </div>\r\n          )}\r\n\r\n          {/* COMPLETE STATE */}\r\n          {modalState === STATES.COMPLETE && uploadResultados && (\r\n            <div style={{ textAlign: \"center\", padding: \"40px\" }}>\r\n              {(() => {\r\n                const resumo = gerarResumo(uploadResultados.estatisticas);\r\n                const bgColor =\r\n                  resumo.tipo === \"success\"\r\n                    ? \"rgba(39, 174, 96, 0.1)\"\r\n                    : resumo.tipo === \"partial\"\r\n                      ? \"rgba(230, 126, 34, 0.1)\"\r\n                      : \"rgba(231, 76, 60, 0.1)\";\r\n                return (\r\n                  <>\r\n                    <div\r\n                      style={{\r\n                        width: \"160px\",\r\n                        height: \"160px\",\r\n                        margin: \"0 auto 24px\",\r\n                        borderRadius: \"50%\",\r\n                        background: bgColor,\r\n                        display: \"flex\",\r\n                        alignItems: \"center\",\r\n                        justifyContent: \"center\",\r\n                        boxShadow: `0 4px 24px ${bgColor}`,\r\n                      }}\r\n                    >\r\n                      <svg width=\"60\" height=\"60\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#27ae60\" strokeWidth=\"2\">\r\n                        <polyline points=\"20 6 9 17 4 12\" />\r\n                      </svg>\r\n                    </div>\r\n\r\n                    <div\r\n                      style={{\r\n                        fontSize: \"20px\",\r\n                        fontWeight: \"700\",\r\n                        color:\r\n                          resumo.tipo === \"success\"\r\n                            ? \"#27ae60\"\r\n                            : resumo.tipo === \"partial\"\r\n                              ? \"#e67e22\"\r\n                              : \"#e74c3c\",\r\n                        marginBottom: \"8px\",\r\n                      }}\r\n                    >\r\n                      {resumo.tipo === \"success\" && \"Upload concluido!\"}\r\n                      {resumo.tipo === \"partial\" && \"Upload parcial\"}\r\n                      {resumo.tipo === \"error\" && \"Falha no upload\"}\r\n                    </div>\r\n\r\n                    <div style={{ fontSize: \"16px\", color: \"var(--text-secondary)\", marginBottom: \"8px\" }}>\r\n                      {resumo.mensagem}\r\n                    </div>\r\n\r\n                    <div style={{ fontSize: \"13px\", color: \"var(--text-muted)\" }}>Tempo total: {resumo.duracao}</div>\r\n\r\n                    {uploadResultados.estatisticas.erro > 0 && (\r\n                      <div\r\n                        style={{\r\n                          marginTop: \"24px\",\r\n                          padding: \"16px\",\r\n                          background: \"rgba(231, 76, 60, 0.1)\",\r\n                          borderRadius: \"12px\",\r\n                          textAlign: \"left\",\r\n                          maxWidth: \"350px\",\r\n                          margin: \"24px auto 0\",\r\n                        }}\r\n                      >\r\n                        <div\r\n                          style={{\r\n                            fontSize: \"13px\",\r\n                            fontWeight: \"600\",\r\n                            color: \"#e74c3c\",\r\n                            marginBottom: \"8px\",\r\n                          }}\r\n                        >\r\n                          Erros encontrados:\r\n                        </div>\r\n                        {uploadResultados.resultados\r\n                          .filter((r) => !r.success)\r\n                          .map((r, idx) => (\r\n                            <div\r\n                              key={idx}\r\n                              style={{\r\n                                fontSize: \"12px\",\r\n                                color: \"var(--text-secondary)\",\r\n                                marginBottom: \"4px\",\r\n                              }}\r\n                            >\r\n                              &bull; {r.titulo}: {r.error}\r\n                            </div>\r\n                          ))}\r\n                      </div>\r\n                    )}\r\n                  </>\r\n                );\r\n              })()}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        {(modalState === STATES.REVIEW || modalState === STATES.COMPLETE) && (\r\n          <div\r\n            style={{\r\n              padding: \"16px 24px\",\r\n              borderTop: \"1px solid var(--border)\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"space-between\",\r\n              gap: \"12px\",\r\n            }}\r\n          >\r\n            {modalState === STATES.REVIEW && (\r\n              <>\r\n                <div style={{ fontSize: \"13px\", color: \"var(--text-secondary)\" }}>\r\n                  {pastasSelecionadas.length} de {pastas.filter((p) => p.status !== \"problem\").length} selecionada\r\n                  {pastasSelecionadas.length !== 1 ? \"s\" : \"\"}\r\n                  {pastasSelecionadas.length > 0 && (\r\n                    <span style={{ marginLeft: \"8px\" }}>\r\n                      (\r\n                      {\r\n                        estimarTempo(\r\n                          pastasSelecionadas.length,\r\n                          pastasSelecionadas.reduce((acc: number, p: Pasta) => acc + p.arquivos.length, 0)\r\n                        ).tempoFormatado\r\n                      }\r\n                      )\r\n                    </span>\r\n                  )}\r\n                </div>\r\n\r\n                <div style={{ display: \"flex\", gap: \"12px\" }}>\r\n                  <button\r\n                    onClick={onClose}\r\n                    style={{\r\n                      padding: \"12px 24px\",\r\n                      borderRadius: \"12px\",\r\n                      background: \"var(--bg-primary)\",\r\n                      border: \"1px solid var(--border)\",\r\n                      color: \"var(--text-primary)\",\r\n                      fontSize: \"14px\",\r\n                      cursor: \"pointer\",\r\n                    }}\r\n                  >\r\n                    Cancelar\r\n                  </button>\r\n\r\n                  <button\r\n                    onClick={iniciarUpload}\r\n                    disabled={pastasSelecionadas.length === 0}\r\n                    style={{\r\n                      padding: \"12px 24px\",\r\n                      borderRadius: \"12px\",\r\n                      background:\r\n                        pastasSelecionadas.length === 0\r\n                          ? \"linear-gradient(135deg, rgba(212, 175, 55, 0.5) 0%, rgba(184, 134, 11, 0.5) 100%)\"\r\n                          : \"linear-gradient(135deg, #D4AF37 0%, #B8860B 100%)\",\r\n                      border: \"none\",\r\n                      color: \"#fff\",\r\n                      fontSize: \"14px\",\r\n                      fontWeight: \"600\",\r\n                      cursor: pastasSelecionadas.length === 0 ? \"not-allowed\" : \"pointer\",\r\n                      display: \"flex\",\r\n                      alignItems: \"center\",\r\n                      gap: \"8px\",\r\n                    }}\r\n                  >\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                      <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\" />\r\n                      <polyline points=\"17 8 12 3 7 8\" />\r\n                      <line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\" />\r\n                    </svg>\r\n                    Enviar {pastasSelecionadas.length} partitura{pastasSelecionadas.length !== 1 ? \"s\" : \"\"}\r\n                  </button>\r\n                </div>\r\n              </>\r\n            )}\r\n\r\n            {modalState === STATES.COMPLETE && (\r\n              <div style={{ width: \"100%\", textAlign: \"center\" }}>\r\n                <button\r\n                  onClick={onClose}\r\n                  style={{\r\n                    padding: \"12px 32px\",\r\n                    borderRadius: \"12px\",\r\n                    background: \"linear-gradient(135deg, #D4AF37 0%, #B8860B 100%)\",\r\n                    border: \"none\",\r\n                    color: \"#fff\",\r\n                    fontSize: \"14px\",\r\n                    fontWeight: \"600\",\r\n                    cursor: \"pointer\",\r\n                  }}\r\n                >\r\n                  Fechar\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImportacaoLoteModal;\r\n","// ===== BATCH PARSER =====\r\n// Funcoes para analise em lote de pastas de partituras\r\n// Detecta subpastas contendo PDFs e extrai metadados automaticamente\r\n\r\nimport { extrairInstrumento, normalizarTexto } from './instrumentParser';\r\nimport { analisarMetadados } from './metadataParser';\r\nimport type { Categoria } from './metadataParser';\r\n\r\n// ----- Types -----\r\n\r\nexport interface Arquivo {\r\n  file: File;\r\n  nomeOriginal: string;\r\n  instrumento: string;\r\n  reconhecido: boolean;\r\n}\r\n\r\nexport interface Pasta {\r\n  id: string;\r\n  caminho: string;\r\n  nomePasta: string;\r\n  titulo: string;\r\n  categoria: string;\r\n  categoriaConfianca: number;\r\n  categoriaFonte: string;\r\n  compositor: string;\r\n  arranjador: string;\r\n  arquivos: Arquivo[];\r\n  selecionada: boolean;\r\n  status: 'ready' | 'attention' | 'problem';\r\n  statusMotivo: string | null;\r\n  duplicada: boolean;\r\n}\r\n\r\nexport interface Estatisticas {\r\n  total: number;\r\n  prontas: number;\r\n  atencao: number;\r\n  problemas: number;\r\n  totalArquivos: number;\r\n  instrumentosReconhecidos: number;\r\n  instrumentosNaoReconhecidos: number;\r\n}\r\n\r\nexport interface ProcessarLoteResult {\r\n  pastas: Pasta[];\r\n  estatisticas: Estatisticas;\r\n}\r\n\r\ninterface DuplicataResult {\r\n  duplicada: boolean;\r\n  partituraExistente: PartituraExistente | null;\r\n}\r\n\r\ninterface PartituraExistente {\r\n  titulo: string;\r\n  [key: string]: unknown;\r\n}\r\n\r\ninterface FileInfo {\r\n  file: File;\r\n  path: string;\r\n  fullPath: string;\r\n}\r\n\r\ninterface ProgressInfo {\r\n  processadas: number;\r\n  total: number;\r\n  percentual: number;\r\n  pastaAtual: string;\r\n}\r\n\r\ninterface StatusResult {\r\n  status: 'ready' | 'attention' | 'problem';\r\n  motivo: string | null;\r\n  duplicada: boolean;\r\n}\r\n\r\n// ----- Helpers -----\r\n\r\n/**\r\n * Verifica se um titulo ja existe nas partituras do acervo\r\n */\r\nexport const verificarDuplicata = (titulo: string, partiturasExistentes: unknown[] = []): DuplicataResult => {\r\n  if (!titulo || partiturasExistentes.length === 0) {\r\n    return { duplicada: false, partituraExistente: null };\r\n  }\r\n\r\n  const tituloNorm = normalizarTexto(titulo);\r\n\r\n  for (const partitura of partiturasExistentes) {\r\n    const p = partitura as PartituraExistente;\r\n    const partituraTituloNorm = normalizarTexto(p.titulo || '');\r\n    if (tituloNorm === partituraTituloNorm) {\r\n      return { duplicada: true, partituraExistente: p };\r\n    }\r\n  }\r\n\r\n  return { duplicada: false, partituraExistente: null };\r\n};\r\n\r\n/**\r\n * Contador incremental para garantir IDs unicos mesmo em processamento rapido\r\n */\r\nlet idCounter = 0;\r\n\r\n/**\r\n * Gera um ID unico para cada pasta detectada\r\n */\r\nconst generateId = (): string => {\r\n  idCounter++;\r\n  return `pasta-${Date.now()}-${idCounter}-${Math.random().toString(36).substr(2, 9)}`;\r\n};\r\n\r\n/**\r\n * Le todos os arquivos de uma entrada de diretorio recursivamente\r\n */\r\nexport const readDirectoryRecursively = async (entry: FileSystemEntry, path = ''): Promise<FileInfo[]> => {\r\n  const results: FileInfo[] = [];\r\n\r\n  if (entry.isFile) {\r\n    const file = await new Promise<File>((resolve) => (entry as FileSystemFileEntry).file(resolve));\r\n    results.push({\r\n      file,\r\n      path: path + file.name,\r\n      fullPath: path\r\n    });\r\n  } else if (entry.isDirectory) {\r\n    const reader = (entry as FileSystemDirectoryEntry).createReader();\r\n    const entries = await new Promise<FileSystemEntry[]>((resolve) => {\r\n      const allEntries: FileSystemEntry[] = [];\r\n      const readEntries = () => {\r\n        reader.readEntries((batch) => {\r\n          if (batch.length === 0) {\r\n            resolve(allEntries);\r\n          } else {\r\n            allEntries.push(...batch);\r\n            readEntries();\r\n          }\r\n        });\r\n      };\r\n      readEntries();\r\n    });\r\n\r\n    for (const childEntry of entries) {\r\n      const childResults = await readDirectoryRecursively(\r\n        childEntry,\r\n        path + entry.name + '/'\r\n      );\r\n      results.push(...childResults);\r\n    }\r\n  }\r\n\r\n  return results;\r\n};\r\n\r\n/**\r\n * Agrupa arquivos por pasta (cada pasta com PDFs = uma partitura)\r\n */\r\nexport const groupFilesByFolder = (files: FileInfo[]): Map<string, FileInfo[]> => {\r\n  const groups = new Map<string, FileInfo[]>();\r\n\r\n  // Filtra apenas PDFs\r\n  const pdfFiles = files.filter(f => f.file.name.toLowerCase().endsWith('.pdf'));\r\n\r\n  for (const fileInfo of pdfFiles) {\r\n    // Normaliza separadores de caminho (Windows usa \\, web usa /)\r\n    const normalizedPath = (fileInfo.path || '').replace(/\\\\/g, '/');\r\n    // Pega a pasta imediata (pai direto do arquivo)\r\n    const pathParts = normalizedPath.split('/');\r\n    pathParts.pop(); // Remove o nome do arquivo\r\n    const folderPath = pathParts.join('/');\r\n\r\n    if (!groups.has(folderPath)) {\r\n      groups.set(folderPath, []);\r\n    }\r\n    groups.get(folderPath)!.push(fileInfo);\r\n  }\r\n\r\n  return groups;\r\n};\r\n\r\n/**\r\n * Determina o status de uma pasta com base nos dados analisados\r\n */\r\nconst determinarStatus = (\r\n  pastaData: { arquivos: Arquivo[]; categoria: string; titulo: string },\r\n  partiturasExistentes: unknown[] = []\r\n): StatusResult => {\r\n  const { arquivos, categoria, titulo } = pastaData;\r\n\r\n  // Verifica problemas criticos\r\n  if (!arquivos || arquivos.length === 0) {\r\n    return { status: 'problem', motivo: 'Nenhum arquivo PDF encontrado', duplicada: false };\r\n  }\r\n\r\n  if (!titulo || titulo.trim() === '') {\r\n    return { status: 'problem', motivo: 'Titulo nao detectado', duplicada: false };\r\n  }\r\n\r\n  // Verifica duplicatas - BLOQUEIA upload de partituras que ja existem\r\n  const { duplicada } = verificarDuplicata(titulo, partiturasExistentes);\r\n  if (duplicada) {\r\n    return {\r\n      status: 'problem',\r\n      motivo: 'Ja existe no acervo',\r\n      duplicada: true\r\n    };\r\n  }\r\n\r\n  // Conta instrumentos nao reconhecidos\r\n  const naoReconhecidos = arquivos.filter(a => !a.reconhecido).length;\r\n  const totalArquivos = arquivos.length;\r\n  const percentualNaoReconhecido = (naoReconhecidos / totalArquivos) * 100;\r\n\r\n  // Verifica se precisa atencao\r\n  if (!categoria) {\r\n    return { status: 'attention', motivo: 'Categoria nao detectada', duplicada: false };\r\n  }\r\n\r\n  if (percentualNaoReconhecido > 50) {\r\n    return { status: 'attention', motivo: `${naoReconhecidos} de ${totalArquivos} instrumentos nao reconhecidos`, duplicada: false };\r\n  }\r\n\r\n  if (naoReconhecidos > 0) {\r\n    return { status: 'attention', motivo: `${naoReconhecidos} instrumento(s) nao reconhecido(s)`, duplicada: false };\r\n  }\r\n\r\n  // Tudo OK\r\n  return { status: 'ready', motivo: null, duplicada: false };\r\n};\r\n\r\n/**\r\n * Analisa uma pasta individual e extrai todos os metadados\r\n */\r\nexport const analisarPasta = (\r\n  folderPath: string,\r\n  files: FileInfo[],\r\n  categorias: Categoria[] = [],\r\n  partiturasExistentes: unknown[] = []\r\n): Pasta => {\r\n  // Extrai nome da pasta (ultimo segmento do caminho)\r\n  // Normaliza separadores de caminho (Windows usa \\, web usa /)\r\n  const caminhoNormalizado = (folderPath || '').replace(/\\\\/g, '/');\r\n  const pathParts = caminhoNormalizado.split('/').filter(p => p.trim());\r\n  const nomePasta = pathParts[pathParts.length - 1] || 'Pasta sem nome';\r\n\r\n  // Analisa metadados usando a funcao multi-camada\r\n  const metadados = analisarMetadados(caminhoNormalizado, nomePasta, categorias);\r\n\r\n  // Analisa cada arquivo para extrair instrumentos\r\n  const arquivos: Arquivo[] = files.map(({ file }) => {\r\n    const { instrumento, reconhecido } = extrairInstrumento(file.name);\r\n    return {\r\n      file,\r\n      nomeOriginal: file.name,\r\n      instrumento,\r\n      reconhecido\r\n    };\r\n  });\r\n\r\n  // Monta objeto da pasta\r\n  const pastaData: Pasta = {\r\n    id: generateId(),\r\n    caminho: caminhoNormalizado,\r\n    nomePasta,\r\n    titulo: metadados.titulo,\r\n    categoria: metadados.categoria || '',\r\n    categoriaConfianca: metadados.categoriaConfianca,\r\n    categoriaFonte: metadados.categoriaFonte,\r\n    compositor: metadados.compositor,\r\n    arranjador: metadados.arranjador,\r\n    arquivos,\r\n    selecionada: true,\r\n    status: 'ready',\r\n    statusMotivo: null,\r\n    duplicada: false\r\n  };\r\n\r\n  // Determina status (inclui verificacao de duplicatas)\r\n  const { status, motivo, duplicada } = determinarStatus(pastaData, partiturasExistentes);\r\n  pastaData.status = status;\r\n  pastaData.statusMotivo = motivo;\r\n  pastaData.duplicada = duplicada;\r\n\r\n  return pastaData;\r\n};\r\n\r\n/**\r\n * Calcula estatisticas a partir de uma lista de pastas analisadas\r\n */\r\nconst calcularEstatisticas = (pastas: Pasta[]): Estatisticas => {\r\n  return pastas.reduce((acc, pasta) => {\r\n    acc.total++;\r\n    if (pasta.status === 'ready') acc.prontas++;\r\n    else if (pasta.status === 'attention') acc.atencao++;\r\n    else if (pasta.status === 'problem') acc.problemas++;\r\n\r\n    acc.totalArquivos += pasta.arquivos.length;\r\n    acc.instrumentosReconhecidos += pasta.arquivos.filter(a => a.reconhecido).length;\r\n    acc.instrumentosNaoReconhecidos += pasta.arquivos.filter(a => !a.reconhecido).length;\r\n\r\n    return acc;\r\n  }, {\r\n    total: 0,\r\n    prontas: 0,\r\n    atencao: 0,\r\n    problemas: 0,\r\n    totalArquivos: 0,\r\n    instrumentosReconhecidos: 0,\r\n    instrumentosNaoReconhecidos: 0\r\n  } as Estatisticas);\r\n};\r\n\r\n/**\r\n * Processa um lote de arquivos arrastados e retorna as partituras detectadas\r\n * Aceita DataTransferItemList ou array de FileSystemEntry (entries ja extraidas)\r\n */\r\nexport const processarLote = async (\r\n  items: DataTransferItemList | FileSystemEntry[],\r\n  categorias: Categoria[] = [],\r\n  partiturasExistentes: unknown[] = [],\r\n  onProgress: ((info: ProgressInfo) => void) | null = null\r\n): Promise<ProcessarLoteResult> => {\r\n  const allFiles: FileInfo[] = [];\r\n\r\n  // Le todas as entradas de diretorio\r\n  if (Array.isArray(items)) {\r\n    // Entries ja extraidas (seguro apos o evento de drop)\r\n    for (const entry of items) {\r\n      const files = await readDirectoryRecursively(entry, '');\r\n      allFiles.push(...files);\r\n    }\r\n  } else {\r\n    // DataTransferItemList (deve ser chamado durante o evento)\r\n    for (let i = 0; i < items.length; i++) {\r\n      const entry = items[i].webkitGetAsEntry?.();\r\n      if (entry) {\r\n        const files = await readDirectoryRecursively(entry, '');\r\n        allFiles.push(...files);\r\n      }\r\n    }\r\n  }\r\n\r\n  // Agrupa por pasta\r\n  const grupos = groupFilesByFolder(allFiles);\r\n  const totalPastas = grupos.size;\r\n  let processadas = 0;\r\n\r\n  // Analisa cada pasta\r\n  const pastas: Pasta[] = [];\r\n  for (const [folderPath, files] of grupos) {\r\n    const pastaAnalisada = analisarPasta(folderPath, files, categorias, partiturasExistentes);\r\n    pastas.push(pastaAnalisada);\r\n    processadas++;\r\n\r\n    if (onProgress) {\r\n      onProgress({\r\n        processadas,\r\n        total: totalPastas,\r\n        percentual: Math.round((processadas / totalPastas) * 100),\r\n        pastaAtual: folderPath\r\n      });\r\n    }\r\n  }\r\n\r\n  // Calcula estatisticas\r\n  const estatisticas = calcularEstatisticas(pastas);\r\n\r\n  return { pastas, estatisticas };\r\n};\r\n\r\n/**\r\n * Processa arquivos de um input de diretorio (fallback para input file)\r\n */\r\nexport const processarFileList = async (\r\n  fileList: FileList,\r\n  categorias: Categoria[] = [],\r\n  partiturasExistentes: unknown[] = [],\r\n  onProgress: ((info: ProgressInfo) => void) | null = null\r\n): Promise<ProcessarLoteResult> => {\r\n  const files: FileInfo[] = Array.from(fileList)\r\n    .filter(f => f.name.toLowerCase().endsWith('.pdf'))\r\n    .map(f => ({\r\n      file: f,\r\n      path: f.webkitRelativePath || f.name,\r\n      fullPath: f.webkitRelativePath ? f.webkitRelativePath.split('/').slice(0, -1).join('/') : ''\r\n    }));\r\n\r\n  // Agrupa por pasta\r\n  const grupos = groupFilesByFolder(files.map(f => ({ ...f, path: f.path })));\r\n  const totalPastas = grupos.size;\r\n  let processadas = 0;\r\n\r\n  // Analisa cada pasta\r\n  const pastas: Pasta[] = [];\r\n  for (const [folderPath, folderFiles] of grupos) {\r\n    const pastaAnalisada = analisarPasta(folderPath, folderFiles, categorias, partiturasExistentes);\r\n    pastas.push(pastaAnalisada);\r\n    processadas++;\r\n\r\n    if (onProgress) {\r\n      onProgress({\r\n        processadas,\r\n        total: totalPastas,\r\n        percentual: Math.round((processadas / totalPastas) * 100),\r\n        pastaAtual: folderPath\r\n      });\r\n    }\r\n  }\r\n\r\n  // Calcula estatisticas\r\n  const estatisticas = calcularEstatisticas(pastas);\r\n\r\n  return { pastas, estatisticas };\r\n};\r\n\r\n/**\r\n * Filtra pastas por status\r\n * Accepts any array with a status field for compatibility with consumer types\r\n */\r\nexport const filtrarPorStatus = <T extends { status: string }>(pastas: T[], status: string): T[] => {\r\n  if (status === 'all') return pastas;\r\n  return pastas.filter(p => p.status === status);\r\n};\r\n\r\nexport interface ResultadoLote {\r\n  percentual: number;\r\n  tipo: 'success' | 'partial' | 'failure';\r\n}\r\n\r\n/**\r\n * Calcula percentual de sucesso do lote\r\n */\r\nexport const calcularResultado = (estatisticas: { total: number; prontas: number }): ResultadoLote => {\r\n  const { total, prontas } = estatisticas;\r\n\r\n  if (total === 0) {\r\n    return { percentual: 0, tipo: 'failure' };\r\n  }\r\n\r\n  const percentual = Math.round((prontas / total) * 100);\r\n\r\n  if (percentual === 100) {\r\n    return { percentual, tipo: 'success' };\r\n  } else if (percentual >= 50) {\r\n    return { percentual, tipo: 'partial' };\r\n  } else {\r\n    return { percentual, tipo: 'failure' };\r\n  }\r\n};\r\n","// ===== UPLOAD BATCH =====\r\n// Gerenciador de upload em lote de partituras\r\n// Upload em chunks com tratamento de erros por pasta\r\n\r\nimport { API } from '@/lib/api';\r\n\r\n// ----- Types -----\r\n\r\ninterface PastaArquivo {\r\n  file: File;\r\n  instrumento: string;\r\n}\r\n\r\ninterface PastaParaUpload {\r\n  id: string;\r\n  titulo: string;\r\n  nomePasta?: string;\r\n  compositor?: string;\r\n  arranjador?: string;\r\n  categoria?: string;\r\n  ano?: string;\r\n  caminho?: string;\r\n  selecionada: boolean;\r\n  arquivos: PastaArquivo[];\r\n}\r\n\r\ninterface SingleUploadResult {\r\n  success: boolean;\r\n  error?: string;\r\n  result?: unknown;\r\n}\r\n\r\ninterface RetryUploadResult extends SingleUploadResult {\r\n  attempts: number;\r\n}\r\n\r\nexport interface UploadResultado {\r\n  pastaId: string;\r\n  titulo: string;\r\n  caminho?: string;\r\n  success: boolean;\r\n  error?: string;\r\n  result?: unknown;\r\n  attempts: number;\r\n}\r\n\r\nexport interface UploadEstatisticas {\r\n  total: number;\r\n  sucesso: number;\r\n  erro: number;\r\n  tempoTotal: number;\r\n  tempoMedio: number;\r\n}\r\n\r\nexport interface UploadResultados {\r\n  resultados: UploadResultado[];\r\n  estatisticas: UploadEstatisticas;\r\n}\r\n\r\nexport interface UploadProgress {\r\n  processadas: number;\r\n  total: number;\r\n  percentual: number;\r\n  sucessos: number;\r\n  erros: number;\r\n  pastaAtual: string;\r\n}\r\n\r\nexport interface UploadOptions {\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  onPastaStart?: (info: { pasta: any; processadas: number; total: number }) => void;\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  onPastaComplete?: (info: { pasta: any; resultado: any; processadas: number; total: number }) => void;\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  onPastaError?: (info: { pasta: any; error: unknown; processadas: number; total: number }) => void;\r\n  onChunkComplete?: (info: { chunkIndex: number; totalChunks: number; processadas: number; total: number }) => void;\r\n  onProgress?: (progress: UploadProgress) => void;\r\n}\r\n\r\ninterface UploadConfig {\r\n  chunkSize?: number;\r\n  delayBetweenChunks?: number;\r\n  retryAttempts?: number;\r\n  retryDelay?: number;\r\n}\r\n\r\n// ----- Config -----\r\n\r\n/**\r\n * Configuracao padrao do upload em lote\r\n */\r\nconst DEFAULT_CONFIG = {\r\n  chunkSize: 5, // Numero de pastas por chunk\r\n  delayBetweenChunks: 500, // Delay em ms entre chunks\r\n  retryAttempts: 2, // Tentativas de retry por pasta\r\n  retryDelay: 1000 // Delay em ms entre tentativas\r\n};\r\n\r\n// ----- Helpers -----\r\n\r\n/**\r\n * Aguarda um tempo especifico\r\n */\r\nconst sleep = (ms: number): Promise<void> => new Promise(resolve => setTimeout(resolve, ms));\r\n\r\n/**\r\n * Faz upload de uma unica pasta usando a API existente\r\n */\r\nconst uploadSinglePasta = async (pasta: PastaParaUpload): Promise<SingleUploadResult> => {\r\n  try {\r\n    const formData = new FormData();\r\n    formData.append('titulo', pasta.titulo?.trim() || pasta.nomePasta || '');\r\n    formData.append('compositor', pasta.compositor?.trim() || '');\r\n    formData.append('arranjador', pasta.arranjador?.trim() || '');\r\n    formData.append('categoria', pasta.categoria || '');\r\n    formData.append('ano', pasta.ano || '');\r\n    formData.append('total_arquivos', pasta.arquivos.length.toString());\r\n\r\n    pasta.arquivos.forEach((item, index) => {\r\n      formData.append(`arquivo_${index}`, item.file);\r\n      formData.append(`instrumento_${index}`, item.instrumento);\r\n    });\r\n\r\n    const result = await API.uploadPastaPartitura(formData);\r\n    return { success: true, result };\r\n  } catch (error: unknown) {\r\n    const message = error instanceof Error ? error.message : 'Erro desconhecido';\r\n    return { success: false, error: message };\r\n  }\r\n};\r\n\r\n/**\r\n * Faz upload de uma pasta com retry\r\n */\r\nconst uploadWithRetry = async (\r\n  pasta: PastaParaUpload,\r\n  maxAttempts = 2,\r\n  retryDelay = 1000\r\n): Promise<RetryUploadResult> => {\r\n  let attempts = 0;\r\n  let lastError: string | undefined;\r\n\r\n  while (attempts < maxAttempts) {\r\n    attempts++;\r\n    const result = await uploadSinglePasta(pasta);\r\n\r\n    if (result.success) {\r\n      return { ...result, attempts };\r\n    }\r\n\r\n    lastError = result.error;\r\n\r\n    // Nao faz retry na ultima tentativa\r\n    if (attempts < maxAttempts) {\r\n      await sleep(retryDelay);\r\n    }\r\n  }\r\n\r\n  return { success: false, error: lastError, attempts };\r\n};\r\n\r\n/**\r\n * Divide array em chunks\r\n */\r\nconst chunkArray = <T>(array: T[], size: number): T[][] => {\r\n  const chunks: T[][] = [];\r\n  for (let i = 0; i < array.length; i += size) {\r\n    chunks.push(array.slice(i, i + size));\r\n  }\r\n  return chunks;\r\n};\r\n\r\n// ----- Public API -----\r\n\r\n/**\r\n * Faz upload de um lote de pastas em chunks\r\n */\r\nexport const uploadLote = async (\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  pastas: any[],\r\n  options: UploadOptions = {},\r\n  config: UploadConfig = {}\r\n): Promise<UploadResultados> => {\r\n  const {\r\n    onPastaStart,\r\n    onPastaComplete,\r\n    onPastaError,\r\n    onChunkComplete,\r\n    onProgress\r\n  } = options;\r\n\r\n  const {\r\n    chunkSize = DEFAULT_CONFIG.chunkSize,\r\n    delayBetweenChunks = DEFAULT_CONFIG.delayBetweenChunks,\r\n    retryAttempts = DEFAULT_CONFIG.retryAttempts,\r\n    retryDelay = DEFAULT_CONFIG.retryDelay\r\n  } = config;\r\n\r\n  // Filtra apenas pastas selecionadas\r\n  const pastasParaUpload = pastas.filter(p => p.selecionada);\r\n  const total = pastasParaUpload.length;\r\n\r\n  if (total === 0) {\r\n    return {\r\n      resultados: [],\r\n      estatisticas: {\r\n        total: 0,\r\n        sucesso: 0,\r\n        erro: 0,\r\n        tempoTotal: 0,\r\n        tempoMedio: 0\r\n      }\r\n    };\r\n  }\r\n\r\n  // Divide em chunks\r\n  const chunks = chunkArray(pastasParaUpload, chunkSize);\r\n  const resultados: UploadResultado[] = [];\r\n  let processadas = 0;\r\n  let sucessos = 0;\r\n  let erros = 0;\r\n  const startTime = Date.now();\r\n\r\n  // Processa cada chunk\r\n  for (let chunkIndex = 0; chunkIndex < chunks.length; chunkIndex++) {\r\n    const chunk = chunks[chunkIndex];\r\n\r\n    // Processa cada pasta do chunk (sequencialmente para nao sobrecarregar)\r\n    for (const pasta of chunk) {\r\n      // Notifica inicio\r\n      if (onPastaStart) {\r\n        onPastaStart({ pasta, processadas, total });\r\n      }\r\n\r\n      // Faz upload com retry\r\n      const resultado = await uploadWithRetry(pasta, retryAttempts, retryDelay);\r\n\r\n      // Registra resultado\r\n      resultados.push({\r\n        pastaId: pasta.id,\r\n        titulo: pasta.titulo,\r\n        caminho: pasta.caminho,\r\n        ...resultado\r\n      });\r\n\r\n      processadas++;\r\n\r\n      if (resultado.success) {\r\n        sucessos++;\r\n        if (onPastaComplete) {\r\n          onPastaComplete({ pasta, resultado, processadas, total });\r\n        }\r\n      } else {\r\n        erros++;\r\n        if (onPastaError) {\r\n          onPastaError({ pasta, error: resultado.error, processadas, total });\r\n        }\r\n      }\r\n\r\n      // Atualiza progresso geral\r\n      if (onProgress) {\r\n        onProgress({\r\n          processadas,\r\n          total,\r\n          percentual: Math.round((processadas / total) * 100),\r\n          sucessos,\r\n          erros,\r\n          pastaAtual: pasta.titulo\r\n        });\r\n      }\r\n    }\r\n\r\n    // Notifica fim do chunk\r\n    if (onChunkComplete) {\r\n      onChunkComplete({\r\n        chunkIndex,\r\n        totalChunks: chunks.length,\r\n        processadas,\r\n        total\r\n      });\r\n    }\r\n\r\n    // Delay entre chunks (exceto no ultimo)\r\n    if (chunkIndex < chunks.length - 1) {\r\n      await sleep(delayBetweenChunks);\r\n    }\r\n  }\r\n\r\n  const tempoTotal = Date.now() - startTime;\r\n\r\n  return {\r\n    resultados,\r\n    estatisticas: {\r\n      total,\r\n      sucesso: sucessos,\r\n      erro: erros,\r\n      tempoTotal,\r\n      tempoMedio: Math.round(tempoTotal / total)\r\n    }\r\n  };\r\n};\r\n\r\n/**\r\n * Calcula estimativa de tempo para o upload\r\n */\r\nexport const estimarTempo = (totalPastas: number, totalArquivos?: number): { tempoEstimado: number; tempoFormatado: string } => {\r\n  // Estimativa: ~2s por pasta + ~0.5s por arquivo\r\n  const tempoEstimado = (totalPastas * 2000) + ((totalArquivos || 0) * 500);\r\n\r\n  // Formata para exibicao\r\n  const segundos = Math.ceil(tempoEstimado / 1000);\r\n  let tempoFormatado: string;\r\n\r\n  if (segundos < 60) {\r\n    tempoFormatado = `~${segundos} segundos`;\r\n  } else {\r\n    const minutos = Math.ceil(segundos / 60);\r\n    tempoFormatado = `~${minutos} minuto${minutos > 1 ? 's' : ''}`;\r\n  }\r\n\r\n  return { tempoEstimado, tempoFormatado };\r\n};\r\n\r\n/**\r\n * Formata duracao em milissegundos para string legivel\r\n */\r\nexport const formatarDuracao = (ms: number): string => {\r\n  const segundos = Math.floor(ms / 1000);\r\n  const minutos = Math.floor(segundos / 60);\r\n  const segsRestantes = segundos % 60;\r\n\r\n  if (minutos > 0) {\r\n    return `${minutos}m ${segsRestantes}s`;\r\n  }\r\n  return `${segundos}s`;\r\n};\r\n\r\nexport interface ResumoUpload {\r\n  mensagem: string;\r\n  tipo: 'success' | 'partial' | 'error';\r\n  percentualSucesso: number;\r\n  duracao: string;\r\n}\r\n\r\n/**\r\n * Gera resumo do upload para exibicao\r\n */\r\nexport const gerarResumo = (estatisticas: { total?: number; sucesso: number; erro: number; tempoTotal?: number }): ResumoUpload => {\r\n  const total = estatisticas.total ?? (estatisticas.sucesso + estatisticas.erro);\r\n  const { sucesso, erro } = estatisticas;\r\n  const tempoTotal = estatisticas.tempoTotal ?? 0;\r\n  const percentualSucesso = total > 0 ? Math.round((sucesso / total) * 100) : 0;\r\n\r\n  return {\r\n    mensagem: erro === 0\r\n      ? `${sucesso} partitura${sucesso !== 1 ? 's' : ''} enviada${sucesso !== 1 ? 's' : ''} com sucesso!`\r\n      : `${sucesso} de ${total} partitura${total !== 1 ? 's' : ''} enviada${sucesso !== 1 ? 's' : ''} (${erro} erro${erro !== 1 ? 's' : ''})`,\r\n    tipo: erro === 0 ? 'success' : (sucesso > 0 ? 'partial' : 'error'),\r\n    percentualSucesso,\r\n    duracao: formatarDuracao(tempoTotal)\r\n  };\r\n};\r\n"],"names":[],"mappings":"wDAMA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OCJA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAmGA,IAAI,EAAY,EAaH,EAA2B,MAAO,EAAwB,EAAO,EAAE,IAC9E,IAAM,EAAsB,EAAE,CAE9B,GAAI,EAAM,MAAM,CAAE,CAChB,IAAM,EAAO,MAAM,IAAI,QAAc,AAAC,GAAa,EAA8B,IAAI,CAAC,IACtF,EAAQ,IAAI,CAAC,MACX,EACA,KAAM,EAAO,EAAK,IAAI,CACtB,SAAU,CACZ,EACF,MAAO,GAAI,EAAM,WAAW,CAAE,CAC5B,IAAM,EAAU,EAAmC,YAAY,GAgB/D,IAAK,IAAM,KAfK,MAAM,GAeG,CAfC,QAA2B,AAAC,IACpD,IAAM,EAAgC,EAAE,CAClC,EAAc,KAClB,EAAO,WAAW,CAAC,AAAC,IACG,GAAG,CAApB,EAAM,MAAM,CACd,EAAQ,IAER,EAAW,IAAI,IAAI,GACnB,IAEJ,EACF,EACA,GACF,EAAA,EAEkC,CAChC,IAAM,EAAe,MAAM,EACzB,EACA,EAAO,EAAM,IAAI,CAAG,KAEtB,EAAQ,IAAI,IAAI,EAClB,CACF,CAEA,OAAO,CACT,EAKa,EAAqB,AAAC,IACjC,IAAM,EAAS,IAAI,IAKnB,IAAK,IAAM,KAFM,EAAM,KAEA,CAFM,CAAC,GAAK,EAAE,IAAI,CAAC,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,SAErC,CAI/B,IAAM,EAFiB,AAEL,CAFM,EAAS,IAAI,EAAI,EAAA,CAAE,CAAE,OAAO,CAAC,MAAO,KAE3B,KAAK,CAAC,KACvC,EAAU,GAAG,GACb,CADiB,GACX,EAAa,EAAU,IAAI,CAAC,IAE9B,CAAC,EAAO,GAAG,CAAC,IAH4B,AAI1C,EAAO,GAAG,CAAC,EAAY,CADI,CACF,EAE3B,EAAO,GAAG,CAAC,GAAa,IAAI,CAAC,EAC/B,CAEA,OAAO,CACT,EAuDa,EAAgB,CAC3B,EACA,EACA,EAA0B,EAAE,CAC5B,EAAkC,EAAE,IAIpC,IAAM,EAAqB,AAAC,IAAc,EAAA,CAAE,CAAE,OAAO,CAAC,MAAO,KACvD,EAAY,EAAmB,KAAK,CAAC,KAAK,MAAM,CAAC,GAAK,EAAE,IAAI,IAC5D,EAAY,CAAS,CAAC,EAAU,MAAM,CAAG,EAAE,EAAI,iBAG/C,EAAY,CAAA,EAAA,EAAA,iBAAA,AAAiB,EAAC,EAAoB,EAAW,GAG7D,EAAsB,EAAM,GAAG,CAAC,CAAC,MAAE,CAAI,CAAE,IAC7C,GAAM,aAAE,CAAW,aAAE,CAAW,CAAE,CAAG,CAAA,EAAA,EAAA,kBAAA,AAAkB,EAAC,EAAK,IAAI,EACjE,MAAO,MACL,EACA,aAAc,EAAK,IAAI,aACvB,cACA,CACF,CACF,GAGM,EAAmB,CACvB,EAAA,EAAI,AAzJN,IACO,CAAC,MAAM,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,EAAU,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,MAAM,CAAC,EAAG,GAAA,CAAI,EAyJlF,QAAS,YACT,EACA,OAAQ,EAAU,MAAM,CACxB,UAAW,EAAU,SAAS,EAAI,GAClC,mBAAoB,EAAU,kBAAkB,CAChD,eAAgB,EAAU,cAAc,CACxC,WAAY,EAAU,UAAU,CAChC,WAAY,EAAU,UAAU,UAChC,EACA,aAAa,EACb,OAAQ,QACR,aAAc,KACd,WAAW,CACb,EAGM,QAAE,CAAM,QAAE,CAAM,WAAE,CAAS,CAAE,CA/FZ,AA+Fe,EA9FtC,EACA,EAAkC,EAAE,IAEpC,GAAM,UAAE,CAAQ,WAAE,CAAS,QAAE,CAAM,CAAE,CAAG,EAGxC,GAAI,CAAC,GAAgC,GAAG,CAAvB,EAAS,MAAM,CAC9B,MAAO,CAAE,OAAQ,UAAW,OAAQ,gCAAiC,WAAW,CAAM,EAGxF,GAAI,CAAC,GAA4B,IAAI,CAAtB,EAAO,IAAI,GACxB,MAAO,CAAE,OAAQ,UAAW,OAAQ,uBAAwB,WAAW,CAAM,EAI/E,GAAM,WAAE,CAAS,CAAE,CAAG,CAtHU,CAAC,EAAgB,EAAkC,EAAE,IACrF,GAAI,CAAC,GAA0C,GAAG,CAAnC,EAAqB,MAAM,CACxC,MAAO,CAAE,WAAW,EAAO,mBAAoB,IAAK,EAGtD,IAAM,EAAa,CAAA,EAAA,EAAA,eAAA,AAAe,EAAC,GAEnC,IAAK,IAAM,KAAa,EAGtB,GAAI,IADwB,CAAA,EAAA,EAAA,MACT,CAHyB,QAEhB,AAAe,EAAC,EAAE,MAAM,EAAI,AAChB,IACtC,MAAO,CAAE,UAAW,GAAM,mBAHlB,CAGsC,AAAE,EAIpD,MAAO,CAAE,UAAW,GAAO,mBAAoB,IAAK,EACtD,EAsG2C,EAAQ,GACjD,GAAI,EACF,MAAO,CACL,EAFW,KAEH,UACR,OAAQ,sBACR,WAAW,CACb,EAIF,IAAM,EAAkB,EAAS,MAAM,CAAC,GAAK,CAAC,EAAE,WAAW,EAAE,MAAM,CAC7D,EAAgB,EAAS,MAAM,QAIrC,AAAK,EAH6B,AAO9B,EAJA,AAHgD,EAAiB,IAOtC,CAJf,EAKP,CAD0B,AACxB,OAAQ,YAAa,OAAQ,CAAA,EAAG,EAAgB,IAAI,EAAE,EAAc,8BAA8B,CAAC,CAAE,WAAW,CAAM,EAG7H,EAAkB,EACb,CADgB,AACd,OAAQ,YAAa,OAAQ,CAAA,EAAG,EAAgB,kCAAkC,CAAC,CAAE,WAAW,CAAM,EAI1G,CAAE,OAAQ,QAAS,OAAQ,KAAM,WAAW,CAAM,EAZhD,CAAE,OAAQ,YAAa,OAAQ,0BAA2B,WAAW,CAAM,CAatF,GAkDyD,EAAW,GAKlE,OAJA,EAAU,MAAM,CAAG,EACnB,EAAU,YAAY,CAAG,EACzB,EAAU,SAAS,CAAG,EAEf,CACT,EAKM,EAAuB,AAAC,GACrB,EAAO,MAAM,CAAC,CAAC,EAAK,KACzB,EAAI,KAAK,GACY,UAAjB,EAAM,MAAM,CAAc,EAAI,OAAO,GACf,cAAjB,EAAM,MAAM,CAAkB,EAAI,OAAO,GACxB,YAAjB,EAAM,MAAM,EAAgB,EAAI,SAAS,GAElD,EAAI,aAAa,EAAI,EAAM,QAAQ,CAAC,MAAM,CAC1C,EAAI,wBAAwB,EAAI,EAAM,QAAQ,CAAC,MAAM,CAAC,GAAK,EAAE,WAAW,EAAE,MAAM,CAChF,EAAI,2BAA2B,EAAI,EAAM,QAAQ,CAAC,MAAM,CAAC,GAAK,CAAC,EAAE,WAAW,EAAE,MAAM,CAE7E,GACN,CACD,MAAO,EACP,QAAS,EACT,QAAS,EACT,UAAW,EACX,cAAe,EACf,yBAA0B,EAC1B,4BAA6B,CAC/B,GAOW,EAAgB,MAC3B,EACA,EAA0B,EAAE,CAC5B,EAAkC,EAAE,CACpC,EAAoD,IAAI,IAExD,IAAM,EAAuB,EAAE,CAG/B,GAAI,MAAM,OAAO,CAAC,GAEhB,IAAK,CAFmB,GAEb,KAAS,EAAO,CACzB,IAAM,EAAQ,MAAM,EAAyB,EAAO,IACpD,EAAS,IAAI,IAAI,EACnB,MAGA,IAAK,IAAI,EAAI,EAAG,EAAI,EAAM,MAAM,CAAE,IAAK,CACrC,IAAM,EAAQ,CAAK,CAAC,EAAE,CAAC,gBAAgB,KACvC,GAAI,EAAO,CACT,IAAM,EAAQ,MAAM,EAAyB,EAAO,IACpD,EAAS,IAAI,IAAI,EACnB,CACF,CAIF,IAAM,EAAS,EAAmB,GAC5B,EAAc,EAAO,IAAI,CAC3B,EAAc,EAGZ,EAAkB,EAAE,CAC1B,IAAK,GAAM,CAAC,EAAY,EAAM,GAAI,EAAQ,CACxC,IAAM,EAAiB,EAAc,EAAY,EAAO,EAAY,GACpE,EAAO,IAAI,CAAC,GACZ,IAEI,GACF,EAAW,OADG,MAEZ,EACA,MAAO,EACP,WAAY,KAAK,KAAK,CAAE,EAAc,EAAe,KACrD,WAAY,CACd,EAEJ,CAGA,IAAM,EAAe,EAAqB,GAE1C,MAAO,QAAE,eAAQ,CAAa,CAChC,EAKa,EAAoB,MAC/B,EACA,EAA0B,EAAE,CAC5B,EAAkC,EAAE,CACpC,EAAoD,IAAI,IAWxD,IAAM,EAAS,EAAmB,AATR,MAAM,IAAI,CAAC,GAClC,MAAM,CAAC,GAAK,EAAE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,SAC1C,GAAG,CAAC,IAAK,AAAC,CACT,KAAM,EACN,KAAM,EAAE,kBAAkB,EAAI,EAAE,IAAI,CACpC,SAAU,EAAE,kBAAkB,CAAG,EAAE,kBAAkB,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC,EAAG,CAAC,GAAG,IAAI,CAAC,KAAO,GAC5F,CAAC,EAGqC,GAAG,CAAC,IAAK,AAAC,CAAE,GAAG,CAAC,CAAE,KAAM,EAAE,IAAI,CAAC,CAAC,GAClE,EAAc,EAAO,IAAI,CAC3B,EAAc,EAGZ,EAAkB,EAAE,CAC1B,IAAK,GAAM,CAAC,EAAY,EAAY,GAAI,EAAQ,CAC9C,IAAM,EAAiB,EAAc,EAAY,EAAa,EAAY,GAC1E,EAAO,IAAI,CAAC,GACZ,IAEI,GACF,EAAW,CACT,MAFY,QAGZ,MAAO,EACP,WAAY,KAAK,KAAK,CAAE,EAAc,EAAe,KACrD,WAAY,CACd,EAEJ,CAGA,IAAM,EAAe,EAAqB,GAE1C,MAAO,QAAE,eAAQ,CAAa,CAChC,ECxTM,EAAQ,AAAC,GAA8B,IAAI,QAAQ,GAAW,WAAW,EAAS,IAKlF,EAAoB,MAAO,IAC/B,GAAI,CACF,IAAM,EAAW,IAAI,SACrB,EAAS,MAAM,CAAC,SAAU,EAAM,MAAM,EAAE,QAAU,EAAM,SAAS,EAAI,IACrE,EAAS,MAAM,CAAC,aAAc,EAAM,UAAU,EAAE,QAAU,IAC1D,EAAS,MAAM,CAAC,aAAc,EAAM,UAAU,EAAE,QAAU,IAC1D,EAAS,MAAM,CAAC,YAAa,EAAM,SAAS,EAAI,IAChD,EAAS,MAAM,CAAC,MAAO,EAAM,GAAG,EAAI,IACpC,EAAS,MAAM,CAAC,iBAAkB,EAAM,QAAQ,CAAC,MAAM,CAAC,QAAQ,IAEhE,EAAM,QAAQ,CAAC,OAAO,CAAC,CAAC,EAAM,KAC5B,EAAS,MAAM,CAAC,CAAC,QAAQ,EAAE,EAAA,CAAO,CAAE,EAAK,IAAI,EAC7C,EAAS,MAAM,CAAC,CAAC,YAAY,EAAE,EAAA,CAAO,CAAE,EAAK,WAAW,CAC1D,GAEA,IAAM,EAAS,MAAM,EAAA,GAAG,CAAC,oBAAoB,CAAC,GAC9C,MAAO,CAAE,SAAS,SAAM,CAAO,CACjC,CAAE,MAAO,EAAgB,CAEvB,MAAO,CAAE,QAAS,GAAO,MADT,CACgB,YADC,MAAQ,EAAM,OAAO,CAAG,mBACjB,CAC1C,CACF,EAKM,EAAkB,MACtB,EACA,EAAc,CAAC,CACf,EAAa,GAAI,IAEjB,IACI,EADA,EAAW,EAGf,KAAO,EAAW,GAAa,CAC7B,IACA,IAAM,EAAS,MAAM,EAAkB,GAEvC,GAAI,EAAO,OAAO,CAChB,CADkB,KACX,CAAE,GAAG,CAAM,UAAE,CAAS,EAG/B,EAAY,EAAO,KAAK,CAGpB,EAAW,GACb,MAAM,EAAM,EADc,AAG9B,CAEA,MAAO,CAAE,SAAS,EAAO,MAAO,WAAW,CAAS,CACtD,EAkBa,EAAa,MAExB,CADA,CAEA,EAAyB,CAAC,CAAC,CAC3B,EAAuB,CAAC,CAAC,IAEzB,GAAM,cACJ,CAAY,iBACZ,CAAe,CACf,WAR4D,GAQhD,iBACZ,CAAe,YACf,CAAU,CACX,CAAG,EAEE,WACJ,EApGS,CAoG2B,SAAxB,WACZ,EApGkB,EAmGS,CAC2B,eACtD,CADqB,CAnGR,CAoG+B,YAC5C,CAFoC,AACpB,CAnGN,GAoG4B,CACvC,CAAG,AArGa,EAwGX,EAAmB,EAAO,AAJjB,GADkB,GAKK,CAAC,GAAK,EAAE,GAJhB,QAI2B,EACnD,AAzG0C,EAyGlC,EAAiB,MAAM,CAErC,GAAc,GAAG,CAAb,EACF,MAAO,CACL,WAAY,EAAE,CACd,aAAc,CACZ,MAAO,EACP,QAAS,EACT,KAAM,EACN,WAAY,EACZ,WAAY,CACd,CACF,EAIF,IAAM,EAAS,AApDE,EAAI,EAAY,KACjC,IAAM,EAAgB,EAAE,CACxB,IAAK,IAAI,EAAI,EAAG,EAAI,EAAM,MAAM,CAAE,GAAK,EACrC,EAAO,CADoC,GAChC,CAAC,EAAM,KAAK,CAAC,EAAG,EAAI,IAEjC,OAAO,CACT,GA8C4B,EAAkB,GACtC,EAAgC,EAAE,CACpC,EAAc,EACd,EAAW,EACX,EAAQ,EACN,EAAY,KAAK,GAAG,GAG1B,IAAK,IAAI,EAAa,EAAG,EAAa,EAAO,MAAM,CAAE,IAAc,CAIjE,IAAK,IAAM,KAHG,CAAM,CAAC,EAAW,AAGZ,CAAO,CAErB,GACF,EAAa,OAAE,EADC,YACM,QAAa,CAAM,GAI3C,IAAM,EAAY,MAAM,EAAgB,EAAO,EAAe,GAG9D,EAAW,IAAI,CAAC,CACd,QAAS,EAAM,EAAE,CACjB,OAAQ,EAAM,MAAM,CACpB,QAAS,EAAM,OAAO,CACtB,GAAG,CAAS,AACd,GAEA,IAEI,EAAU,OAAO,EAAE,AACrB,IACI,GACF,EAAgB,OAAE,KADC,OACM,cAAW,EAAa,OAAM,KAGzD,IACI,GACF,EAAa,OAAE,EADC,AACM,MAAO,EAAU,KAAK,aAAE,QAAa,CAAM,IAKjE,GACF,EAAW,OADG,MAEZ,QACA,EACA,WAAY,KAAK,KAAK,CAAE,EAAc,EAAS,cAC/C,QACA,EACA,WAAY,EAAM,MAAM,AAC1B,EAEJ,CAGI,GACF,EAAgB,YADG,AAEjB,EACA,YAAa,EAAO,MAAM,aAC1B,QACA,CACF,GAIE,EAAa,EAAO,MAAM,CAAG,GAAG,AAClC,MAAM,EAAM,EAEhB,CAEA,IAAM,EAAa,KAAK,GAAG,GAAK,EAEhC,MAAO,YACL,EACA,aAAc,OACZ,EACA,QAAS,EACT,KAAM,aACN,EACA,WAAY,KAAK,KAAK,CAAC,EAAa,EACtC,CACF,CACF,IF7Ra,cACA,cACD,aACF,WACG,cACD,4BAuEgB,CAAC,QAC3B,CAAM,SACN,CAAO,CACP,WAAS,mBACT,CAAiB,gBACjB,CAAc,CACW,IACzB,IA0mBoB,EACA,EAwuBA,IAn1Cd,WAAE,CAAS,CAAE,CAAG,CAAA,EAAA,EAAA,KAAA,AAAK,IAGrB,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAa,GACnD,CAAC,EAAY,CAD6C,CAC/B,CAAG,CAAA,EAAA,EAAA,EADqC,MAC7B,AAAR,EAAsB,EAAE,EAGtD,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAU,EAAE,EAC1C,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAsB,MAChE,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAkB,CACtE,YAAa,EACb,MAAO,EACP,WAAY,CACd,GACM,CAAC,EAAsB,EAAwB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAY,EAAE,EAGxE,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,KAAK,EAClD,CADqD,AACpD,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAG9D,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAiB,CACnE,YAAa,EACb,MAAO,EACP,WAAY,EACZ,WAAY,EACd,GACM,CAAC,EAAkB,EAAoB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAA0B,MAC5E,CAAC,EAAkB,EAAoB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,GAGnD,EAAe,CACnB,qCACA,6CACA,wCACA,yDACA,+CACA,6CACA,kDACA,kCACA,gDACA,6CACA,kDACA,+CACA,iCACA,+CACA,+CACA,0CACD,CAGK,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACvC,EAAe,CAAA,EAAA,EAAA,MAAA,AAAM,EAAmB,MACxC,EAAqB,CAAA,EAAA,EAAA,MAAA,AAAM,EAAuC,MAYxE,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IAAM,EAAW,UACf,GAAI,CACF,GAAM,CAAC,EAAM,EAAW,CAAG,MAAM,QAAQ,GAAG,CAAC,CAAC,EAAA,GAAG,CAAC,aAAa,GAAI,EAAA,GAAG,CAAC,aAAa,GAAG,EACvF,EAAc,GAAQ,EAAE,EACxB,EAAwB,GAAc,EAAE,CAC1C,CAAE,KAAM,CAER,CACF,EACI,GAAQ,GACd,EAAG,CAAC,EAAO,EAGX,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACH,IACgC,IADxB,EAC8B,CAArC,EAAmB,OAAO,GAC5B,aAAa,EAAmB,OAAO,EACvC,EAAmB,OAAO,CAAG,MAE/B,KACA,EAAU,EAAE,EACZ,EAAgB,CAFF,KAGd,EAHqB,AAGF,CAAE,QAHS,IAGI,EAAG,MAAO,EAAG,WAAY,CAAE,GAC7D,EAhKC,OAiKD,EAAkB,EADL,IAEb,CAFkB,CAEA,CAAE,CAFC,WAEY,EAAG,MAAO,EAAG,WAAY,EAAG,WAAY,EAAG,GAC5E,EAAoB,MACpB,EAAoB,GAExB,EAAG,CAAC,EAAO,EAGX,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GAAI,MAAiC,CACnC,IAAM,EAAW,EADA,OAAO,GACK,KAC3B,CAF+B,CAEX,AAAC,GAAS,CAAC,GAAO,CAAC,CAAI,EAAa,MAAM,CAChE,EAAG,MACH,MAAO,IAAM,cAAc,EAC7B,CACF,EAAG,CAAC,EAAY,EAAa,MAAM,CAAC,EAGpC,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAoCR,CAnC4B,UAC1B,GAAI,AAAC,GAAW,GAA4C,IAA7C,AAAmB,EAAe,MAAM,EAAgC,GAAG,CAAzB,EAAW,MAAM,EAC9E,OAEJ,KAEA,GAAI,AAJe,CAKjB,GAAM,CAAE,CAHI,CAFY,KAKR,CAHG,AAGa,CAAE,EALD,EAAE,IAEP,KAGoB,CAAK,CAAE,CAAG,MAAM,EAC9D,EACA,EACA,EACA,GAGF,GAAgC,IAA5B,EAAiB,MAAM,CAAQ,CACjC,EAAU,oCAAqC,SAC/C,KACA,MACF,CAEA,EAAU,AAJM,GAKhB,EAAgB,EALO,CAOvB,KACA,EAAmB,CARa,MAQN,AADZ,CACe,MADR,KACmB,GADX,EAE3B,EAAmB,OAAO,CAAG,KAC7B,IACF,EAAG,KACL,CAAE,EAFgB,IAET,EAAK,CACZ,AAHuB,MAAM,EAGrB,KAAK,CAAC,mBAAoB,GAClC,EAAU,0BAA2B,SACrC,IACF,EACF,IAIF,EAAG,CAAC,CANgB,CAMR,EAAgB,EAAY,EANb,AAMkC,EAsB7D,IAAM,EAAa,CA5BiB,KA4BV,IACxB,EAAE,cAAc,GAChB,EAAE,eAAe,GACjB,GAAc,GAEd,IAAM,EAAQ,EAAE,YAAY,CAAC,KAAK,CAClC,GAAI,AAAC,GAA0B,GAAG,CAApB,EAAM,MAAM,EAE1B,KAEA,GAAI,CACF,GAAM,CAAE,CAHI,MAGI,CAHG,AAGa,CAAE,QAHN,KAGoB,CAAK,CAAE,CAAG,MAAM,EAC9D,EACA,EACA,EACA,GAGF,GAAgC,IAA5B,EAAiB,MAAM,CAAQ,CACjC,EAAU,oCAAqC,SAC/C,KACA,MACF,CAEA,EAJgB,AAIN,GACV,EAAgB,EALO,CAOvB,KACA,GARgC,MAOlB,EACH,KADU,AAEnB,IACF,EAAG,EAH0B,GAI/B,CAAE,EAFgB,IAET,EAAK,CAFW,AAGvB,MAH6B,EAGrB,KAAK,CAAC,mBAAoB,GAClC,EAAU,0BAA2B,SACrC,IACF,EACF,EAGM,EAAmB,IALP,EAKc,IAC9B,CANuB,GAMjB,EAAW,EAAE,EANa,IAMP,CAAC,KAAK,CAC/B,GAAI,AAAC,GAAgC,GAAG,CAAvB,EAAS,MAAM,EAEhC,KAEA,GAAI,CACF,GAAM,CAAE,CAHI,MAGI,CAHG,AAGa,CAAE,QAHN,KAGoB,CAAK,CAAE,CAAG,MAAM,EAC9D,EACA,EACA,EACA,GAGF,GAAgC,IAA5B,EAAiB,MAAM,CAAQ,CACjC,EAAU,oCAAqC,SAC/C,KACA,MACF,CAEA,EAJgB,AAIN,GACV,EAAgB,EALO,CAOvB,KACA,GARgC,MAOlB,EACH,KADU,AAEnB,IACF,EAAG,EAH0B,GAI/B,CAAE,EAFgB,IAET,EAAK,CACZ,AAHuB,MAAM,EAGrB,KAAK,CAAC,mBAAoB,GAClC,EAAU,0BAA2B,SACrC,IACF,EACF,EAGM,EAAyB,CAAA,EAAA,CALb,CAKa,MALN,KAKM,AAAW,EAAC,AAAC,EALV,EAMhC,EAAU,AAAC,GAAS,EAAK,GAAG,CAAE,AAAD,GAAQ,EAAE,EAAE,GAAK,EAAU,CAAE,GAAG,CAAC,CAAE,YAAa,CAAC,EAAE,WAAW,AAAC,EAAI,GAClG,EAAG,EAAE,EAGC,EAAc,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,AAAC,IAC/B,EAAU,AAAC,GAAS,EAAK,GAAG,CAAE,AAAD,GAAQ,CAAD,CAAG,GAAG,CAAC,CAAE,YAAa,EAAW,CAAC,EACxE,EAAG,EAAE,EAGC,GAAkB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,CAAC,EAAiB,KACpD,EAAU,AAAC,GACT,EAAK,GAAG,CAAC,AAAC,IACR,GAAI,EAAE,EAAE,GAAK,EAAS,OAAO,EAE7B,IAAM,EAAa,CAAE,GAAG,CAAC,CAAE,UAAW,CAAc,EAOpD,OALI,GAA8B,cAAb,EAAE,MAAM,EAAuC,2BAA2B,CAA9C,EAAE,YAAY,GAC7D,EAAW,MAAM,CAAG,QACpB,EAAW,YAAY,CAAG,MAGrB,CACT,GAEJ,EAAG,EAAE,EAGC,GAAe,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,CAAC,EAAiB,KACjD,EAAU,AAAC,GAAS,EAAK,GAAG,CAAC,AAAC,GAAO,EAAE,EAAE,GAAK,EAAU,CAAE,GAAG,CAAC,CAAE,OAAQ,CAAW,EAAI,GACzF,EAAG,EAAE,EAGC,GAAmB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,CAAC,EAAiB,KACrD,EAAW,AAAD,GAAU,EAAK,GAAG,CAAC,AAAC,GAAO,EAAE,EAAE,GAAK,EAAU,CAAE,GAAG,CAAC,CAAE,WAAY,CAAe,EAAI,GACjG,EAAG,EAAE,EAGC,GAAmB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,CAAC,EAAiB,KACrD,EAAW,AAAD,GAAU,EAAK,GAAG,CAAC,AAAC,GAAO,EAAE,EAAE,GAAK,EAAU,CAAE,GAAG,CAAC,CAAE,WAAY,CAAe,EAAI,GACjG,EAAG,EAAE,EAGC,GAAgB,UACpB,IAAM,EAAmB,EAAO,MAAM,CAAC,AAAC,GAAM,EAAE,WAAW,EAAiB,YAAb,EAAE,MAAM,EAEvE,GAAgC,IAA5B,EAAiB,MAAM,CAAQ,YACjC,EAAU,4CAA6C,SAIzD,KACA,EAAkB,CAAE,MADN,MACmB,CADZ,CACe,MAAO,EADb,AAC8B,MAAM,CAAE,WAAY,EAAG,WAAY,EAAG,GAElG,GAAI,CACF,GAAM,YAAE,CAAU,CAAE,aAAc,CAAK,CAAE,CAAG,MAAM,EAAW,EAAkB,CAC7E,WAAY,EACZ,aAAc,CAAC,OAAE,CAAK,OAAE,CAAK,CAAoC,IAC/D,QAAQ,KAAK,CAAC,CAAC,kBAAkB,EAAE,EAAM,MAAM,CAAC,CAAC,CAAC,CAAE,EACtD,CACF,GAEA,EAAoB,CAAE,aAAY,aAAc,CAAM,GACtD,KAEI,EAAM,OAFI,AAEG,CAAG,GAAG,AACrB,GAHmB,EAKvB,CAAE,KAL6B,CAKtB,EAAK,CACZ,QAAQ,KAAK,CAAC,kBAAmB,GACjC,EAAU,wBAAyB,SACnC,IACF,CACF,EAWM,GCFN,AAAI,AAAW,IDXG,GCWI,GDE4B,CAbzB,CCYlB,EADsB,AACf,CDCmB,EAbF,GCYX,CAAC,GAAK,EAAE,MAAM,GDCwB,ECDnB,CDIjC,GAAa,CACjB,IAAK,EAAO,MAAM,CAClB,MAAO,EAAO,MAAM,CAAC,AAAC,GAAM,AAAa,YAAX,MAAM,EAAc,MAAM,CACxD,UAAW,EAAO,MAAM,CAAC,AAAC,GAAmB,cAAb,EAAE,MAAM,EAAkB,MAAM,CAChE,QAAS,EAAO,MAAM,CAAC,AAAC,GAAmB,YAAb,EAAE,MAAM,EAAgB,MAAM,AAC9D,EAGM,GAAqB,EAAO,MAAM,CAAC,AAAC,GAAM,EAAE,WAAW,EAAiB,YAAb,EAAE,MAAM,SAEzE,AAAK,EAGH,CAAA,CAHE,CAGF,EAAA,CAHW,EAGX,EAAC,MAAA,CACC,QAAS,EACT,MAAO,CACL,SAAU,QACV,IAAK,EACL,KAAM,EACN,MAAO,EACP,OAAQ,EACR,WAAY,kBACZ,eAAgB,YAChB,QAAS,OACT,WAAY,SACZ,eAAgB,SAChB,OAAQ,IACR,QAAS,MACX,WAEA,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,QAAS,AAAC,GAAM,EAAE,eAAe,GACjC,MAAO,CACL,WAAY,iBACZ,aAAc,OACd,MAAO,OACP,SAAU,MAA+B,QAAU,CAA1B,OACzB,AADgC,MAAM,IAC3B,OACX,QAAS,OACT,cAAe,SACf,SAAU,SACV,WAAY,mBACZ,WAAY,qBACd,YAGA,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,MAAO,CACL,QAAS,OACT,aAAc,0BACd,QAAS,OACT,WAAY,SACZ,eAAgB,eAClB,YAEA,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CACC,MAAO,CACL,SAAU,OACV,WAAY,MACZ,MAAO,sBACP,QAAS,OACT,WAAY,SACZ,IAAK,OACL,aAAc,KAChB,YAEA,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAM,KAAK,OAAO,KAAK,QAAQ,YAAY,KAAK,OAAO,OAAO,UAAU,YAAY,cACvF,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,gFACR,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,uBACJ,wBAGR,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,MAAO,CAAE,SAAU,OAAQ,MAAO,uBAAwB,YAC1D,OAAmC,QAApB,OAAO,SAAS,uBAC/B,OAAmC,QAApB,OAAO,SAAS,aAC/B,OAAkC,QAAnB,OAAO,MACtB,EAD8B,KAE7B,CAAA,EAAG,GAAW,EADA,CACG,CAAC,KADG,KACO,CADD,CACsB,IAAnB,GAAW,GAAG,CAAS,IAAM,GAAG,UAAU,EAAqB,IAAnB,GAAW,GAAG,CAAS,IAAM,GAAA,CAAI,CAC5G,OAAmC,QAApB,OAAO,SAAS,CAC/B,OAAkC,QAAnB,OAAO,QAAQ,IAKnC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,MAAO,CACL,WAAY,OACZ,OAAQ,OACR,MAAO,wBACP,OAAQ,UACR,QAAS,MACT,aAAc,MACd,WAAY,UACd,EACA,aAAc,AAAC,GAAO,EAAE,aAAa,CAAC,KAAK,CAAC,UAAU,CAAG,oBACzD,aAAc,AAAC,GAAO,EAAE,aAAa,CAAC,KAAK,CAAC,UAAU,CAAG,gBAEzD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAM,KAAK,OAAO,KAAK,QAAQ,YAAY,KAAK,OAAO,OAAO,eAAe,YAAY,cAC5F,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,GAAG,KAAK,GAAG,IAAI,GAAG,IAAI,GAAG,OAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,GAAG,IAAI,GAAG,IAAI,GAAG,KAAK,GAAG,eAMrC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,IAAK,EACL,GAAG,qBACH,KAAK,OACC,gBAAiB,GAAI,UAAW,GACtC,QAAQ,CAAA,CAAA,EACR,SAAU,EACV,MAAO,CAAE,QAAS,MAAO,IAI3B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,MAAO,CACL,KAAM,EACN,SAAU,OACV,QAAS,MACX,YAGC,OACC,CAAA,EAAA,EAAA,GADc,CACd,EAAC,IADoB,EACpB,CACC,MAF4B,EA/YZ,CAiZP,IAhZnB,IAAM,EAAQ,SAAS,cAAc,CAAC,sBAClC,IACF,EAAM,CADG,IACE,CAAG,GACd,EAAM,KAAK,GAEf,EA4YY,YArTY,AAAC,CAqTA,GApTvB,EAAE,cAAc,GAChB,EAAE,eAAe,GACjB,GAAc,EAChB,EAkTY,YAhTY,AAAC,CAgTA,GA/SvB,EAAE,cAAc,GAChB,EAAE,eAAe,GACb,AAAC,EAAE,aAAa,CAAC,QAAQ,CAAC,EAAE,aAAa,GAAW,AACtD,GAAc,EAElB,EA2SY,WAzSW,AAAC,CAySA,GAxStB,EAAE,cAAc,GAChB,EAAE,eAAe,EACnB,EAuSY,OAAQ,EACR,MAAO,CACL,QAAS,QACT,OAAQ,EAAa,qBAAuB,2BAC5C,aAAc,OACd,QAAS,YACT,UAAW,SACX,WAAY,EACR,sFACA,oBACJ,OAAQ,UACR,WAAY,gBACZ,UAAW,EAAa,cAAgB,UAC1C,YAEA,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,MAAO,CACL,MAAO,QACP,OAAQ,QACR,OAAQ,cACR,aAAc,OACd,WAAY,sFACZ,QAAS,OACT,WAAY,SACZ,eAAgB,QAClB,WAEA,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAM,KAAK,OAAO,KAAK,QAAQ,YAAY,KAAK,OAAO,OAAO,UAAU,YAAY,gBACvF,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,gFACR,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,kBAAkB,QAAQ,aAItC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,MAAO,CACL,SAAU,OACV,WAAY,MACZ,MAAO,EAAa,UAAY,sBAChC,aAAc,KAChB,WAEC,EAAa,wBAA0B,gDAG1C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,SAAU,OAAQ,MAAO,wBAAyB,aAAc,MAAO,WAAG,yDAIxF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,MAAO,CACL,QAAS,OACT,IAAK,OACL,eAAgB,SAChB,SAAU,OACV,MAAO,mBACT,YAEA,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,MAAO,CAAE,QAAS,OAAQ,WAAY,SAAU,IAAK,KAAM,YAC/D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAM,KAAK,OAAO,KAAK,QAAQ,YAAY,KAAK,OAAO,OAAO,eAAe,YAAY,aAC5F,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,kFACJ,sBAGR,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,MAAO,CAAE,QAAS,OAAQ,WAAY,SAAU,IAAK,KAAM,YAC/D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAM,KAAK,OAAO,KAAK,QAAQ,YAAY,KAAK,OAAO,OAAO,eAAe,YAAY,aAC5F,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,iEACJ,kBAGR,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,MAAO,CAAE,QAAS,OAAQ,WAAY,SAAU,IAAK,KAAM,YAC/D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAM,KAAK,OAAO,KAAK,QAAQ,YAAY,KAAK,OAAO,OAAO,eAAe,YAAY,cAC5F,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAG,KAAK,EAAE,OAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CAAS,OAAO,wBACb,+BAQb,OACC,CAAA,EAAA,EAAA,GADc,CACd,EAAC,IADoB,EACpB,CAAI,MADyB,AAClB,CAAE,UAAW,SAAU,QAAS,MAAO,YACjD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,MAAO,CACL,MAAO,QACP,OAAQ,QACR,OAAQ,cACR,aAAc,MACd,WAAY,sFACZ,QAAS,OACT,WAAY,SACZ,eAAgB,SAChB,UAAW,qCACb,WAEA,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,MAAM,KACN,OAAO,KACP,QAAQ,YACR,KAAK,OACL,OAAO,UACP,YAAY,MACZ,MAAO,CAAE,UAAW,yBAA0B,YAE9C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAG,KAAK,EAAE,KAAK,cAAc,SAC7C,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,0BAA0B,cAAc,eAIpD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,MAAO,CACL,SAAU,OACV,WAAY,MACZ,MAAO,sBACP,aAAc,KAChB,WACD,2BAID,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,SAAU,OAAQ,MAAO,wBAAyB,aAAc,MAAO,WAClF,EAAgB,KAAK,CAAG,EACrB,CAAC,YAAY,EAAE,EAAgB,KAAK,CAAC,cAAc,CAAC,CACpD,qCAGL,EAAgB,KAAK,CAAG,GACvB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,MAAO,CACL,MAAO,OACP,SAAU,QACV,OAAQ,MACR,WAAY,0BACZ,aAAc,MACd,SAAU,SACV,OAAQ,QACV,WAEA,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,MAAO,CACL,MAAO,CAAA,EAAG,EAAgB,UAAU,CAAC,CAAC,CAAC,CACvC,OAAQ,OACR,WAAY,2CACZ,aAAc,MACd,WAAY,qBACd,SAQT,OAAkC,GACjC,CAAA,EAAA,EADc,AACd,GAAA,EAAC,EADoB,IACpB,CAAI,GADwB,GACjB,CAAE,UAAW,SAAU,QAAS,MAAO,YAChD,CAAC,CAGqB,YAAnB,GAFgB,CC1RD,AAAC,IAChC,GAAM,OAAE,CAAK,SAAE,CAAO,CAAE,CAAG,EAE3B,GAAc,GAAG,CAAb,EACF,MAAO,CAAE,WAAY,EAAG,KAAM,SAAU,EAG1C,IAAM,EAAa,KAAK,KAAK,CAAE,EAAU,EAAS,YAElD,AAAmB,KAAK,CAApB,EACK,CAAE,aAAY,KAAM,SAAU,EAC5B,GAAc,GAChB,CADoB,WAClB,EAAY,KAAM,SAAU,EAE9B,YAAE,EAAY,KAAM,SAAU,EAEzC,ED0QoD,IAExB,IAAI,CACV,yBACmB,YAAnB,EAAU,IAAI,CACZ,0BACA,yBAEN,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,MAAO,CACL,MAAO,QACP,OAAQ,QACR,OAAQ,cACR,aAAc,MACd,WAAY,EACZ,QAAS,OACT,WAAY,SACZ,eAAgB,SAChB,UAAW,CAAC,WAAW,EAAE,EAAA,CAAS,AACpC,WAEA,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAM,KAAK,OAAO,KAAK,QAAQ,YAAY,KAAK,OAAO,OAAO,UAAU,YAAY,aACvF,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CAAS,OAAO,uBAIrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,MAAO,CACL,SAAU,OACV,WAAY,MACZ,MACqB,YAAnB,EAAU,IAAI,CACV,UACmB,YAAnB,EAAU,IAAI,CACZ,UACA,UACR,aAAc,KAChB,YAEC,AAAmB,cAAT,IAAI,EAAkB,eACb,YAAnB,EAAU,IAAI,EAAkB,YAChC,AAAmB,cAAT,IAAI,EAAkB,wBAGnC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,SAAU,OAAQ,MAAO,uBAAwB,YAC5D,EAAa,OAAO,CAAC,OAAK,EAAa,KAAK,CAAC,aACtB,IAAvB,EAAa,KAAK,CAAS,IAAM,GAAG,UAAiC,IAAzB,EAAa,OAAO,CAAS,IAAM,GAAG,wBAS9F,OACC,CAAA,EAAA,EAAA,GADc,CACd,EAAA,EAAA,EADqB,MACrB,AAD2B,CAC3B,WAEE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,MAAO,CACL,QAAS,OACT,IAAK,MACL,aAAc,OACd,aAAc,0BACd,cAAe,MACjB,WAGE,CACE,CAAE,KAAK,KAAU,AAAL,GAAG,GAAS,QAAS,MAAO,GAAW,GAAG,CAAE,WAAO,CAAU,EACzE,CAAE,IAvvBb,CAuvBkB,KAAK,EAAO,GAAF,GAAS,UAAW,MAAO,GAAW,KAAK,CAAE,MAAO,SAAU,EAC/E,CAAE,IAvvBT,CAuvBc,KAAK,MAAW,GAAF,GAAS,UAAW,MAAO,GAAW,SAAS,CAAE,MAAO,SAAU,EACvF,CAAE,IAvvBX,CAuvBgB,KAAK,IAAS,GAAF,GAAS,YAAa,MAAO,GAAW,OAAO,CAAE,MAAO,SAAU,EACtF,CACD,GAAG,CAAC,AAAC,GACL,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAEC,QAAS,IAAM,EAAa,EAAI,GAAG,EACnC,MAAO,CACL,QAAS,WACT,aAAc,OACd,OAAQ,OACR,WACE,IAAc,EAAI,GAAG,CACjB,EAAI,KAAK,CACP,CAAA,EAAG,EAAI,KAAK,CAAC,EAAE,CAAC,CAChB,2BACF,cACN,MAAO,IAAc,EAAI,GAAG,CAAI,EAAI,KAAK,EAAI,UAAa,wBAC1D,SAAU,OACV,WAAY,MACZ,OAAQ,UACR,QAAS,OACT,WAAY,SACZ,IAAK,MACL,WAAY,UACd,YAEC,EAAI,KAAK,CACV,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACC,MAAO,CACL,WAAY,EAAI,KAAK,CAAG,CAAA,EAAG,EAAI,KAAK,CAAC,EAAE,CAAC,CAAG,oBAC3C,QAAS,UACT,aAAc,OACd,SAAU,MACZ,WAEC,EAAI,KAAK,KA/BP,EAAI,GAAG,KAsClB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,MAAO,CACL,QAAS,OACT,IAAK,OACL,aAAc,OACd,SAAU,MACZ,YAEA,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,GAAY,GAC3B,MAAO,CACL,WAAY,OACZ,OAAQ,OACR,MAAO,UACP,OAAQ,UACR,QAAS,SACX,WACD,qBAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,IAAM,GAAY,GAC3B,MAAO,CACL,WAAY,OACZ,OAAQ,OACR,MAAO,wBACP,OAAQ,UACR,QAAS,SACX,WACD,sBAMH,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,MAAO,CACL,QAAS,OACT,cAAe,SACf,IAAK,MACL,UAAW,QACX,UAAW,MACb,WAEC,GAAgB,GAAG,CAAC,AAAC,GACpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,MAAO,CACL,WAAY,oBACZ,aAAc,OACd,OAAQ,CAAC,UAAU,EAAmB,UAAjB,EAAM,MAAM,CAAe,gBAAmC,cAAjB,EAAM,MAAM,CAAmB,UAAY,UAAA,CAAW,AAC1H,YAGA,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,QAAS,IAAM,EAAkB,IAAmB,EAAM,EAAE,CAAG,KAAO,EAAM,EAAE,EAC9E,MAAO,CACL,QAAS,YACT,QAAS,OACT,WAAY,SACZ,IAAK,OACL,OAAQ,SACV,YAGA,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,WACL,QAAS,EAAM,WAAW,CAC1B,SAAU,AAAC,IACT,EAAE,eAAe,GACjB,EAAuB,EAAM,EAAE,CACjC,EACA,SAA2B,YAAjB,EAAM,MAAM,CACtB,MAAO,CAAE,OAAyB,YAAjB,EAAM,MAAM,CAAiB,cAAgB,SAAU,IAI1E,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CACC,MAAO,CACL,MAAO,OACP,OAAQ,OACR,aAAc,MACd,WACmB,UAAjB,EAAM,MAAM,CACR,0BACiB,cAAjB,EAAM,MAAM,CACV,2BACA,0BACR,QAAS,OACT,WAAY,SACZ,eAAgB,QAClB,YAEkB,UAAjB,EAAM,MAAM,EACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAM,KAAK,OAAO,KAAK,QAAQ,YAAY,KAAK,OAAO,OAAO,UAAU,YAAY,eACvF,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CAAS,OAAO,qBAGpB,AAAiB,gBAAX,MAAM,EACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAM,KAAK,OAAO,KAAK,QAAQ,YAAY,KAAK,OAAO,OAAO,UAAU,YAAY,cACvF,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAG,KAAK,EAAE,OAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,GAAG,KAAK,GAAG,IAAI,GAAG,KAAK,GAAG,OAChC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,GAAG,KAAK,GAAG,KAAK,GAAG,QAAQ,GAAG,UAGtB,YAAjB,EAAM,MAAM,EACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAM,KAAK,OAAO,KAAK,QAAQ,YAAY,KAAK,OAAO,OAAO,UAAU,YAAY,cACvF,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAG,KAAK,EAAE,OAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,GAAG,KAAK,GAAG,IAAI,GAAG,IAAI,GAAG,OAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,GAAG,IAAI,GAAG,IAAI,GAAG,KAAK,GAAG,aAMrC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,KAAM,EAAG,SAAU,QAAS,SAAU,QAAS,YAC3D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,MAAO,CACL,SAAU,OACV,WAAY,MACZ,MAAO,sBACP,WAAY,SACZ,SAAU,SACV,aAAc,WACd,WAAY,MACZ,aAAc,KAChB,WAEC,EAAM,MAAM,EAAI,EAAM,SAAS,EAAI,eAEtC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,MAAO,CACL,QAAS,OACT,WAAY,SACZ,IAAK,MACL,SAAU,MACZ,YAEA,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CACC,MAAO,CACL,SAAU,OACV,QAAS,UACT,aAAc,OACd,WAAY,sBACZ,MAAO,wBACP,OAAQ,yBACV,YAEC,EAAM,QAAQ,CAAC,MAAM,CAAC,WAAS,AAA0B,MAApB,QAAQ,CAAC,MAAM,CAAS,IAAM,MAItE,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CACC,QAAS,AAAC,IACR,EAAE,eAAe,GACjB,IAAM,EAAU,EAAE,aAAa,CAAiB,aAAa,CAAC,UAC1D,GAAQ,EAAO,KAAK,EAC1B,EACA,MAAO,CACL,SAAU,OACV,QAAS,UACT,aAAc,OACd,WAAY,EAAM,SAAS,CAAG,0BAA4B,0BAC1D,MAAO,EAAM,SAAS,CAAG,UAAY,UACrC,OAAQ,CAAC,UAAU,EAAE,EAAM,SAAS,CAAG,0BAA4B,0BAAA,CAA2B,CAC9F,OAAQ,UACR,WAAY,MACZ,QAAS,cACT,WAAY,SACZ,IAAK,MACL,SAAU,UACZ,YAEC,EAAW,IAAI,CAAC,AAAC,GAAM,EAAE,EAAE,GAAK,EAAM,SAAS,GAAG,MAAQ,YAC3D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAM,IAAI,OAAO,IAAI,QAAQ,YAAY,KAAK,OAAO,OAAO,eAAe,YAAY,aAC1F,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CAAS,OAAO,qBAEnB,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,MAAO,EAAM,SAAS,EAAI,GAC1B,QAAS,AAAC,GAAM,EAAE,eAAe,GACjC,SAAU,AAAC,IACT,EAAE,eAAe,GACjB,GAAgB,EAAM,EAAE,CAAE,EAAE,MAAM,CAAC,KAAK,CAC1C,EACA,MAAO,CACL,SAAU,WACV,QAAS,EACT,IAAK,EACL,KAAM,EACN,MAAO,OACP,OAAQ,OACR,OAAQ,SACV,YAEA,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,YAAG,cAChB,EAAW,GAAG,CAAC,AAAC,GACf,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAoB,MAAO,EAAI,EAAE,UAC/B,EAAI,IAAI,EADE,EAAI,EAAE,SAQxB,EAAM,YAAY,EACjB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACC,MAAO,CACL,SAAU,OACV,QAAS,UACT,aAAc,OACd,WACmB,cAAjB,EAAM,MAAM,CAAmB,0BAA4B,yBAC7D,MAAwB,cAAjB,EAAM,MAAM,CAAmB,UAAY,UAClD,OAAQ,CAAC,UAAU,EAAmB,cAAjB,EAAM,MAAM,CAAmB,0BAA4B,yBAAA,CAA0B,AAC5G,WAEC,EAAM,YAAY,SAOT,YAAjB,EAAM,MAAM,EACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,IAAK,KAAM,YACvC,EAAM,SAAS,EACd,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,AAAC,IACR,EAAE,eAAe,GACjB,EAAU,AAAC,GACT,EAAK,GAAG,CAAC,AAAC,GACR,EAAE,EAAE,GAAK,EAAM,EAAE,CACb,CACE,GAAG,CAAC,CACJ,OAAQ,YACR,aAAc,sBACd,aAAa,CACf,EACA,GAGV,EACA,MAAO,CACL,QAAS,WACT,aAAc,MACd,OAAQ,oBACR,WAAY,0BACZ,MAAO,UACP,SAAU,OACV,OAAQ,UACR,QAAS,OACT,WAAY,SACZ,IAAK,MACL,WAAY,QACd,YAEA,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAM,KAAK,OAAO,KAAK,QAAQ,YAAY,KAAK,OAAO,OAAO,eAAe,YAAY,cAC5F,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,sBACR,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,gGACJ,YAIT,CAAC,EAAM,SAAS,EACf,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAU,AAAD,IACP,EAAE,eAAe,GAxqBzC,IACF,KACA,EAAU,AAAC,GAAS,EAAK,GAFJ,GAEU,AADb,CACc,AAAC,GAAM,EAAE,EAAE,GAAK,AAuqBM,EAvqBA,EAAE,GAwqBhC,EACA,MAAO,CACL,QAAS,WACT,aAAc,MACd,OAAQ,oBACR,WAAY,yBACZ,MAAO,UACP,SAAU,OACV,OAAQ,UACR,QAAS,OACT,WAAY,SACZ,IAAK,KACP,YAEA,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAM,KAAK,OAAO,KAAK,QAAQ,YAAY,KAAK,OAAO,OAAO,eAAe,YAAY,cAC5F,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,+DACR,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,+DACJ,iBAQd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,MAAM,KACN,OAAO,KACP,QAAQ,YACR,KAAK,OACL,OAAO,oBACP,YAAY,IACZ,MAAO,CACL,UAAW,IAAmB,EAAM,EAAE,CAAG,iBAAmB,eAC5D,WAAY,gBACd,WAEA,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CAAS,OAAO,wBAKpB,IAAmB,EAAM,EAAE,EAC1B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,MAAO,CACL,QAAS,YACT,WAAY,sBACZ,UAAW,yBACb,YAEA,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,MAAO,CACL,QAAS,OACT,oBAAqB,UACrB,IAAK,OACL,aAAc,MAChB,YAEA,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,WAAY,QAAS,YACjC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,MAAO,CACL,QAAS,QACT,SAAU,OACV,MAAO,oBACP,aAAc,MACd,WAAY,KACd,WACD,WAGD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,MAAO,EAAM,MAAM,EAAI,GACvB,QAAS,AAAC,GAAM,EAAE,eAAe,GACjC,SAAU,AAAC,GAAM,GAAa,EAAM,EAAE,CAAE,EAAE,MAAM,CAAC,KAAK,EACtD,YAAY,oBACZ,MAAO,CACL,MAAO,OACP,QAAS,WACT,aAAc,MACd,OAAQ,0BACR,WAAY,oBACZ,MAAO,sBACP,SAAU,OACV,WAAY,KACd,OAIJ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,MAAO,CACL,QAAS,QACT,SAAU,OACV,MAAO,oBACP,aAAc,MACd,WAAY,KACd,WACD,eAGD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,MAAO,EAAM,UAAU,EAAI,GAC3B,QAAS,AAAC,GAAM,EAAE,eAAe,GACjC,SAAU,AAAC,GAAM,GAAiB,EAAM,EAAE,CAAE,EAAE,MAAM,CAAC,KAAK,EAC1D,YAAY,qBACZ,MAAO,CACL,MAAO,OACP,QAAS,WACT,aAAc,MACd,OAAQ,0BACR,WAAY,oBACZ,MAAO,sBACP,SAAU,MACZ,OAIJ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,MAAO,CACL,QAAS,QACT,SAAU,OACV,MAAO,oBACP,aAAc,MACd,WAAY,KACd,WACD,eAGD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,MAAO,EAAM,UAAU,EAAI,GAC3B,QAAU,AAAD,GAAO,EAAE,eAAe,GACjC,SAAU,AAAC,GAAM,GAAiB,EAAM,EAAE,CAAE,EAAE,MAAM,CAAC,KAAK,EAC1D,YAAY,qBACZ,MAAO,CACL,MAAO,OACP,QAAS,WACT,aAAc,MACd,OAAQ,0BACR,WAAY,oBACZ,MAAO,sBACP,SAAU,MACZ,UAMN,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,SAAU,MAAO,YAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,MAAO,wBAAyB,aAAc,KAAM,WAAG,yBAGrE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,MAAO,CACL,QAAS,OACT,oBAAqB,wCACrB,IAAK,KACP,WAEC,EAAM,QAAQ,CAAC,GAAG,CAAC,CAAC,EAAK,IACxB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,MAAO,CACL,QAAS,WACT,aAAc,MACd,WAAY,EAAI,WAAW,CAAG,yBAA2B,0BACzD,MAAO,EAAI,WAAW,CAAG,UAAY,UACrC,QAAS,OACT,WAAY,SACZ,IAAK,KACP,YAEC,EAAI,WAAW,CACd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,MAAM,KACN,OAAO,KACP,QAAQ,YACR,KAAK,OACL,OAAO,eACP,YAAY,aAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CAAS,OAAO,qBAGnB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,MAAM,KACN,OAAO,KACP,QAAQ,YACR,KAAK,OACL,OAAO,eACP,YAAY,cAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAG,KAAK,EAAE,OAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,GAAG,KAAK,GAAG,IAAI,GAAG,KAAK,GAAG,OAChC,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,GAAG,KAAK,GAAG,KAAK,GAAG,QAAQ,GAAG,UAGvC,EAAI,WAAW,GApCX,cAlYZ,EAAM,EAAE,QAobtB,OACC,CAAA,EAAA,EAAA,GADc,CACd,EAAC,IADoB,EACpB,CAAI,MADyB,AAClB,CAAE,UAAW,SAAU,QAAS,gBAAiB,YAC3D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,MAAO,CACL,MAAO,QACP,OAAQ,QACR,OAAQ,cACR,aAAc,MACd,WAAY,sFACZ,QAAS,OACT,WAAY,SACZ,eAAgB,SAChB,UAAW,qCACb,WAEA,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,MAAM,KACN,OAAO,KACP,QAAQ,YACR,KAAK,OACL,OAAO,UACP,YAAY,MACZ,MAAO,CAAE,UAAW,yBAA0B,YAE9C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,GAAG,KAAK,GAAG,KAAK,EAAE,KAAK,cAAc,SAC7C,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,0BAA0B,cAAc,eAIpD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,MAAO,CACL,SAAU,OACV,WAAY,MACZ,MAAO,sBACP,aAAc,KAChB,WACD,wBAID,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,SAAU,OAAQ,MAAO,wBAAyB,aAAc,MAAO,YAClF,EAAe,WAAW,CAAC,OAAK,EAAe,KAAK,CAAC,aACtB,IAA/B,EAAe,WAAW,CAAS,IAAM,MAI5C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,MAAO,CACL,QAAS,OACT,WAAY,SACZ,eAAgB,SAChB,IAAK,MACL,aAAc,OACd,UAAW,MACb,WAEA,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAEC,MAAO,CACL,SAAU,OACV,MAAO,UACP,UAAW,QACb,WAEC,CAAY,CAAC,EAAiB,EAP1B,KAYT,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,MAAO,OAAQ,SAAU,QAAS,OAAQ,QAAS,YAC/D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,MAAO,CACL,SAAU,WACV,OAAQ,MACR,WAAY,oBACZ,aAAc,MACd,SAAU,SACV,aAAc,MAChB,WAEA,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,MAAO,CACL,SAAU,WACV,KAAM,EACN,IAAK,EACL,MAAO,CAAA,EAAG,EAAe,UAAU,CAAC,CAAC,CAAC,CACtC,OAAQ,OACR,WAAY,gEACZ,eAAgB,YAChB,aAAc,MACd,WAAY,0CACZ,UAAW,4BACb,MAKJ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,MAAO,CACL,QAAS,OACT,eAAgB,SAChB,IAAK,MACL,UAAW,MACb,WAEC,EACE,MAAM,CAAC,AAAC,GAAM,EAAE,WAAW,EAAiB,YAAb,EAAE,MAAM,EACvC,GAAG,CAAC,CAAC,EAAG,KACP,IAAM,EAAc,EAAM,EAAe,WAAW,CAC9C,EAAY,IAAQ,EAAe,WAAW,CACpD,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAEC,MAAO,EAAE,MAAM,CACf,MAAO,CACL,MAAO,EAAY,OAAS,MAC5B,OAAQ,MACR,aAAc,MACd,WAAY,EACR,UACA,EACE,2CACA,sBACN,WAAY,gBACZ,OAAQ,SACV,GAbK,EAAE,EAAE,CAgBf,QAIN,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,UAAO,CAAC;;;;;;;;cAQT,CAAC,MAKJ,OAAkC,GACjC,CAAA,EAAA,EADc,AACd,GAAA,EAAC,EADoB,IACpB,CAAI,GADwB,GACjB,CAAE,UAAW,SAAU,QAAS,MAAO,YAChD,AAEO,CAFN,CAGkB,AAAhB,eAFa,CE1lCJ,AAAC,IAC1B,IArBM,EACA,EAoBA,EAAQ,EAAa,KAAK,EAAK,EAAa,OAAO,CAAG,EAAa,IAAI,CACvE,SAAE,CAAO,MAAE,CAAI,CAAE,CAAG,EACpB,EAAa,EAAa,UAAU,EAAI,EACxC,EAAoB,EAAQ,EAAI,KAAK,KAAK,CAAE,EAAU,EAAS,KAAO,EAE5E,MAAO,CACL,SAAmB,AAAT,MACN,CAAA,EAAG,EAAQ,UAAU,EAAc,IAAZ,EAAgB,IAAM,GAAG,QAAQ,EAAc,IAAZ,EAAgB,IAAM,GAAG,aAAa,CAAC,CACjG,CAAA,EAAG,EAAQ,IAAI,EAAE,EAAM,UAAU,EAAY,IAAV,EAAc,IAAM,GAAG,QAAQ,EAAc,IAAZ,EAAgB,IAAM,GAAG,EAAE,EAAE,EAAK,KAAK,EAAW,IAAT,EAAa,IAAM,GAAG,CAAC,CAAC,CACzI,KAAe,IAAT,EAAa,UAAa,EAAU,EAAI,UAAY,0BAC1D,EACA,OAAA,CA5BE,CA4BO,EA/BK,KAAK,KAAK,CAAC,GADV,KAAK,KAAK,CAAC,AAgCD,EAhCM,MACK,KAGxB,EACL,CADQ,AACR,EAAG,EAAQ,EAAE,EAHA,AAGE,EAHS,GAGK,CAAC,CAAC,CAEjC,CAAA,EAAG,EAAS,CAAC,CA0BpB,AA1BqB,CA2BvB,GF4kC2C,EAAiB,YAAY,GAE/C,IAAI,CACP,yBACgB,YAAhB,EAAO,IAAI,CACT,0BACA,yBAEN,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,MAAO,CACL,MAAO,QACP,OAAQ,QACR,OAAQ,cACR,aAAc,MACd,WAAY,EACZ,QAAS,OACT,WAAY,SACZ,eAAgB,SAChB,UAAW,CAAC,WAAW,EAAE,EAAA,CAAS,AACpC,WAEA,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAM,KAAK,OAAO,KAAK,QAAQ,YAAY,KAAK,OAAO,OAAO,UAAU,YAAY,aACvF,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CAAS,OAAO,uBAIrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,MAAO,CACL,SAAU,OACV,WAAY,MACZ,MACkB,YAAhB,EAAO,IAAI,CACP,UACgB,YAAhB,EAAO,IAAI,CACT,UACA,UACR,aAAc,KAChB,YAEiB,YAAhB,EAAO,IAAI,EAAkB,oBACb,YAAhB,EAAO,IAAI,EAAkB,iBACb,UAAhB,EAAO,IAAI,EAAgB,qBAG9B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,SAAU,OAAQ,MAAO,wBAAyB,aAAc,KAAM,WACjF,EAAO,QAAQ,GAGlB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,SAAU,OAAQ,MAAO,mBAAoB,YAAG,gBAAc,EAAO,OAAO,IAEzF,EAAiB,YAAY,CAAC,IAAI,CAAG,GACpC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,MAAO,CACL,UAAW,OACX,QAAS,OACT,WAAY,yBACZ,aAAc,OACd,UAAW,OACX,SAAU,QACV,OAAQ,aACV,YAEA,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,MAAO,CACL,SAAU,OACV,WAAY,MACZ,MAAO,UACP,aAAc,KAChB,WACD,uBAGA,EAAiB,UAAU,CACzB,MAAM,CAAC,AAAC,GAAM,CAAC,EAAE,OAAO,EACxB,GAAG,CAAC,CAAC,EAAG,IACP,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAEC,MAAO,CACL,SAAU,OACV,MAAO,wBACP,aAAc,KAChB,YACD,KACS,EAAE,MAAM,CAAC,KAAG,EAAE,KAAK,GAPtB,gBAoB1B,CAAC,OAAgC,KAAsB,CAAQ,EAC9D,AADe,CACf,EAAA,EAAA,EADsB,AAAyB,EAC/C,EAAC,EAD2B,CAA0B,GACrD,CACC,MAAO,CACL,QAAS,YACT,UAAW,0BACX,QAAS,OACT,WAAY,SACZ,eAAgB,gBAChB,IAAK,MACP,YAEC,OACC,CAAA,EAAA,EAAA,GADc,CACd,EAAA,EAAA,EADqB,MAAM,AAC3B,CAAA,WACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,SAAU,OAAQ,MAAO,uBAAwB,YAC5D,GAAmB,MAAM,CAAC,OAAK,EAAO,MAAM,CAAC,AAAC,GAAmB,YAAb,EAAE,MAAM,EAAgB,MAAM,CAAC,eACrD,IAA9B,GAAmB,MAAM,CAAS,IAAM,GACxC,GAAmB,MAAM,CAAG,GAC3B,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,MAAO,CAAE,WAAY,KAAM,YAAG,IAGhC,CEzvCI,CAAC,EAAqB,KAEhD,IAII,EAJE,EAA+B,IAAd,EAAuB,AAAuB,KAAtB,IAAiB,CAAC,CAG3D,EAAW,KAAK,IAAI,CAAC,EAAgB,KAG3C,GAAI,EAAW,GACb,CADiB,CACA,CAAC,CAAC,EAAE,EAAS,SAAS,CAAC,KACnC,CACL,IAAM,EAAU,KAAK,IAAI,CAAC,EAAW,IACrC,EAAiB,CAAC,CAAC,EAAE,EAAQ,OAAO,EAAE,EAAU,EAAI,IAAM,GAAA,CAAI,AAChE,CAEA,MAAO,eAAE,iBAAe,CAAe,EACzC,EF0uC0B,GAAmB,MAAM,CACzB,GAAmB,MAAM,CAAC,CAAC,EAAa,IAAa,EAAM,EAAE,QAAQ,CAAC,MAAM,CAAE,IAC9E,cAAc,CACjB,UAMP,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CAAE,QAAS,OAAQ,IAAK,MAAO,YACzC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,MAAO,CACL,QAAS,YACT,aAAc,OACd,WAAY,oBACZ,OAAQ,0BACR,MAAO,sBACP,SAAU,OACV,OAAQ,SACV,WACD,aAID,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,QAAS,GACT,SAAwC,IAA9B,GAAmB,MAAM,CACnC,MAAO,CACL,QAAS,YACT,aAAc,OACd,WACgC,IAA9B,GAAmB,MAAM,CACrB,oFACA,oDACN,OAAQ,OACR,MAAO,OACP,SAAU,OACV,WAAY,MACZ,OAAsC,IAA9B,GAAmB,MAAM,CAAS,cAAgB,UAC1D,QAAS,OACT,WAAY,SACZ,IAAK,KACP,YAEA,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAM,KAAK,OAAO,KAAK,QAAQ,YAAY,KAAK,OAAO,OAAO,eAAe,YAAY,cAC5F,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,8CACR,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CAAS,OAAO,kBACjB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,GAAG,KAAK,GAAG,IAAI,GAAG,KAAK,GAAG,UAC5B,UACE,GAAmB,MAAM,CAAC,aAAyC,IAA9B,GAAmB,MAAM,CAAS,IAAM,YAM5F,OACC,CAAA,EAAA,EAAA,GADc,AACd,EAAC,KADoB,CACpB,CAAI,MADwB,AACjB,CAAE,MAAO,OAAQ,UAAW,QAAS,WAC/C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,QAAS,EACT,MAAO,CACL,QAAS,YACT,aAAc,OACd,WAAY,oDACZ,OAAQ,OACR,MAAO,OACP,SAAU,OACV,WAAY,MACZ,OAAQ,SACV,WACD,qBA5rCK,IAssCtB"}