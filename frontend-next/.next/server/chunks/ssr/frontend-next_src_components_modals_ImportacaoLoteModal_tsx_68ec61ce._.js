module.exports=[91094,a=>{"use strict";var b=a.i(42485),c=a.i(66592),d=a.i(15771),e=a.i(40811),f=a.i(43043),g=a.i(66163);let h=0,i=async(a,b="")=>{let c=[];if(a.isFile){let d=await new Promise(b=>a.file(b));c.push({file:d,path:b+d.name,fullPath:b})}else if(a.isDirectory){let d=a.createReader();for(let e of(await new Promise(a=>{let b=[],c=()=>{d.readEntries(d=>{0===d.length?a(b):(b.push(...d),c())})};c()}))){let d=await i(e,b+a.name+"/");c.push(...d)}}return c},j=a=>{let b=new Map;for(let c of a.filter(a=>a.file.name.toLowerCase().endsWith(".pdf"))){let a=(c.path||"").replace(/\\/g,"/").split("/");a.pop();let d=a.join("/");b.has(d)||b.set(d,[]),b.get(d).push(c)}return b},k=(a,b,c=[],d=[])=>{let e=(a||"").replace(/\\/g,"/"),i=e.split("/").filter(a=>a.trim()),j=i[i.length-1]||"Pasta sem nome",k=(0,g.analisarMetadados)(e,j,c),l=b.map(({file:a})=>{let{instrumento:b,reconhecido:c}=(0,f.extrairInstrumento)(a.name);return{file:a,nomeOriginal:a.name,instrumento:b,reconhecido:c}}),m={id:(h++,`pasta-${Date.now()}-${h}-${Math.random().toString(36).substr(2,9)}`),caminho:e,nomePasta:j,titulo:k.titulo,categoria:k.categoria||"",categoriaConfianca:k.categoriaConfianca,categoriaFonte:k.categoriaFonte,compositor:k.compositor,arranjador:k.arranjador,arquivos:l,selecionada:!0,status:"ready",statusMotivo:null,duplicada:!1},{status:n,motivo:o,duplicada:p}=((a,b=[])=>{let{arquivos:c,categoria:d,titulo:e}=a;if(!c||0===c.length)return{status:"problem",motivo:"Nenhum arquivo PDF encontrado",duplicada:!1};if(!e||""===e.trim())return{status:"problem",motivo:"Titulo nao detectado",duplicada:!1};let{duplicada:g}=((a,b=[])=>{if(!a||0===b.length)return{duplicada:!1,partituraExistente:null};let c=(0,f.normalizarTexto)(a);for(let a of b)if(c===(0,f.normalizarTexto)(a.titulo||""))return{duplicada:!0,partituraExistente:a};return{duplicada:!1,partituraExistente:null}})(e,b);if(g)return{status:"problem",motivo:"Ja existe no acervo",duplicada:!0};let h=c.filter(a=>!a.reconhecido).length,i=c.length;return d?h/i*100>50?{status:"attention",motivo:`${h} de ${i} instrumentos nao reconhecidos`,duplicada:!1}:h>0?{status:"attention",motivo:`${h} instrumento(s) nao reconhecido(s)`,duplicada:!1}:{status:"ready",motivo:null,duplicada:!1}:{status:"attention",motivo:"Categoria nao detectada",duplicada:!1}})(m,d);return m.status=n,m.statusMotivo=o,m.duplicada=p,m},l=a=>a.reduce((a,b)=>(a.total++,"ready"===b.status?a.prontas++:"attention"===b.status?a.atencao++:"problem"===b.status&&a.problemas++,a.totalArquivos+=b.arquivos.length,a.instrumentosReconhecidos+=b.arquivos.filter(a=>a.reconhecido).length,a.instrumentosNaoReconhecidos+=b.arquivos.filter(a=>!a.reconhecido).length,a),{total:0,prontas:0,atencao:0,problemas:0,totalArquivos:0,instrumentosReconhecidos:0,instrumentosNaoReconhecidos:0}),m=async(a,b=[],c=[],d=null)=>{let e=[];if(Array.isArray(a))for(let b of a){let a=await i(b,"");e.push(...a)}else for(let b=0;b<a.length;b++){let c=a[b].webkitGetAsEntry?.();if(c){let a=await i(c,"");e.push(...a)}}let f=j(e),g=f.size,h=0,m=[];for(let[a,e]of f){let f=k(a,e,b,c);m.push(f),h++,d&&d({processadas:h,total:g,percentual:Math.round(h/g*100),pastaAtual:a})}let n=l(m);return{pastas:m,estatisticas:n}},n=async(a,b=[],c=[],d=null)=>{let e=j(Array.from(a).filter(a=>a.name.toLowerCase().endsWith(".pdf")).map(a=>({file:a,path:a.webkitRelativePath||a.name,fullPath:a.webkitRelativePath?a.webkitRelativePath.split("/").slice(0,-1).join("/"):""})).map(a=>({...a,path:a.path}))),f=e.size,g=0,h=[];for(let[a,i]of e){let e=k(a,i,b,c);h.push(e),g++,d&&d({processadas:g,total:f,percentual:Math.round(g/f*100),pastaAtual:a})}let i=l(h);return{pastas:h,estatisticas:i}},o=a=>new Promise(b=>setTimeout(b,a)),p=async a=>{try{let b=new FormData;b.append("titulo",a.titulo?.trim()||a.nomePasta||""),b.append("compositor",a.compositor?.trim()||""),b.append("arranjador",a.arranjador?.trim()||""),b.append("categoria",a.categoria||""),b.append("ano",a.ano||""),b.append("total_arquivos",a.arquivos.length.toString()),a.arquivos.forEach((a,c)=>{b.append(`arquivo_${c}`,a.file),b.append(`instrumento_${c}`,a.instrumento)});let c=await e.API.uploadPastaPartitura(b);return{success:!0,result:c}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Erro desconhecido"}}},q=async(a,b=2,c=1e3)=>{let d,e=0;for(;e<b;){e++;let f=await p(a);if(f.success)return{...f,attempts:e};d=f.error,e<b&&await o(c)}return{success:!1,error:d,attempts:e}},r=async(a,b={},c={})=>{let{onPastaStart:d,onPastaComplete:e,onPastaError:f,onChunkComplete:g,onProgress:h}=b,{chunkSize:i=5,delayBetweenChunks:j=500,retryAttempts:k=2,retryDelay:l=1e3}=c,m=a.filter(a=>a.selecionada),n=m.length;if(0===n)return{resultados:[],estatisticas:{total:0,sucesso:0,erro:0,tempoTotal:0,tempoMedio:0}};let p=((a,b)=>{let c=[];for(let d=0;d<a.length;d+=b)c.push(a.slice(d,d+b));return c})(m,i),r=[],s=0,t=0,u=0,v=Date.now();for(let a=0;a<p.length;a++){for(let b of p[a]){d&&d({pasta:b,processadas:s,total:n});let a=await q(b,k,l);r.push({pastaId:b.id,titulo:b.titulo,caminho:b.caminho,...a}),s++,a.success?(t++,e&&e({pasta:b,resultado:a,processadas:s,total:n})):(u++,f&&f({pasta:b,error:a.error,processadas:s,total:n})),h&&h({processadas:s,total:n,percentual:Math.round(s/n*100),sucessos:t,erros:u,pastaAtual:b.titulo})}g&&g({chunkIndex:a,totalChunks:p.length,processadas:s,total:n}),a<p.length-1&&await o(j)}let w=Date.now()-v;return{resultados:r,estatisticas:{total:n,sucesso:t,erro:u,tempoTotal:w,tempoMedio:Math.round(w/n)}}},s="selection",t="analyzing",u="feedback",v="review",w="uploading",x="complete";a.s(["default",0,({isOpen:a,onClose:f,onSuccess:g,onOpenUploadPasta:h,initialEntries:i})=>{let j,k,l,o,{showToast:p}=(0,d.useUI)(),[q,y]=(0,c.useState)(s),[z,A]=(0,c.useState)([]),[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)({processadas:0,total:0,percentual:0}),[H,I]=(0,c.useState)([]),[J,K]=(0,c.useState)("all"),[L,M]=(0,c.useState)(null),[N,O]=(0,c.useState)({processadas:0,total:0,percentual:0,pastaAtual:""}),[P,Q]=(0,c.useState)(null),[R,S]=(0,c.useState)(0),T=["Adicionando os últimos detalhes...","Refinando a visualização das partituras...","Escrevendo o próximo Dobrado Tusca...","Removendo o Dobrado Ludgero da próxima apresentação...","Ratando a primeira nota de Preta Pretinha...","Esperando João Viana voltar do banheiro...","Deixando Julielson menos durinho no pandeiro...","Afinando os pistões virtuais...","Procurando a partitura perdida do saxofone...","Ajustando o compasso que ninguém acerta...","Adicionando mais uma fermata só de sacanagem...","Verificando se o bombardino está acordado...","Calibrando o volume da tuba...","Inserindo pausas estratégicas para o café...","Convencendo o maestro que está tudo certo...","Organizando as estantes de partitura..."],[U,V]=(0,c.useState)(!1),W=(0,c.useRef)(null),X=(0,c.useRef)(null);(0,c.useEffect)(()=>{let b=async()=>{try{let[a,b]=await Promise.all([e.API.getCategorias(),e.API.getPartituras()]);A(a||[]),I(b||[])}catch{}};a&&b()},[a]),(0,c.useEffect)(()=>{a||(null!==X.current&&(clearTimeout(X.current),X.current=null),y(s),C([]),E(null),G({processadas:0,total:0,percentual:0}),K("all"),M(null),O({processadas:0,total:0,percentual:0,pastaAtual:""}),Q(null),S(0))},[a]),(0,c.useEffect)(()=>{if(q===w){let a=setInterval(()=>{S(a=>(a+1)%T.length)},2500);return()=>clearInterval(a)}},[q,T.length]),(0,c.useEffect)(()=>{(async()=>{if(a&&i&&0!==i.length&&0!==z.length&&q===s){y(t);try{let{pastas:a,estatisticas:b}=await m(i,z,H,G);if(0===a.length){p("Nenhuma pasta com PDFs encontrada","error"),y(s);return}C(a),E(b),y(u),X.current=setTimeout(()=>{X.current=null,y(v)},2500)}catch(a){console.error("Erro na analise:",a),p("Erro ao analisar pastas","error"),y(s)}}})()},[a,i,z,H]);let Y=async a=>{a.preventDefault(),a.stopPropagation(),V(!1);let b=a.dataTransfer.items;if(b&&0!==b.length){y(t);try{let{pastas:a,estatisticas:c}=await m(b,z,H,G);if(0===a.length){p("Nenhuma pasta com PDFs encontrada","error"),y(s);return}C(a),E(c),y(u),setTimeout(()=>{y(v)},2500)}catch(a){console.error("Erro na analise:",a),p("Erro ao analisar pastas","error"),y(s)}}},Z=async a=>{let b=a.target.files;if(b&&0!==b.length){y(t);try{let{pastas:a,estatisticas:c}=await n(b,z,H,G);if(0===a.length){p("Nenhuma pasta com PDFs encontrada","error"),y(s);return}C(a),E(c),y(u),setTimeout(()=>{y(v)},2500)}catch(a){console.error("Erro na analise:",a),p("Erro ao analisar pastas","error"),y(s)}}},$=(0,c.useCallback)(a=>{C(b=>b.map(b=>b.id===a?{...b,selecionada:!b.selecionada}:b))},[]),_=(0,c.useCallback)(a=>{C(b=>b.map(b=>({...b,selecionada:a})))},[]),aa=(0,c.useCallback)((a,b)=>{C(c=>c.map(c=>{if(c.id!==a)return c;let d={...c,categoria:b};return b&&"attention"===c.status&&"Categoria nao detectada"===c.statusMotivo&&(d.status="ready",d.statusMotivo=null),d}))},[]),ab=(0,c.useCallback)((a,b)=>{C(c=>c.map(c=>c.id===a?{...c,titulo:b}:c))},[]),ac=(0,c.useCallback)((a,b)=>{C(c=>c.map(c=>c.id===a?{...c,compositor:b}:c))},[]),ad=(0,c.useCallback)((a,b)=>{C(c=>c.map(c=>c.id===a?{...c,arranjador:b}:c))},[]),ae=async()=>{let a=B.filter(a=>a.selecionada&&"problem"!==a.status);if(0===a.length)return void p("Nenhuma partitura selecionada para upload","error");y(w),O({processadas:0,total:a.length,percentual:0,pastaAtual:""});try{let{resultados:b,estatisticas:c}=await r(a,{onProgress:O,onPastaError:({pasta:a,error:b})=>{console.error(`Erro no upload de ${a.titulo}:`,b)}});Q({resultados:b,estatisticas:c}),y(x),c.sucesso>0&&g?.()}catch(a){console.error("Erro no upload:",a),p("Erro durante o upload","error"),y(v)}},af="all"===J?B:B.filter(a=>a.status===J),ag={all:B.length,ready:B.filter(a=>"ready"===a.status).length,attention:B.filter(a=>"attention"===a.status).length,problem:B.filter(a=>"problem"===a.status).length},ah=B.filter(a=>a.selecionada&&"problem"!==a.status);return a?(0,b.jsx)("div",{onClick:f,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.9)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:(0,b.jsxs)("div",{onClick:a=>a.stopPropagation(),style:{background:"var(--bg-card)",borderRadius:"16px",width:"100%",maxWidth:q===v?"900px":"600px",maxHeight:"90vh",display:"flex",flexDirection:"column",overflow:"hidden",fontFamily:"var(--font-sans)",transition:"max-width 0.3s ease"},children:[(0,b.jsxs)("div",{style:{padding:"24px",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{style:{fontSize:"20px",fontWeight:"700",color:"var(--text-primary)",display:"flex",alignItems:"center",gap:"10px",marginBottom:"4px"},children:[(0,b.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"#D4AF37",strokeWidth:"2",children:[(0,b.jsx)("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"}),(0,b.jsx)("path",{d:"M12 11v6M9 14h6"})]}),"Importacao em Lote"]}),(0,b.jsxs)("p",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:[q===s&&"Arraste uma pasta contendo varias partituras",q===t&&"Analisando estrutura das pastas...",q===u&&"Analise concluida!",q===v&&`${ag.all} partitura${1!==ag.all?"s":""} detectada${1!==ag.all?"s":""}`,q===w&&"Enviando partituras...",q===x&&"Upload finalizado!"]})]}),(0,b.jsx)("button",{onClick:f,style:{background:"none",border:"none",color:"var(--text-secondary)",cursor:"pointer",padding:"8px",borderRadius:"8px",transition:"all 0.2s"},onMouseEnter:a=>a.currentTarget.style.background="var(--bg-primary)",onMouseLeave:a=>a.currentTarget.style.background="none",children:(0,b.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,b.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,b.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),(0,b.jsx)("input",{ref:W,id:"batch-folder-input",type:"file",webkitdirectory:"",directory:"",multiple:!0,onChange:Z,style:{display:"none"}}),(0,b.jsxs)("div",{style:{flex:1,overflow:"auto",padding:"24px"},children:[q===s&&(0,b.jsxs)("div",{onClick:()=>{let a=document.getElementById("batch-folder-input");a&&(a.value="",a.click())},onDragEnter:a=>{a.preventDefault(),a.stopPropagation(),V(!0)},onDragLeave:a=>{a.preventDefault(),a.stopPropagation(),a.currentTarget.contains(a.relatedTarget)||V(!1)},onDragOver:a=>{a.preventDefault(),a.stopPropagation()},onDrop:Y,style:{display:"block",border:U?"2px dashed #D4AF37":"2px dashed var(--border)",borderRadius:"12px",padding:"60px 40px",textAlign:"center",background:U?"linear-gradient(145deg, rgba(212, 175, 55, 0.15) 0%, rgba(184, 134, 11, 0.08) 100%)":"var(--bg-primary)",cursor:"pointer",transition:"all 0.3s ease",transform:U?"scale(1.02)":"scale(1)"},children:[(0,b.jsx)("div",{style:{width:"100px",height:"100px",margin:"0 auto 24px",borderRadius:"24px",background:"linear-gradient(145deg, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.05) 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,b.jsxs)("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#D4AF37",strokeWidth:"1.5",children:[(0,b.jsx)("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"}),(0,b.jsx)("path",{d:"M12 11v6M9 14h6",opacity:"0.6"})]})}),(0,b.jsx)("div",{style:{fontSize:"18px",fontWeight:"600",color:U?"#D4AF37":"var(--text-primary)",marginBottom:"8px"},children:U?"Solte as pastas aqui!":"Arraste uma pasta ou clique para selecionar"}),(0,b.jsx)("div",{style:{fontSize:"14px",color:"var(--text-secondary)",marginBottom:"24px"},children:"Selecione uma pasta contendo subpastas de partituras"}),(0,b.jsxs)("div",{style:{display:"flex",gap:"16px",justifyContent:"center",fontSize:"12px",color:"var(--text-muted)"},children:[(0,b.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[(0,b.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,b.jsx)("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})}),"Multiplas pastas"]}),(0,b.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[(0,b.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,b.jsx)("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"})}),"Arquivos PDF"]}),(0,b.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[(0,b.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,b.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,b.jsx)("polyline",{points:"12 6 12 12 16 14"})]}),"Deteccao automatica"]})]})]}),q===t&&(0,b.jsxs)("div",{style:{textAlign:"center",padding:"40px"},children:[(0,b.jsx)("div",{style:{width:"140px",height:"140px",margin:"0 auto 24px",borderRadius:"50%",background:"linear-gradient(145deg, rgba(212, 175, 55, 0.12) 0%, rgba(184, 134, 11, 0.06) 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 24px rgba(212, 175, 55, 0.08)"},children:(0,b.jsxs)("svg",{width:"60",height:"60",viewBox:"0 0 24 24",fill:"none",stroke:"#D4AF37",strokeWidth:"1.5",style:{animation:"spin 2s linear infinite"},children:[(0,b.jsx)("circle",{cx:"12",cy:"12",r:"10",strokeOpacity:"0.25"}),(0,b.jsx)("path",{d:"M12 2a10 10 0 0 1 10 10",strokeLinecap:"round"})]})}),(0,b.jsx)("div",{style:{fontSize:"18px",fontWeight:"600",color:"var(--text-primary)",marginBottom:"8px"},children:"Preparando arquivos..."}),(0,b.jsx)("div",{style:{fontSize:"14px",color:"var(--text-secondary)",marginBottom:"24px"},children:F.total>0?`Organizando ${F.total} arquivo(s)...`:"Lendo estrutura de diretorios..."}),F.total>0&&(0,b.jsx)("div",{style:{width:"100%",maxWidth:"300px",height:"6px",background:"rgba(212, 175, 55, 0.1)",borderRadius:"3px",overflow:"hidden",margin:"0 auto"},children:(0,b.jsx)("div",{style:{width:`${F.percentual}%`,height:"100%",background:"linear-gradient(90deg, #D4AF37, #B8860B)",borderRadius:"3px",transition:"width 0.3s ease-out"}})})]}),q===u&&D&&(0,b.jsx)("div",{style:{textAlign:"center",padding:"40px"},children:(k="success"===(j=(a=>{let{total:b,prontas:c}=a;if(0===b)return{percentual:0,tipo:"failure"};let d=Math.round(c/b*100);return 100===d?{percentual:d,tipo:"success"}:d>=50?{percentual:d,tipo:"partial"}:{percentual:d,tipo:"failure"}})(D)).tipo?"rgba(39, 174, 96, 0.1)":"partial"===j.tipo?"rgba(230, 126, 34, 0.1)":"rgba(231, 76, 60, 0.1)",(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{style:{width:"160px",height:"160px",margin:"0 auto 24px",borderRadius:"50%",background:k,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 4px 24px ${k}`},children:(0,b.jsx)("svg",{width:"60",height:"60",viewBox:"0 0 24 24",fill:"none",stroke:"#27ae60",strokeWidth:"2",children:(0,b.jsx)("polyline",{points:"20 6 9 17 4 12"})})}),(0,b.jsxs)("div",{style:{fontSize:"24px",fontWeight:"700",color:"success"===j.tipo?"#27ae60":"partial"===j.tipo?"#e67e22":"#e74c3c",marginBottom:"8px"},children:["success"===j.tipo&&"Tudo pronto!","partial"===j.tipo&&"Quase la!","failure"===j.tipo&&"Precisa de atencao"]}),(0,b.jsxs)("div",{style:{fontSize:"16px",color:"var(--text-secondary)"},children:[D.prontas," de ",D.total," partitura",1!==D.total?"s":""," pronta",1!==D.prontas?"s":""," para upload"]})]}))}),q===v&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{style:{display:"flex",gap:"8px",marginBottom:"20px",borderBottom:"1px solid var(--border)",paddingBottom:"12px"},children:[{key:"all",label:"Todas",count:ag.all,color:void 0},{key:"ready",label:"Prontas",count:ag.ready,color:"#27ae60"},{key:"attention",label:"Atencao",count:ag.attention,color:"#e67e22"},{key:"problem",label:"Problemas",count:ag.problem,color:"#e74c3c"}].map(a=>(0,b.jsxs)("button",{onClick:()=>K(a.key),style:{padding:"8px 16px",borderRadius:"20px",border:"none",background:J===a.key?a.color?`${a.color}20`:"rgba(212, 175, 55, 0.15)":"transparent",color:J===a.key?a.color||"#D4AF37":"var(--text-secondary)",fontSize:"13px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px",transition:"all 0.2s"},children:[a.label,(0,b.jsx)("span",{style:{background:a.color?`${a.color}30`:"var(--bg-primary)",padding:"2px 8px",borderRadius:"10px",fontSize:"11px"},children:a.count})]},a.key))}),(0,b.jsxs)("div",{style:{display:"flex",gap:"12px",marginBottom:"16px",fontSize:"13px"},children:[(0,b.jsx)("button",{onClick:()=>_(!0),style:{background:"none",border:"none",color:"#D4AF37",cursor:"pointer",padding:"4px 8px"},children:"Selecionar todas"}),(0,b.jsx)("button",{onClick:()=>_(!1),style:{background:"none",border:"none",color:"var(--text-secondary)",cursor:"pointer",padding:"4px 8px"},children:"Limpar selecao"})]}),(0,b.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxHeight:"400px",overflowY:"auto"},children:af.map(a=>(0,b.jsxs)("div",{style:{background:"var(--bg-primary)",borderRadius:"12px",border:`1px solid ${"ready"===a.status?"var(--border)":"attention"===a.status?"#e67e22":"#e74c3c"}`},children:[(0,b.jsxs)("div",{onClick:()=>M(L===a.id?null:a.id),style:{padding:"12px 16px",display:"flex",alignItems:"center",gap:"12px",cursor:"pointer"},children:[(0,b.jsx)("input",{type:"checkbox",checked:a.selecionada,onChange:b=>{b.stopPropagation(),$(a.id)},disabled:"problem"===a.status,style:{cursor:"problem"===a.status?"not-allowed":"pointer"}}),(0,b.jsxs)("span",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"ready"===a.status?"rgba(39, 174, 96, 0.15)":"attention"===a.status?"rgba(230, 126, 34, 0.15)":"rgba(231, 76, 60, 0.15)",display:"flex",alignItems:"center",justifyContent:"center"},children:["ready"===a.status&&(0,b.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#27ae60",strokeWidth:"2.5",children:(0,b.jsx)("polyline",{points:"20 6 9 17 4 12"})}),"attention"===a.status&&(0,b.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#e67e22",strokeWidth:"2",children:[(0,b.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,b.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,b.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),"problem"===a.status&&(0,b.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"#e74c3c",strokeWidth:"2",children:[(0,b.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,b.jsx)("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),(0,b.jsx)("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]})]}),(0,b.jsxs)("div",{style:{flex:1,minWidth:"100px",overflow:"hidden"},children:[(0,b.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",color:"var(--text-primary)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",lineHeight:"1.4",marginBottom:"6px"},children:a.titulo||a.nomePasta||"Sem titulo"}),(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",flexWrap:"wrap"},children:[(0,b.jsxs)("span",{style:{fontSize:"11px",padding:"2px 8px",borderRadius:"10px",background:"var(--bg-secondary)",color:"var(--text-secondary)",border:"1px solid var(--border)"},children:[a.arquivos.length," arquivo",1!==a.arquivos.length?"s":""]}),(0,b.jsxs)("span",{onClick:a=>{a.stopPropagation();let b=a.currentTarget.querySelector("select");b&&b.click()},style:{fontSize:"11px",padding:"2px 8px",borderRadius:"10px",background:a.categoria?"rgba(212, 175, 55, 0.1)":"rgba(230, 126, 34, 0.1)",color:a.categoria?"#D4AF37":"#e67e22",border:`1px solid ${a.categoria?"rgba(212, 175, 55, 0.3)":"rgba(230, 126, 34, 0.3)"}`,cursor:"pointer",fontWeight:"500",display:"inline-flex",alignItems:"center",gap:"4px",position:"relative"},children:[z.find(b=>b.id===a.categoria)?.nome||"Categoria",(0,b.jsx)("svg",{width:"8",height:"8",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:(0,b.jsx)("polyline",{points:"6 9 12 15 18 9"})}),(0,b.jsxs)("select",{value:a.categoria||"",onClick:a=>a.stopPropagation(),onChange:b=>{b.stopPropagation(),aa(a.id,b.target.value)},style:{position:"absolute",opacity:0,top:0,left:0,width:"100%",height:"100%",cursor:"pointer"},children:[(0,b.jsx)("option",{value:"",children:"Categoria"}),z.map(a=>(0,b.jsx)("option",{value:a.id,children:a.nome},a.id))]})]}),a.statusMotivo&&(0,b.jsx)("span",{style:{fontSize:"11px",padding:"2px 8px",borderRadius:"10px",background:"attention"===a.status?"rgba(230, 126, 34, 0.1)":"rgba(231, 76, 60, 0.1)",color:"attention"===a.status?"#e67e22":"#e74c3c",border:`1px solid ${"attention"===a.status?"rgba(230, 126, 34, 0.3)":"rgba(231, 76, 60, 0.3)"}`},children:a.statusMotivo})]})]}),"problem"===a.status&&(0,b.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[a.duplicada&&(0,b.jsxs)("button",{onClick:b=>{b.stopPropagation(),C(b=>b.map(b=>b.id===a.id?{...b,status:"attention",statusMotivo:"Duplicada (forcado)",selecionada:!0}:b))},style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #e67e22",background:"rgba(230, 126, 34, 0.1)",color:"#e67e22",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",whiteSpace:"nowrap"},children:[(0,b.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,b.jsx)("path",{d:"M12 9v4M12 17h.01"}),(0,b.jsx)("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"})]}),"Forcar"]}),!a.duplicada&&(0,b.jsxs)("button",{onClick:b=>{b.stopPropagation(),h&&(h(a),C(b=>b.filter(b=>b.id!==a.id)))},style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #e74c3c",background:"rgba(231, 76, 60, 0.1)",color:"#e74c3c",fontSize:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[(0,b.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,b.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,b.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),"Resolver"]})]}),(0,b.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"var(--text-muted)",strokeWidth:"2",style:{transform:L===a.id?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:(0,b.jsx)("polyline",{points:"6 9 12 15 18 9"})})]}),L===a.id&&(0,b.jsxs)("div",{style:{padding:"12px 16px",background:"var(--bg-secondary)",borderTop:"1px solid var(--border)"},children:[(0,b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"12px"},children:[(0,b.jsxs)("div",{style:{gridColumn:"1 / -1"},children:[(0,b.jsx)("label",{style:{display:"block",fontSize:"11px",color:"var(--text-muted)",marginBottom:"3px",fontWeight:"500"},children:"Titulo"}),(0,b.jsx)("input",{type:"text",value:a.titulo||"",onClick:a=>a.stopPropagation(),onChange:b=>ab(a.id,b.target.value),placeholder:"Nome da partitura",style:{width:"100%",padding:"8px 10px",borderRadius:"6px",border:"1px solid var(--border)",background:"var(--bg-primary)",color:"var(--text-primary)",fontSize:"13px",fontWeight:"500"}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",fontSize:"11px",color:"var(--text-muted)",marginBottom:"3px",fontWeight:"500"},children:"Compositor"}),(0,b.jsx)("input",{type:"text",value:a.compositor||"",onClick:a=>a.stopPropagation(),onChange:b=>ac(a.id,b.target.value),placeholder:"Nome do compositor",style:{width:"100%",padding:"8px 10px",borderRadius:"6px",border:"1px solid var(--border)",background:"var(--bg-primary)",color:"var(--text-primary)",fontSize:"13px"}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",fontSize:"11px",color:"var(--text-muted)",marginBottom:"3px",fontWeight:"500"},children:"Arranjador"}),(0,b.jsx)("input",{type:"text",value:a.arranjador||"",onClick:a=>a.stopPropagation(),onChange:b=>ad(a.id,b.target.value),placeholder:"Nome do arranjador",style:{width:"100%",padding:"8px 10px",borderRadius:"6px",border:"1px solid var(--border)",background:"var(--bg-primary)",color:"var(--text-primary)",fontSize:"13px"}})]})]}),(0,b.jsxs)("div",{style:{fontSize:"12px"},children:[(0,b.jsx)("div",{style:{color:"var(--text-secondary)",marginBottom:"8px"},children:"Arquivos detectados:"}),(0,b.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"6px"},children:a.arquivos.map((a,c)=>(0,b.jsxs)("div",{style:{padding:"6px 10px",borderRadius:"4px",background:a.reconhecido?"rgba(39, 174, 96, 0.1)":"rgba(230, 126, 34, 0.1)",color:a.reconhecido?"#27ae60":"#e67e22",display:"flex",alignItems:"center",gap:"6px"},children:[a.reconhecido?(0,b.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:(0,b.jsx)("polyline",{points:"20 6 9 17 4 12"})}):(0,b.jsxs)("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,b.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,b.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,b.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),a.instrumento]},c))})]})]})]},a.id))})]}),q===w&&(0,b.jsxs)("div",{style:{textAlign:"center",padding:"40px 40px 32px"},children:[(0,b.jsx)("div",{style:{width:"120px",height:"120px",margin:"0 auto 28px",borderRadius:"50%",background:"linear-gradient(145deg, rgba(212, 175, 55, 0.12) 0%, rgba(184, 134, 11, 0.06) 100%)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 24px rgba(212, 175, 55, 0.08)"},children:(0,b.jsxs)("svg",{width:"50",height:"50",viewBox:"0 0 24 24",fill:"none",stroke:"#D4AF37",strokeWidth:"1.5",style:{animation:"spin 2s linear infinite"},children:[(0,b.jsx)("circle",{cx:"12",cy:"12",r:"10",strokeOpacity:"0.25"}),(0,b.jsx)("path",{d:"M12 2a10 10 0 0 1 10 10",strokeLinecap:"round"})]})}),(0,b.jsx)("div",{style:{fontSize:"20px",fontWeight:"600",color:"var(--text-primary)",marginBottom:"6px"},children:"Enviando partituras"}),(0,b.jsxs)("div",{style:{fontSize:"14px",color:"var(--text-secondary)",marginBottom:"16px"},children:[N.processadas," de ",N.total," concluida",1!==N.processadas?"s":""]}),(0,b.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"32px",minHeight:"24px"},children:(0,b.jsx)("span",{style:{fontSize:"13px",color:"#D4AF37",fontStyle:"italic"},children:T[R]},R)}),(0,b.jsxs)("div",{style:{width:"100%",maxWidth:"400px",margin:"0 auto"},children:[(0,b.jsx)("div",{style:{position:"relative",height:"8px",background:"var(--bg-primary)",borderRadius:"4px",overflow:"hidden",marginBottom:"16px"},children:(0,b.jsx)("div",{style:{position:"absolute",left:0,top:0,width:`${N.percentual}%`,height:"100%",background:"linear-gradient(90deg, #D4AF37 0%, #F4D03F 50%, #D4AF37 100%)",backgroundSize:"200% 100%",borderRadius:"4px",transition:"width 0.4s cubic-bezier(0.4, 0, 0.2, 1)",animation:"shimmer 2s linear infinite"}})}),(0,b.jsx)("div",{style:{display:"flex",justifyContent:"center",gap:"6px",marginTop:"20px"},children:B.filter(a=>a.selecionada&&"problem"!==a.status).map((a,c)=>{let d=c<N.processadas,e=c===N.processadas;return(0,b.jsx)("div",{title:a.titulo,style:{width:e?"24px":"8px",height:"8px",borderRadius:"4px",background:d?"#27ae60":e?"linear-gradient(90deg, #D4AF37, #F4D03F)":"var(--bg-secondary)",transition:"all 0.3s ease",cursor:"default"}},a.id)})})]}),(0,b.jsx)("style",{children:`
                @keyframes spin {
                  to { transform: rotate(360deg); }
                }
                @keyframes shimmer {
                  0% { background-position: 200% 0; }
                  100% { background-position: -200% 0; }
                }
              `})]}),q===x&&P&&(0,b.jsx)("div",{style:{textAlign:"center",padding:"40px"},children:(o="success"===(l=(a=>{let b,c,d=a.total??a.sucesso+a.erro,{sucesso:e,erro:f}=a,g=a.tempoTotal??0,h=d>0?Math.round(e/d*100):0;return{mensagem:0===f?`${e} partitura${1!==e?"s":""} enviada${1!==e?"s":""} com sucesso!`:`${e} de ${d} partitura${1!==d?"s":""} enviada${1!==e?"s":""} (${f} erro${1!==f?"s":""})`,tipo:0===f?"success":e>0?"partial":"error",percentualSucesso:h,duracao:(c=Math.floor((b=Math.floor(g/1e3))/60))>0?`${c}m ${b%60}s`:`${b}s`}})(P.estatisticas)).tipo?"rgba(39, 174, 96, 0.1)":"partial"===l.tipo?"rgba(230, 126, 34, 0.1)":"rgba(231, 76, 60, 0.1)",(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{style:{width:"160px",height:"160px",margin:"0 auto 24px",borderRadius:"50%",background:o,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:`0 4px 24px ${o}`},children:(0,b.jsx)("svg",{width:"60",height:"60",viewBox:"0 0 24 24",fill:"none",stroke:"#27ae60",strokeWidth:"2",children:(0,b.jsx)("polyline",{points:"20 6 9 17 4 12"})})}),(0,b.jsxs)("div",{style:{fontSize:"20px",fontWeight:"700",color:"success"===l.tipo?"#27ae60":"partial"===l.tipo?"#e67e22":"#e74c3c",marginBottom:"8px"},children:["success"===l.tipo&&"Upload concluido!","partial"===l.tipo&&"Upload parcial","error"===l.tipo&&"Falha no upload"]}),(0,b.jsx)("div",{style:{fontSize:"16px",color:"var(--text-secondary)",marginBottom:"8px"},children:l.mensagem}),(0,b.jsxs)("div",{style:{fontSize:"13px",color:"var(--text-muted)"},children:["Tempo total: ",l.duracao]}),P.estatisticas.erro>0&&(0,b.jsxs)("div",{style:{marginTop:"24px",padding:"16px",background:"rgba(231, 76, 60, 0.1)",borderRadius:"12px",textAlign:"left",maxWidth:"350px",margin:"24px auto 0"},children:[(0,b.jsx)("div",{style:{fontSize:"13px",fontWeight:"600",color:"#e74c3c",marginBottom:"8px"},children:"Erros encontrados:"}),P.resultados.filter(a=>!a.success).map((a,c)=>(0,b.jsxs)("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginBottom:"4px"},children:["• ",a.titulo,": ",a.error]},c))]})]}))})]}),(q===v||q===x)&&(0,b.jsxs)("div",{style:{padding:"16px 24px",borderTop:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px"},children:[q===v&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:[ah.length," de ",B.filter(a=>"problem"!==a.status).length," selecionada",1!==ah.length?"s":"",ah.length>0&&(0,b.jsxs)("span",{style:{marginLeft:"8px"},children:["(",((a,b)=>{let c,d=2e3*a+500*(b||0),e=Math.ceil(d/1e3);if(e<60)c=`~${e} segundos`;else{let a=Math.ceil(e/60);c=`~${a} minuto${a>1?"s":""}`}return{tempoEstimado:d,tempoFormatado:c}})(ah.length,ah.reduce((a,b)=>a+b.arquivos.length,0)).tempoFormatado,")"]})]}),(0,b.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,b.jsx)("button",{onClick:f,style:{padding:"12px 24px",borderRadius:"12px",background:"var(--bg-primary)",border:"1px solid var(--border)",color:"var(--text-primary)",fontSize:"14px",cursor:"pointer"},children:"Cancelar"}),(0,b.jsxs)("button",{onClick:ae,disabled:0===ah.length,style:{padding:"12px 24px",borderRadius:"12px",background:0===ah.length?"linear-gradient(135deg, rgba(212, 175, 55, 0.5) 0%, rgba(184, 134, 11, 0.5) 100%)":"linear-gradient(135deg, #D4AF37 0%, #B8860B 100%)",border:"none",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:0===ah.length?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[(0,b.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,b.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,b.jsx)("polyline",{points:"17 8 12 3 7 8"}),(0,b.jsx)("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),"Enviar ",ah.length," partitura",1!==ah.length?"s":""]})]})]}),q===x&&(0,b.jsx)("div",{style:{width:"100%",textAlign:"center"},children:(0,b.jsx)("button",{onClick:f,style:{padding:"12px 32px",borderRadius:"12px",background:"linear-gradient(135deg, #D4AF37 0%, #B8860B 100%)",border:"none",color:"#fff",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Fechar"})})]})]})}):null}],91094)}];

//# sourceMappingURL=frontend-next_src_components_modals_ImportacaoLoteModal_tsx_68ec61ce._.js.map