{"version":3,"sources":["../../../../../frontend-next/src/contexts/DataContext.tsx","../../../../../frontend-next/src/constants/categories.ts","../../../../../frontend-next/src/constants/instruments.ts","../../../../../frontend-next/src/lib/storage.ts","../../../../../frontend-next/src/constants/api.ts","../../../../../frontend-next/src/lib/api.ts","../../../../../frontend-next/src/contexts/UIContext.tsx","../../../../../frontend-next/src/contexts/AuthContext.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport {\r\n  createContext,\r\n  useContext,\r\n  useState,\r\n  useEffect,\r\n  useCallback,\r\n  useMemo,\r\n  type ReactNode,\r\n} from \"react\";\r\nimport Storage from \"@lib/storage\";\r\nimport { API, USE_API } from \"@lib/api\";\r\nimport { CATEGORIES as FALLBACK_CATEGORIES, type Category } from \"@constants/categories\";\r\nimport { DEFAULT_INSTRUMENTS as FALLBACK_INSTRUMENTS, type Instrument } from \"@constants/instruments\";\r\n\r\ninterface Sheet {\r\n  id: string;\r\n  title: string;\r\n  composer: string;\r\n  category: string;\r\n  year: number;\r\n  downloads: number;\r\n  featured: boolean;\r\n  hasFile?: boolean;\r\n  apiId?: number;\r\n}\r\n\r\ninterface DataContextType {\r\n  sheets: Sheet[];\r\n  setSheets: (sheets: Sheet[]) => void;\r\n  addSheet: (sheet: Sheet) => void;\r\n  favorites: string[];\r\n  setFavorites: (favorites: string[]) => void;\r\n  toggleFavorite: (id: string) => void;\r\n  loadUserFavorites: () => Promise<void>;\r\n  categories: Category[];\r\n  categoriesMap: Map<string, Category>;\r\n  instruments: Instrument[];\r\n  instrumentNames: string[];\r\n  activeTab: string;\r\n  setActiveTab: (tab: string) => void;\r\n  selectedCategory: string | null;\r\n  setSelectedCategory: (cat: string | null) => void;\r\n  selectedComposer: string | null;\r\n  setSelectedComposer: (composer: string | null) => void;\r\n  searchQuery: string;\r\n  setSearchQuery: (query: string) => void;\r\n  isLoading: boolean;\r\n  apiOnline: boolean;\r\n}\r\n\r\nconst DataContext = createContext<DataContextType | null>(null);\r\n\r\nexport const useData = () => {\r\n  const context = useContext(DataContext);\r\n  if (!context) {\r\n    throw new Error(\"useData must be used within DataProvider\");\r\n  }\r\n  return context;\r\n};\r\n\r\nconst generateSampleData = (): Sheet[] => [\r\n  { id: \"1\", title: \"Verde e Branco\", composer: \"Estevam Moura\", category: \"dobrados\", year: 1940, downloads: 567, featured: true },\r\n  { id: \"2\", title: \"Magnata\", composer: \"Estevam Moura\", category: \"dobrados\", year: 1945, downloads: 489, featured: true },\r\n  { id: \"3\", title: \"Tusca\", composer: \"Estevam Moura\", category: \"dobrados\", year: 1942, downloads: 423, featured: false },\r\n  { id: \"4\", title: \"Dois Corações\", composer: \"Pedro Salgado\", category: \"dobrados\", year: 1935, downloads: 512, featured: true },\r\n  { id: \"5\", title: \"Os Corujas\", composer: \"Heraclio Guerreiro\", category: \"dobrados\", year: 1920, downloads: 298, featured: true },\r\n];\r\n\r\nexport const DataProvider = ({ children }: { children: ReactNode }) => {\r\n  const [sheets, setSheets] = useState<Sheet[]>(() =>\r\n    Storage.get<Sheet[]>(\"sheets\", generateSampleData())\r\n  );\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [apiOnline, setApiOnline] = useState(false);\r\n\r\n  const [categories, setCategories] = useState<Category[]>(() => {\r\n    const stored = Storage.get<Category[] | null>(\"categories\", null);\r\n    return stored || FALLBACK_CATEGORIES;\r\n  });\r\n\r\n  const [instruments, setInstruments] = useState<Instrument[]>(() => {\r\n    const stored = Storage.get<Instrument[] | null>(\"instruments\", null);\r\n    return stored || FALLBACK_INSTRUMENTS;\r\n  });\r\n\r\n  const [favorites, setFavorites] = useState<string[]>(() =>\r\n    Storage.get<string[]>(\"favorites\", [])\r\n  );\r\n\r\n  const [activeTab, setActiveTab] = useState(\"home\");\r\n  const [selectedCategory, setSelectedCategory] = useState<string | null>(null);\r\n  const [selectedComposer, setSelectedComposer] = useState<string | null>(null);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const loadFromAPI = async () => {\r\n      if (!USE_API) {\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n      try {\r\n        const isOnline = await API.healthCheck();\r\n        setApiOnline(isOnline);\r\n        if (isOnline) {\r\n          const [partituras, categoriasApi, instrumentosApi] = await Promise.all([\r\n            API.getPartituras(),\r\n            API.getCategorias(),\r\n            API.getInstrumentos(),\r\n          ]);\r\n          if (partituras && partituras.length > 0) {\r\n            const mappedSheets: Sheet[] = partituras.map((p: any) => ({\r\n              id: String(p.id),\r\n              title: p.titulo,\r\n              composer: p.compositor,\r\n              category: p.categoria_id,\r\n              year: p.ano,\r\n              downloads: p.downloads || 0,\r\n              featured: p.destaque === 1,\r\n              hasFile: !!p.arquivo_nome,\r\n              apiId: p.id,\r\n            }));\r\n            setSheets(mappedSheets);\r\n            Storage.set(\"sheets\", mappedSheets);\r\n          }\r\n          if (categoriasApi && categoriasApi.length > 0) {\r\n            const mappedCategories: Category[] = categoriasApi.map((c: any) => ({\r\n              id: c.id,\r\n              name: c.nome,\r\n            }));\r\n            setCategories(mappedCategories);\r\n            Storage.set(\"categories\", mappedCategories);\r\n          }\r\n          if (instrumentosApi && instrumentosApi.length > 0) {\r\n            const mappedInstruments: Instrument[] = instrumentosApi.map((i: any) => ({\r\n              id: i.id,\r\n              nome: i.nome,\r\n            }));\r\n            setInstruments(mappedInstruments);\r\n            Storage.set(\"instruments\", mappedInstruments);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Erro ao carregar da API:\", error);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    loadFromAPI();\r\n  }, []);\r\n\r\n  useEffect(() => { Storage.set(\"sheets\", sheets); }, [sheets]);\r\n  useEffect(() => { Storage.set(\"favorites\", favorites); }, [favorites]);\r\n  useEffect(() => { Storage.set(\"categories\", categories); }, [categories]);\r\n  useEffect(() => { Storage.set(\"instruments\", instruments); }, [instruments]);\r\n\r\n  const categoriesMap = useMemo(\r\n    () => new Map(categories.map((cat) => [cat.id, cat])),\r\n    [categories]\r\n  );\r\n\r\n  const instrumentNames = useMemo(\r\n    () => instruments.map((i) => i.nome),\r\n    [instruments]\r\n  );\r\n\r\n  const loadUserFavorites = useCallback(async () => {\r\n    const token = Storage.get<string | null>(\"authToken\", null);\r\n    if (!USE_API || !token) return;\r\n    try {\r\n      const favoritosIds = await API.getFavoritosIds();\r\n      if (favoritosIds && Array.isArray(favoritosIds)) {\r\n        const favoritosStr = favoritosIds.map((id: any) => String(id));\r\n        setFavorites(favoritosStr);\r\n        Storage.set(\"favorites\", favoritosStr);\r\n      }\r\n    } catch {\r\n      // Silencioso\r\n    }\r\n  }, []);\r\n\r\n  const toggleFavorite = useCallback((id: string) => {\r\n    const token = Storage.get<string | null>(\"authToken\", null);\r\n    setFavorites((prev) => {\r\n      const wasFavorito = prev.includes(id);\r\n      const newFavorites = wasFavorito\r\n        ? prev.filter((f) => f !== id)\r\n        : [...prev, id];\r\n      if (USE_API && token) {\r\n        const apiCall = wasFavorito\r\n          ? API.removeFavorito(id)\r\n          : API.addFavorito(id);\r\n        apiCall.catch(() => {\r\n          setFavorites((currentState) => {\r\n            const isCurrentlyFavorito = currentState.includes(id);\r\n            const expectedState = !wasFavorito;\r\n            if (isCurrentlyFavorito === expectedState) {\r\n              return wasFavorito\r\n                ? [...currentState, id]\r\n                : currentState.filter((f) => f !== id);\r\n            }\r\n            return currentState;\r\n          });\r\n        });\r\n      }\r\n      return newFavorites;\r\n    });\r\n  }, []);\r\n\r\n  const addSheet = useCallback((sheet: Sheet) => {\r\n    setSheets((prev) => [...prev, sheet]);\r\n  }, []);\r\n\r\n  return (\r\n    <DataContext.Provider\r\n      value={{\r\n        sheets,\r\n        setSheets,\r\n        addSheet,\r\n        favorites,\r\n        setFavorites,\r\n        toggleFavorite,\r\n        loadUserFavorites,\r\n        categories,\r\n        categoriesMap,\r\n        instruments,\r\n        instrumentNames,\r\n        activeTab,\r\n        setActiveTab,\r\n        selectedCategory,\r\n        setSelectedCategory,\r\n        selectedComposer,\r\n        setSelectedComposer,\r\n        searchQuery,\r\n        setSearchQuery,\r\n        isLoading,\r\n        apiOnline,\r\n      }}\r\n    >\r\n      {children}\r\n    </DataContext.Provider>\r\n  );\r\n};\r\n\r\nexport default DataContext;\r\n","export interface Category {\r\n  id: string;\r\n  name: string;\r\n}\r\n\r\nexport const CATEGORIES: Category[] = [\r\n  { id: 'dobrados', name: 'Dobrados' },\r\n  { id: 'marchas', name: 'Marchas' },\r\n  { id: 'marchas-funebres', name: 'Marchas Fúnebres' },\r\n  { id: 'marchas-religiosas', name: 'Marchas Religiosas' },\r\n  { id: 'fantasias', name: 'Fantasias' },\r\n  { id: 'polacas', name: 'Polacas' },\r\n  { id: 'boleros', name: 'Boleros' },\r\n  { id: 'valsas', name: 'Valsas' },\r\n  { id: 'arranjos', name: 'Arranjos' },\r\n  { id: 'hinos', name: 'Hinos' },\r\n  { id: 'hinos-civicos', name: 'Hinos Cívicos' },\r\n  { id: 'hinos-religiosos', name: 'Hinos Religiosos' },\r\n  { id: 'preludios', name: 'Prelúdios' },\r\n];\r\n\r\nexport const CATEGORIES_MAP = new Map(CATEGORIES.map(cat => [cat.id, cat]));\r\nexport const getCategoryById = (id: string) => CATEGORIES_MAP.get(id);\r\nexport const getCategoryName = (id: string) => getCategoryById(id)?.name || id;\r\nexport default CATEGORIES;\r\n","export interface Instrument {\r\n  id: number;\r\n  nome: string;\r\n}\r\n\r\nexport const DEFAULT_INSTRUMENTS: Instrument[] = [\r\n  { id: 1, nome: 'Grade' }, { id: 2, nome: 'Flautim' }, { id: 3, nome: 'Flauta' },\r\n  { id: 4, nome: 'Requinta' }, { id: 5, nome: 'Clarinete Bb' }, { id: 6, nome: 'Clarinete Bb 1' },\r\n  { id: 7, nome: 'Clarinete Bb 2' }, { id: 8, nome: 'Sax. Soprano' }, { id: 9, nome: 'Sax. Alto' },\r\n  { id: 10, nome: 'Sax. Alto 1' }, { id: 11, nome: 'Sax. Alto 2' }, { id: 12, nome: 'Sax. Tenor' },\r\n  { id: 13, nome: 'Sax. Tenor 1' }, { id: 14, nome: 'Sax. Tenor 2' }, { id: 15, nome: 'Sax. Barítono' },\r\n  { id: 16, nome: 'Trompete Bb' }, { id: 17, nome: 'Trompete Bb 1' }, { id: 18, nome: 'Trompete Bb 2' },\r\n  { id: 19, nome: 'Trompa F' }, { id: 20, nome: 'Trompa Eb' }, { id: 21, nome: 'Trompa Eb 1' },\r\n  { id: 22, nome: 'Trompa Eb 2' }, { id: 23, nome: 'Barítono Bb' }, { id: 24, nome: 'Barítono Bb 1' },\r\n  { id: 25, nome: 'Barítono Bb 2' }, { id: 26, nome: 'Trombone' }, { id: 27, nome: 'Trombone 1' },\r\n  { id: 28, nome: 'Trombone 2' }, { id: 29, nome: 'Bombardino' }, { id: 30, nome: 'Bombardino Bb' },\r\n  { id: 31, nome: 'Baixo Eb' }, { id: 32, nome: 'Baixo Bb' }, { id: 33, nome: 'Caixa' },\r\n  { id: 34, nome: 'Bombo' }, { id: 35, nome: 'Pratos' },\r\n];\r\n\r\nexport const DEFAULT_INSTRUMENT_NAMES = DEFAULT_INSTRUMENTS.map(i => i.nome);\r\n\r\nexport const createInstrumentsMap = (instruments: Instrument[]) => {\r\n  const map = new Map<string, Instrument>();\r\n  instruments.forEach(inst => { map.set(inst.nome.toLowerCase(), inst); });\r\n  return map;\r\n};\r\n\r\nexport const DEFAULT_INSTRUMENTS_MAP = createInstrumentsMap(DEFAULT_INSTRUMENTS);\r\n","const PREFIX = 'fil_';\r\n\r\nexport const Storage = {\r\n  get<T>(key: string, defaultValue: T): T {\r\n    try {\r\n      if (typeof window === 'undefined') return defaultValue;\r\n      const item = localStorage.getItem(`${PREFIX}${key}`);\r\n      return item ? JSON.parse(item) : defaultValue;\r\n    } catch {\r\n      return defaultValue;\r\n    }\r\n  },\r\n  set(key: string, value: unknown): void {\r\n    try {\r\n      if (typeof window === 'undefined') return;\r\n      localStorage.setItem(`${PREFIX}${key}`, JSON.stringify(value));\r\n    } catch { /* noop */ }\r\n  },\r\n  remove(key: string): void {\r\n    try {\r\n      if (typeof window === 'undefined') return;\r\n      localStorage.removeItem(`${PREFIX}${key}`);\r\n    } catch { /* noop */ }\r\n  },\r\n  clear(key: string): void {\r\n    try {\r\n      if (typeof window === 'undefined') return;\r\n      localStorage.removeItem(`${PREFIX}${key}`);\r\n    } catch { /* noop */ }\r\n  },\r\n};\r\n\r\nexport const DATA_VERSION = 7;\r\n\r\nexport const checkAndClearOldData = (): void => {\r\n  const storedVersion = Storage.get<number>('version', 0);\r\n  if (storedVersion < DATA_VERSION) {\r\n    Storage.clear('sheets');\r\n    Storage.clear('user');\r\n    Storage.set('version', DATA_VERSION);\r\n  }\r\n};\r\n\r\nexport default Storage;\r\n","const isLocalhost = typeof window !== 'undefined' &&\r\n  (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1');\r\n\r\nexport const API_BASE_URL = isLocalhost ? '' : (process.env.NEXT_PUBLIC_API_URL || 'https://acervo-filarmonica-api.acssjr.workers.dev');\r\nexport const TOKEN_EXPIRY_SECONDS = 24 * 60 * 60;\r\nexport const TOKEN_EXPIRY_BUFFER_MS = 5 * 60 * 1000;\r\n","\"use client\";\r\n\r\nimport Storage from \"@lib/storage\";\r\nimport { API_BASE_URL, TOKEN_EXPIRY_BUFFER_MS } from \"@constants/api\";\r\n\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\n\r\ntype OnTokenExpiredCallback = (() => void) | null;\r\nlet onTokenExpired: OnTokenExpiredCallback = null;\r\n\r\ninterface RequestOptions extends RequestInit {\r\n  headers?: Record<string, string>;\r\n}\r\n\r\nexport const API = {\r\n  setOnTokenExpired(callback: OnTokenExpiredCallback) {\r\n    onTokenExpired = callback;\r\n  },\r\n\r\n  isTokenExpired(): boolean {\r\n    const token = Storage.get<string | null>(\"authToken\", null);\r\n    const expiresAt = Storage.get<number | null>(\"tokenExpiresAt\", null);\r\n    if (!token) return false;\r\n    if (!expiresAt) return true;\r\n    return Date.now() > expiresAt - TOKEN_EXPIRY_BUFFER_MS;\r\n  },\r\n\r\n  clearAuth() {\r\n    Storage.remove(\"authToken\");\r\n    Storage.remove(\"tokenExpiresAt\");\r\n    Storage.remove(\"user\");\r\n  },\r\n\r\n  async request(endpoint: string, options: RequestOptions = {}): Promise<any> {\r\n    try {\r\n      if (this.isTokenExpired()) {\r\n        this.clearAuth();\r\n        if (onTokenExpired) onTokenExpired();\r\n        throw new Error(\"Sess\\u00e3o expirada. Fa\\u00e7a login novamente.\");\r\n      }\r\n\r\n      const token = Storage.get<string | null>(\"authToken\", null);\r\n      const headers: Record<string, string> = {\r\n        \"Content-Type\": \"application/json\",\r\n        ...(token && { Authorization: `Bearer ${token}` }),\r\n        ...options.headers,\r\n      };\r\n\r\n      const response = await fetch(`${API_BASE_URL}${endpoint}`, {\r\n        ...options,\r\n        headers,\r\n      });\r\n\r\n      if (response.status === 401) {\r\n        const error = await response\r\n          .json()\r\n          .catch(() => ({ error: \"N\\u00e3o autorizado\" }));\r\n        this.clearAuth();\r\n        if (onTokenExpired) onTokenExpired();\r\n        throw new Error(\r\n          error.error || \"Sess\\u00e3o expirada. Fa\\u00e7a login novamente.\"\r\n        );\r\n      }\r\n\r\n      if (!response.ok) {\r\n        const error = await response\r\n          .json()\r\n          .catch(() => ({ error: \"Erro desconhecido\" }));\r\n        throw new Error(error.error || `HTTP ${response.status}`);\r\n      }\r\n\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error(`API Error [${endpoint}]:`, error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // ============ PARTITURAS ============\r\n\r\n  async getPartituras(filters: {\r\n    categoria?: string;\r\n    busca?: string;\r\n    destaque?: boolean;\r\n  } = {}) {\r\n    const params = new URLSearchParams();\r\n    if (filters.categoria) params.append(\"categoria\", filters.categoria);\r\n    if (filters.busca) params.append(\"busca\", filters.busca);\r\n    if (filters.destaque) params.append(\"destaque\", \"1\");\r\n    const query = params.toString();\r\n    return this.request(`/api/partituras${query ? `?${query}` : \"\"}`);\r\n  },\r\n\r\n  async getPartitura(id: string | number) {\r\n    return this.request(`/api/partituras/${id}`);\r\n  },\r\n\r\n  async createPartitura(formData: FormData) {\r\n    const token = Storage.get<string | null>(\"authToken\", null);\r\n    const response = await fetch(`${API_BASE_URL}/api/partituras`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        ...(token && { Authorization: `Bearer ${token}` }),\r\n      },\r\n      body: formData,\r\n    });\r\n    if (!response.ok) {\r\n      const error = await response\r\n        .json()\r\n        .catch(() => ({ error: \"Erro no upload\" }));\r\n      throw new Error(error.error);\r\n    }\r\n    return response.json();\r\n  },\r\n\r\n  async updatePartitura(id: string | number, data: Record<string, any>) {\r\n    return this.request(`/api/partituras/${id}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n\r\n  async deletePartitura(id: string | number) {\r\n    return this.request(`/api/partituras/${id}`, { method: \"DELETE\" });\r\n  },\r\n\r\n  async uploadPastaPartitura(formData: FormData) {\r\n    const token = Storage.get<string | null>(\"authToken\", null);\r\n    const response = await fetch(\r\n      `${API_BASE_URL}/api/partituras/upload-pasta`,\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          ...(token && { Authorization: `Bearer ${token}` }),\r\n        },\r\n        body: formData,\r\n      }\r\n    );\r\n    if (!response.ok) {\r\n      const error = await response\r\n        .json()\r\n        .catch(() => ({ error: \"Erro no upload\" }));\r\n      throw new Error(error.error);\r\n    }\r\n    return response.json();\r\n  },\r\n\r\n  async getPartesPartitura(partituraId: string | number) {\r\n    return this.request(`/api/partituras/${partituraId}/partes`);\r\n  },\r\n\r\n  async addPartePartitura(partituraId: string | number, formData: FormData) {\r\n    const token = Storage.get<string | null>(\"authToken\", null);\r\n    const response = await fetch(\r\n      `${API_BASE_URL}/api/partituras/${partituraId}/partes`,\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          ...(token && { Authorization: `Bearer ${token}` }),\r\n        },\r\n        body: formData,\r\n      }\r\n    );\r\n    if (!response.ok) {\r\n      const error = await response\r\n        .json()\r\n        .catch(() => ({ error: \"Erro ao adicionar parte\" }));\r\n      throw new Error(error.error);\r\n    }\r\n    return response.json();\r\n  },\r\n\r\n  async replacePartePartitura(\r\n    _partituraId: string | number,\r\n    parteId: string | number,\r\n    formData: FormData\r\n  ) {\r\n    const token = Storage.get<string | null>(\"authToken\", null);\r\n    const response = await fetch(\r\n      `${API_BASE_URL}/api/partes/${parteId}/substituir`,\r\n      {\r\n        method: \"PUT\",\r\n        headers: {\r\n          ...(token && { Authorization: `Bearer ${token}` }),\r\n        },\r\n        body: formData,\r\n      }\r\n    );\r\n    if (!response.ok) {\r\n      const error = await response\r\n        .json()\r\n        .catch(() => ({ error: \"Erro ao substituir parte\" }));\r\n      throw new Error(error.error);\r\n    }\r\n    return response.json();\r\n  },\r\n\r\n  async deletePartePartitura(\r\n    _partituraId: string | number,\r\n    parteId: string | number\r\n  ) {\r\n    return this.request(`/api/partes/${parteId}`, { method: \"DELETE\" });\r\n  },\r\n\r\n  // ============ DOWNLOAD ============\r\n\r\n  getDownloadUrl(id: string | number, instrumento: string | null = null) {\r\n    let url = `${API_BASE_URL}/api/download/${id}`;\r\n    if (instrumento) url += `?instrumento=${instrumento}`;\r\n    return url;\r\n  },\r\n\r\n  // ============ CATEGORIAS E INSTRUMENTOS ============\r\n\r\n  async getCategorias() {\r\n    return this.request(\"/api/categorias\");\r\n  },\r\n\r\n  async getInstrumentos() {\r\n    return this.request(\"/api/instrumentos\");\r\n  },\r\n\r\n  // ============ ESTATISTICAS ============\r\n\r\n  async getEstatisticas() {\r\n    return this.request(\"/api/estatisticas\");\r\n  },\r\n\r\n  // ============ ATIVIDADES ============\r\n\r\n  async getAtividades() {\r\n    return this.request(\"/api/atividades\");\r\n  },\r\n\r\n  async getMinhasAtividades() {\r\n    return this.request(\"/api/minhas-atividades\");\r\n  },\r\n\r\n  // ============ AUTH ============\r\n\r\n  async login(username: string, pin: string, rememberMe = false) {\r\n    const result = await this.request(\"/api/login\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ username, pin, rememberMe }),\r\n    });\r\n    if (result.token) {\r\n      Storage.set(\"authToken\", result.token);\r\n      if (result.expiresIn) {\r\n        const expiresAt = Date.now() + result.expiresIn * 1000;\r\n        Storage.set(\"tokenExpiresAt\", expiresAt);\r\n      }\r\n    }\r\n    return result;\r\n  },\r\n\r\n  async changePin(currentPin: string, newPin: string) {\r\n    try {\r\n      const result = await this.request(\"/api/change-pin\", {\r\n        method: \"POST\",\r\n        body: JSON.stringify({ currentPin, newPin }),\r\n      });\r\n      if (result.token) {\r\n        Storage.set(\"authToken\", result.token);\r\n        const expiresAt = Date.now() + 24 * 60 * 60 * 1000;\r\n        Storage.set(\"tokenExpiresAt\", expiresAt);\r\n      }\r\n      return result;\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: error instanceof Error ? error.message : \"Erro desconhecido\",\r\n      };\r\n    }\r\n  },\r\n\r\n  logout() {\r\n    this.clearAuth();\r\n  },\r\n\r\n  // ============ HEALTH CHECK ============\r\n\r\n  async healthCheck() {\r\n    try {\r\n      const result = await this.request(\"/api/health\");\r\n      return result.status === \"ok\";\r\n    } catch {\r\n      return false;\r\n    }\r\n  },\r\n\r\n  async getVersion() {\r\n    try {\r\n      return await this.request(\"/api/version\");\r\n    } catch {\r\n      return null;\r\n    }\r\n  },\r\n\r\n  // ============ PERFIL ============\r\n\r\n  async getPerfil() {\r\n    return this.request(\"/api/perfil\");\r\n  },\r\n\r\n  async updatePerfil(data: Record<string, any>) {\r\n    return this.request(\"/api/perfil\", {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n\r\n  async uploadFotoPerfil(file: File) {\r\n    const token = Storage.get<string | null>(\"authToken\", null);\r\n    const formData = new FormData();\r\n    formData.append(\"foto\", file);\r\n    const response = await fetch(`${API_BASE_URL}/api/perfil/foto`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        ...(token && { Authorization: `Bearer ${token}` }),\r\n      },\r\n      body: formData,\r\n    });\r\n    if (!response.ok) {\r\n      const error = await response\r\n        .json()\r\n        .catch(() => ({ error: \"Erro no upload\" }));\r\n      throw new Error(error.error);\r\n    }\r\n    return response.json();\r\n  },\r\n\r\n  // ============ FAVORITOS ============\r\n\r\n  async getFavoritos() {\r\n    return this.request(\"/api/favoritos\");\r\n  },\r\n\r\n  async getFavoritosIds() {\r\n    return this.request(\"/api/favoritos/ids\");\r\n  },\r\n\r\n  async addFavorito(partituraId: string | number) {\r\n    return this.request(`/api/favoritos/${partituraId}`, { method: \"POST\" });\r\n  },\r\n\r\n  async removeFavorito(partituraId: string | number) {\r\n    return this.request(`/api/favoritos/${partituraId}`, { method: \"DELETE\" });\r\n  },\r\n\r\n  // ============ USUARIOS (ADMIN) ============\r\n\r\n  async getUsuarios() {\r\n    return this.request(\"/api/usuarios\");\r\n  },\r\n\r\n  async getUsuario(id: string | number) {\r\n    return this.request(`/api/usuarios/${id}`);\r\n  },\r\n\r\n  async createUsuario(data: Record<string, any>) {\r\n    return this.request(\"/api/usuarios\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n\r\n  async updateUsuario(id: string | number, data: Record<string, any>) {\r\n    return this.request(`/api/usuarios/${id}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n\r\n  async deleteUsuario(id: string | number) {\r\n    return this.request(`/api/usuarios/${id}`, { method: \"DELETE\" });\r\n  },\r\n\r\n  // ============ CATEGORIAS (ADMIN) ============\r\n\r\n  async createCategoria(data: Record<string, any>) {\r\n    return this.request(\"/api/categorias\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n\r\n  async updateCategoria(id: string | number, data: Record<string, any>) {\r\n    return this.request(`/api/categorias/${id}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n\r\n  async deleteCategoria(id: string | number) {\r\n    return this.request(`/api/categorias/${id}`, { method: \"DELETE\" });\r\n  },\r\n\r\n  async reorderCategorias(ordens: Array<{ id: string | number; ordem: number }>) {\r\n    return this.request(\"/api/categorias/reorder\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ ordens }),\r\n    });\r\n  },\r\n\r\n  // ============ ESTATISTICAS ADMIN ============\r\n\r\n  async getEstatisticasAdmin() {\r\n    return this.request(\"/api/admin/estatisticas\");\r\n  },\r\n\r\n  // ============ MANUTENCAO ADMIN ============\r\n\r\n  async limparNomesUsuarios() {\r\n    return this.request(\"/api/admin/manutencao/limpar-nomes\", {\r\n      method: \"POST\",\r\n    });\r\n  },\r\n\r\n  async configurarSuperAdmin(data: Record<string, any>) {\r\n    return this.request(\"/api/admin/manutencao/super-admin\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n\r\n  // ============ REPERTORIO ============\r\n\r\n  async getRepertorioAtivo() {\r\n    return this.request(\"/api/repertorio/ativo\");\r\n  },\r\n\r\n  async getRepertorio(id: string | number) {\r\n    return this.request(`/api/repertorio/${id}`);\r\n  },\r\n\r\n  async getRepertorioInstrumentos(id: string | number) {\r\n    return this.request(`/api/repertorio/${id}/instrumentos`);\r\n  },\r\n\r\n  async getRepertorios() {\r\n    return this.request(\"/api/repertorios\");\r\n  },\r\n\r\n  async createRepertorio(data: Record<string, any>) {\r\n    return this.request(\"/api/repertorios\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n\r\n  async updateRepertorio(id: string | number, data: Record<string, any>) {\r\n    return this.request(`/api/repertorio/${id}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(data),\r\n    });\r\n  },\r\n\r\n  async deleteRepertorio(id: string | number) {\r\n    return this.request(`/api/repertorio/${id}`, { method: \"DELETE\" });\r\n  },\r\n\r\n  async addPartituraToRepertorio(\r\n    repertorioId: string | number,\r\n    partituraId: string | number\r\n  ) {\r\n    return this.request(`/api/repertorio/${repertorioId}/partituras`, {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ partitura_id: partituraId }),\r\n    });\r\n  },\r\n\r\n  async removePartituraFromRepertorio(\r\n    repertorioId: string | number,\r\n    partituraId: string | number\r\n  ) {\r\n    return this.request(\r\n      `/api/repertorio/${repertorioId}/partituras/${partituraId}`,\r\n      { method: \"DELETE\" }\r\n    );\r\n  },\r\n\r\n  async reorderRepertorioPartituras(\r\n    repertorioId: string | number,\r\n    ordens: Array<{ id: string | number; ordem: number }>\r\n  ) {\r\n    return this.request(`/api/repertorio/${repertorioId}/reorder`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify({ ordens }),\r\n    });\r\n  },\r\n\r\n  async duplicarRepertorio(id: string | number) {\r\n    return this.request(`/api/repertorio/${id}/duplicar`, { method: \"POST\" });\r\n  },\r\n\r\n  async isPartituraInRepertorio(partituraId: string | number) {\r\n    return this.request(`/api/partituras/${partituraId}/in-repertorio`);\r\n  },\r\n\r\n  getRepertorioDownloadUrl(\r\n    id: string | number,\r\n    instrumento: string | null,\r\n    formato = \"pdf\",\r\n    partituraIds: (string | number)[] | null = null\r\n  ) {\r\n    let url = `${API_BASE_URL}/api/repertorio/${id}/download?formato=${formato}`;\r\n    if (instrumento)\r\n      url += `&instrumento=${encodeURIComponent(instrumento)}`;\r\n    if (partituraIds && partituraIds.length > 0) {\r\n      url += `&partituras=${partituraIds.join(\",\")}`;\r\n    }\r\n    return url;\r\n  },\r\n\r\n  // ============ CONFIGURACOES ============\r\n\r\n  async getModoRecesso() {\r\n    try {\r\n      const result = await fetch(`${API_BASE_URL}/api/config/recesso`);\r\n      if (!result.ok) return { ativo: false };\r\n      return await result.json();\r\n    } catch {\r\n      return { ativo: false };\r\n    }\r\n  },\r\n\r\n  async setModoRecesso(ativo: boolean) {\r\n    return this.request(\"/api/config/recesso\", {\r\n      method: \"PUT\",\r\n      body: JSON.stringify({ ativo }),\r\n    });\r\n  },\r\n\r\n  // ============ PRESENCA ============\r\n\r\n  async getMinhaPresenca() {\r\n    return this.request(\"/api/presenca/minhas\");\r\n  },\r\n\r\n  async registrarPresencas(dataEnsaio: string, usuariosIds: number[]) {\r\n    return this.request(\"/api/presenca\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        data_ensaio: dataEnsaio,\r\n        usuarios_ids: usuariosIds,\r\n      }),\r\n    });\r\n  },\r\n\r\n  async getTodasPresencas() {\r\n    return this.request(\"/api/presenca/todas\");\r\n  },\r\n\r\n  // ============ ENSAIOS ============\r\n\r\n  async getPartiturasEnsaio(dataEnsaio: string) {\r\n    return this.request(`/api/ensaios/${dataEnsaio}/partituras`);\r\n  },\r\n\r\n  async addPartituraEnsaio(\r\n    dataEnsaio: string,\r\n    partituraId: string | number\r\n  ) {\r\n    return this.request(`/api/ensaios/${dataEnsaio}/partituras`, {\r\n      method: \"POST\",\r\n      body: JSON.stringify({ partitura_id: partituraId }),\r\n    });\r\n  },\r\n\r\n  async removePartituraEnsaio(dataEnsaio: string, id: string | number) {\r\n    return this.request(`/api/ensaios/${dataEnsaio}/partituras/${id}`, {\r\n      method: \"DELETE\",\r\n    });\r\n  },\r\n\r\n  async reorderPartiturasEnsaio(\r\n    dataEnsaio: string,\r\n    ordens: Array<{ id: string | number; ordem: number }>\r\n  ) {\r\n    return this.request(`/api/ensaios/${dataEnsaio}/partituras/reorder`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify({ ordens }),\r\n    });\r\n  },\r\n};\r\n\r\nexport const USE_API = true;\r\nexport default API;\r\n","\"use client\";\r\n\r\nimport {\r\n  createContext,\r\n  useContext,\r\n  useState,\r\n  useEffect,\r\n  useCallback,\r\n  type ReactNode,\r\n} from \"react\";\r\nimport Storage from \"@lib/storage\";\r\n\r\ninterface ShareCartItem {\r\n  parteId: string | number;\r\n  parteName: string;\r\n  partituraTitle: string;\r\n  downloadUrl: string;\r\n}\r\n\r\ninterface UIContextType {\r\n  theme: string;\r\n  themeMode: string;\r\n  setThemeMode: (mode: string) => void;\r\n  toast: { message: string; type: string } | null;\r\n  showToast: (message: string, type?: string) => void;\r\n  clearToast: () => void;\r\n  sidebarCollapsed: boolean;\r\n  setSidebarCollapsed: (collapsed: boolean) => void;\r\n  selectedSheet: any;\r\n  setSelectedSheet: (sheet: any) => void;\r\n  showNotifications: boolean;\r\n  setShowNotifications: (show: boolean) => void;\r\n  shareCart: ShareCartItem[];\r\n  showShareCart: boolean;\r\n  setShowShareCart: (show: boolean) => void;\r\n  addToShareCart: (item: ShareCartItem) => void;\r\n  removeFromShareCart: (parteId: string | number) => void;\r\n  clearShareCart: () => void;\r\n}\r\n\r\nconst UIContext = createContext<UIContextType | null>(null);\r\n\r\nexport const useUI = () => {\r\n  const context = useContext(UIContext);\r\n  if (!context) {\r\n    throw new Error(\"useUI must be used within UIProvider\");\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const UIProvider = ({ children }: { children: ReactNode }) => {\r\n  const [themeMode, setThemeMode] = useState(() =>\r\n    Storage.get<string>(\"themeMode\", \"system\")\r\n  );\r\n\r\n  const getEffectiveTheme = useCallback(() => {\r\n    if (typeof window === \"undefined\") return \"light\";\r\n    if (themeMode === \"system\") {\r\n      return window.matchMedia(\"(prefers-color-scheme: dark)\").matches\r\n        ? \"dark\"\r\n        : \"light\";\r\n    }\r\n    return themeMode;\r\n  }, [themeMode]);\r\n\r\n  const [theme, setTheme] = useState(getEffectiveTheme);\r\n\r\n  const [toast, setToast] = useState<{ message: string; type: string } | null>(\r\n    null\r\n  );\r\n  const showToast = useCallback(\r\n    (message: string, type = \"success\") => setToast({ message, type }),\r\n    []\r\n  );\r\n  const clearToast = useCallback(() => setToast(null), []);\r\n\r\n  const [sidebarCollapsed, setSidebarCollapsed] = useState(false);\r\n  const [selectedSheet, setSelectedSheet] = useState<any>(null);\r\n  const [showNotifications, setShowNotifications] = useState(false);\r\n\r\n  const [shareCart, setShareCart] = useState<ShareCartItem[]>([]);\r\n  const [showShareCart, setShowShareCart] = useState(false);\r\n\r\n  const addToShareCart = useCallback((item: ShareCartItem) => {\r\n    setShareCart((prev) => {\r\n      if (prev.some((i) => i.parteId === item.parteId)) return prev;\r\n      return [...prev, item];\r\n    });\r\n  }, []);\r\n\r\n  const removeFromShareCart = useCallback((parteId: string | number) => {\r\n    setShareCart((prev) => prev.filter((i) => i.parteId !== parteId));\r\n  }, []);\r\n\r\n  const clearShareCart = useCallback(() => {\r\n    setShareCart([]);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const updateTheme = () => {\r\n      if (typeof window === \"undefined\") return;\r\n      const effectiveTheme =\r\n        themeMode === \"system\"\r\n          ? window.matchMedia(\"(prefers-color-scheme: dark)\").matches\r\n            ? \"dark\"\r\n            : \"light\"\r\n          : themeMode;\r\n      setTheme(effectiveTheme);\r\n    };\r\n    updateTheme();\r\n\r\n    if (typeof window !== \"undefined\") {\r\n      const mediaQuery = window.matchMedia(\"(prefers-color-scheme: dark)\");\r\n      mediaQuery.addEventListener(\"change\", updateTheme);\r\n      return () => mediaQuery.removeEventListener(\"change\", updateTheme);\r\n    }\r\n  }, [themeMode]);\r\n\r\n  useEffect(() => {\r\n    if (typeof document !== \"undefined\") {\r\n      document.documentElement.setAttribute(\"data-theme\", theme);\r\n    }\r\n  }, [theme]);\r\n\r\n  useEffect(() => {\r\n    Storage.set(\"themeMode\", themeMode);\r\n  }, [themeMode]);\r\n\r\n  return (\r\n    <UIContext.Provider\r\n      value={{\r\n        theme,\r\n        themeMode,\r\n        setThemeMode,\r\n        toast,\r\n        showToast,\r\n        clearToast,\r\n        sidebarCollapsed,\r\n        setSidebarCollapsed,\r\n        selectedSheet,\r\n        setSelectedSheet,\r\n        showNotifications,\r\n        setShowNotifications,\r\n        shareCart,\r\n        showShareCart,\r\n        setShowShareCart,\r\n        addToShareCart,\r\n        removeFromShareCart,\r\n        clearShareCart,\r\n      }}\r\n    >\r\n      {children}\r\n    </UIContext.Provider>\r\n  );\r\n};\r\n\r\nexport default UIContext;\r\n","\"use client\";\r\n\r\nimport { createContext, useContext, useState, useEffect, useCallback, type ReactNode } from \"react\";\r\nimport Storage from \"@lib/storage\";\r\nimport { API, USE_API } from \"@lib/api\";\r\n\r\ninterface User {\r\n  id: number;\r\n  username: string;\r\n  nome: string;\r\n  is_admin: boolean;\r\n  instrumento?: string;\r\n  foto_url?: string;\r\n}\r\n\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  setUser: (user: User | null) => void;\r\n  logout: () => void;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | null>(null);\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (!context) {\r\n    throw new Error(\"useAuth must be used within AuthProvider\");\r\n  }\r\n  return context;\r\n};\r\n\r\nexport const AuthProvider = ({\r\n  children,\r\n  onTokenExpired,\r\n}: {\r\n  children: ReactNode;\r\n  onTokenExpired?: () => void;\r\n}) => {\r\n  const [user, setUser] = useState<User | null>(() =>\r\n    Storage.get<User | null>(\"user\", null)\r\n  );\r\n\r\n  const logout = useCallback(() => {\r\n    API.logout();\r\n    setUser(null);\r\n    Storage.remove(\"user\");\r\n    Storage.remove(\"favorites\");\r\n    Storage.remove(\"authToken\");\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    API.setOnTokenExpired(() => {\r\n      logout();\r\n      if (onTokenExpired) onTokenExpired();\r\n    });\r\n    return () => {\r\n      API.setOnTokenExpired(null);\r\n    };\r\n  }, [logout, onTokenExpired]);\r\n\r\n  useEffect(() => {\r\n    if (USE_API && API.isTokenExpired()) {\r\n      logout();\r\n    }\r\n  }, [logout]);\r\n\r\n  useEffect(() => {\r\n    Storage.set(\"user\", user);\r\n  }, [user]);\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, setUser, logout }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AuthContext;\r\n"],"names":[],"mappings":"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"}