{"version":3,"sources":["../../../../../frontend-next/src/components/common/Header.tsx","../../../../../frontend-next/app/%28auth%29/buscar/page.tsx","../../../../../frontend-next/src/hooks/useDebounce.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport type { ReactNode } from \"react\";\r\nimport { Icons } from \"@constants/icons\";\r\n\r\ninterface HeaderProps {\r\n  title: string;\r\n  subtitle?: string;\r\n  showBack?: boolean;\r\n  onBack?: () => void;\r\n  actions?: ReactNode;\r\n}\r\n\r\nconst Header = ({ title, subtitle, showBack, onBack, actions }: HeaderProps) => (\r\n  <header style={{\r\n    padding: \"16px 20px\",\r\n    paddingTop: \"max(env(safe-area-inset-top), 16px)\",\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n  }}>\r\n    <div style={{ display: \"flex\", alignItems: \"center\", gap: \"12px\" }}>\r\n      {showBack && (\r\n        <button\r\n          className=\"btn-hover\"\r\n          onClick={onBack}\r\n          style={{\r\n            width: \"40px\", height: \"40px\", borderRadius: \"var(--radius-sm)\",\r\n            background: \"var(--bg-card)\", border: \"1px solid var(--border)\",\r\n            color: \"var(--text-primary)\",\r\n            display: \"flex\", alignItems: \"center\", justifyContent: \"center\", cursor: \"pointer\",\r\n          }}\r\n        >\r\n          <div style={{ width: \"20px\", height: \"20px\" }}><Icons.Back /></div>\r\n        </button>\r\n      )}\r\n      <div>\r\n        <h1 style={{\r\n          fontFamily: \"var(--font-sans)\",\r\n          fontWeight: 700,\r\n          letterSpacing: \"-0.5px\",\r\n          color: \"var(--text-primary)\",\r\n          fontSize: subtitle ? \"28px\" : \"26px\",\r\n        }}>\r\n          {title}\r\n        </h1>\r\n        {subtitle && (\r\n          <p style={{ fontSize: \"14px\", color: \"var(--text-muted)\", marginTop: \"2px\" }}>\r\n            {subtitle}\r\n          </p>\r\n        )}\r\n      </div>\r\n    </div>\r\n    {actions && <div style={{ display: \"flex\", gap: \"10px\" }}>{actions}</div>}\r\n  </header>\r\n);\r\n\r\nexport default Header;\r\n","\"use client\";\r\n\r\n// ===== SEARCH SCREEN =====\r\n// Tela de busca com fuzzy search\r\n\r\nimport { useState, useMemo, useCallback } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useData } from \"@contexts/DataContext\";\r\nimport { Icons } from \"@constants/icons\";\r\nimport Header from \"@components/common/Header\";\r\nimport CategoryIcon from \"@components/common/CategoryIcon\";\r\nimport useDebounce from \"@hooks/useDebounce\";\r\nimport { levenshtein } from \"@utils/search\";\r\nimport type { Category } from \"@constants/categories\";\r\n\r\n// -- Types --\r\n\r\ninterface SearchResultSheet {\r\n  id: string;\r\n  title: string;\r\n  composer: string;\r\n  category: Category;\r\n  year: number;\r\n  downloads: number;\r\n  featured: boolean;\r\n  hasFile?: boolean;\r\n  apiId?: number;\r\n  score: number;\r\n}\r\n\r\n// Regex hoisted para evitar criacao repetida dentro do loop\r\nconst WHITESPACE_REGEX = /\\s+/;\r\n\r\n// Normaliza texto para busca (estilo YouTube)\r\n// - Remove acentos e diacriticos\r\n// - Normaliza \"n.\", \"n \" para \"n\" (permite \"n 6\" encontrar \"N. 6\")\r\n// - Remove indicadores ordinais\r\nconst normalize = (str: string): string => {\r\n  return str\r\n    .toLowerCase()\r\n    .normalize(\"NFD\")\r\n    .replace(/[\\u0300-\\u036f]/g, \"\") // Remove acentos\r\n    .replace(/[ºª°]/g, \"\") // Remove indicadores ordinais\r\n    .replace(/n[°º.]?\\s*/gi, \"n\") // \"n. \", \"n \" -> \"n\"\r\n    .replace(/\\./g, \" \") // Pontos viram espacos\r\n    .replace(WHITESPACE_REGEX, \" \") // Colapsa espacos multiplos\r\n    .trim();\r\n};\r\n\r\n// Transliteracoes de grafias antigas/alternativas para modernas\r\n// Permite que \"ninfas\" encontre \"nymphas\", \"filosofia\" encontre \"philosophia\", etc.\r\nconst transliterate = (str: string): string => {\r\n  return (\r\n    str\r\n      // Grafias gregas/latinas antigas (ordem importa!)\r\n      .replace(/mph/g, \"nf\") // nymphas -> ninfas (nasal antes de ph)\r\n      .replace(/ph/g, \"f\") // philosophia -> filosofia\r\n      .replace(/th/g, \"t\") // theatro -> teatro\r\n      .replace(/y/g, \"i\") // nymphas -> ninfas, lyra -> lira\r\n      .replace(/ch(?=[aeiou])/g, \"c\") // chronica -> cronica (antes de vogal)\r\n      .replace(/rh/g, \"r\") // rhetorica -> retorica\r\n      // Duplicacoes antigas\r\n      .replace(/ll/g, \"l\") // belleza -> beleza\r\n      .replace(/mm/g, \"m\") // commando -> comando\r\n      .replace(/nn/g, \"n\") // anno -> ano\r\n      .replace(/pp/g, \"p\") // appello -> apelo\r\n      .replace(/ss(?!$)/g, \"s\") // passo -> paso (exceto final)\r\n      .replace(/tt/g, \"t\") // attender -> atender\r\n      .replace(/cc/g, \"c\") // accento -> acento\r\n      .replace(/ff/g, \"f\") // affecto -> afeto\r\n      // Outras variacoes\r\n      .replace(/ct/g, \"t\") // facto -> fato\r\n      .replace(/pt/g, \"t\") // optimo -> otimo\r\n      .replace(/mn/g, \"n\") // hymno -> hino\r\n      .replace(/gn/g, \"n\") // signal -> sinal\r\n      // Terminacoes\r\n      .replace(/ão$/g, \"am\") // coracao pode ser buscado como coracam\r\n      .replace(/ção$/g, \"ssao\") // nacao -> nassao (variante)\r\n  );\r\n};\r\n\r\nconst SearchPage = () => {\r\n  const router = useRouter();\r\n  const { sheets, favorites, toggleFavorite, categoriesMap } = useData();\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n\r\n  // Debounce de 300ms para evitar re-renders excessivos\r\n  const debouncedQuery = useDebounce(searchQuery, 300);\r\n\r\n  // Busca fuzzy nos sheets - agora com busca por palavras individuais e transliteracao\r\n  const searchResults = useMemo((): SearchResultSheet[] => {\r\n    if (!debouncedQuery.trim()) return [];\r\n\r\n    const query = normalize(debouncedQuery);\r\n    const queryTranslit = transliterate(query); // \"ninfas\" fica \"ninfas\"\r\n    const queryWords = query.split(WHITESPACE_REGEX).filter((w) => w.length > 0);\r\n    const queryWordsTranslit = queryWords.map((w) => transliterate(w));\r\n\r\n    // Combinar map + filter + sort em um unico loop para melhor performance\r\n    const results: SearchResultSheet[] = [];\r\n\r\n    for (const sheet of sheets) {\r\n      const titleNorm = normalize(sheet.title);\r\n      const titleTranslit = transliterate(titleNorm); // \"nymphas\" -> \"ninfas\"\r\n      const composerNorm = normalize(sheet.composer);\r\n      const composerTranslit = transliterate(composerNorm);\r\n      const category = categoriesMap.get(sheet.category);\r\n      const categoryNorm = normalize(category?.name || \"\");\r\n\r\n      let score = 0;\r\n\r\n      // Busca pela query completa (normal e transliterada)\r\n      if (titleNorm.startsWith(query)) score += 100;\r\n      else if (titleNorm.includes(query)) score += 50;\r\n      else if (titleTranslit.startsWith(queryTranslit)) score += 95; // Match transliterado\r\n      else if (titleTranslit.includes(queryTranslit)) score += 45;\r\n\r\n      if (composerNorm.startsWith(query)) score += 80;\r\n      else if (composerNorm.includes(query)) score += 40;\r\n      else if (composerTranslit.startsWith(queryTranslit)) score += 75;\r\n      else if (composerTranslit.includes(queryTranslit)) score += 35;\r\n\r\n      if (categoryNorm.startsWith(query)) score += 60;\r\n      else if (categoryNorm.includes(query)) score += 30;\r\n\r\n      // Busca por palavras individuais - TODAS devem ser encontradas\r\n      let allWordsFound = true;\r\n      let wordScoreSum = 0;\r\n\r\n      for (let idx = 0; idx < queryWords.length; idx++) {\r\n        const word = queryWords[idx];\r\n        if (word.length < 1) continue; // Ignora palavras vazias\r\n\r\n        const wordTranslit = queryWordsTranslit[idx];\r\n        let wordScore = 0;\r\n        let found = false;\r\n\r\n        // Match exato\r\n        if (titleNorm.includes(word)) {\r\n          wordScore += 25;\r\n          found = true;\r\n        } else if (titleTranslit.includes(wordTranslit)) {\r\n          wordScore += 22;\r\n          found = true;\r\n        } else if (composerNorm.includes(word)) {\r\n          wordScore += 20;\r\n          found = true;\r\n        } else if (composerTranslit.includes(wordTranslit)) {\r\n          wordScore += 18;\r\n          found = true;\r\n        } else if (categoryNorm.includes(word)) {\r\n          wordScore += 15;\r\n          found = true;\r\n        }\r\n\r\n        // Fuzzy match apenas se nao encontrou exato\r\n        if (!found) {\r\n          // Combina titulo + compositor + categoria para busca\r\n          const searchText = `${titleNorm} ${composerNorm} ${categoryNorm}`;\r\n          const allWords = searchText.split(WHITESPACE_REGEX);\r\n\r\n          for (const tw of allWords) {\r\n            const dist = levenshtein(word, tw);\r\n            if (dist <= 1) {\r\n              // Tolerancia mais baixa (era 2)\r\n              wordScore += 10 - dist * 5;\r\n              found = true;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n\r\n        if (!found) {\r\n          allWordsFound = false;\r\n          break; // Early exit se alguma palavra nao foi encontrada\r\n        }\r\n\r\n        wordScoreSum += wordScore;\r\n      }\r\n\r\n      // Se alguma palavra nao foi encontrada, pular esta partitura\r\n      if (!allWordsFound) continue;\r\n\r\n      // Soma scores das palavras\r\n      score += wordScoreSum;\r\n\r\n      // Bonus se todas palavras encontradas (multiplas palavras)\r\n      if (queryWords.length > 1) {\r\n        score += 30;\r\n      }\r\n\r\n      // Fuzzy match para query completa\r\n      const titleDist = levenshtein(query, titleNorm.slice(0, query.length));\r\n      const composerDist = levenshtein(query, composerNorm.slice(0, query.length));\r\n\r\n      if (titleDist <= 2) score += 20 - titleDist * 5;\r\n      if (composerDist <= 2) score += 15 - composerDist * 5;\r\n\r\n      // Apenas adicionar se score > 0 (combina filter no loop)\r\n      if (score > 0 && category) {\r\n        results.push({ ...sheet, score, category });\r\n      }\r\n    }\r\n\r\n    // Sort uma unica vez no final\r\n    results.sort((a, b) => b.score - a.score);\r\n\r\n    return results;\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps -- categoriesMap e estavel apos carregamento inicial\r\n  }, [debouncedQuery, sheets]);\r\n\r\n  const handleClear = useCallback(() => setSearchQuery(\"\"), []);\r\n\r\n  return (\r\n    <div style={{ width: \"100%\" }}>\r\n      <Header title=\"Buscar\" subtitle=\"Encontre partituras\" />\r\n\r\n      {/* Barra de busca */}\r\n      <div style={{ padding: \"0 20px\", marginBottom: \"20px\" }}>\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            gap: \"12px\",\r\n            background: \"var(--bg-card)\",\r\n            border: \"1px solid var(--border)\",\r\n            borderRadius: \"14px\",\r\n            padding: \"14px 18px\",\r\n            transition: \"all 0.2s ease\",\r\n            boxShadow: searchQuery ? \"0 4px 12px rgba(0,0,0,0.08)\" : \"none\",\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              width: \"20px\",\r\n              height: \"20px\",\r\n              color: \"var(--text-muted)\",\r\n              flexShrink: 0,\r\n            }}\r\n          >\r\n            <Icons.Search />\r\n          </div>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Título, compositor ou gênero...\"\r\n            value={searchQuery}\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\n            autoFocus\r\n            autoComplete=\"off\"\r\n            style={{\r\n              flex: 1,\r\n              border: \"none\",\r\n              background: \"transparent\",\r\n              outline: \"none\",\r\n              fontFamily: \"var(--font-sans)\",\r\n              fontSize: \"15px\",\r\n              color: \"var(--text-primary)\",\r\n              WebkitAppearance: \"none\",\r\n            }}\r\n          />\r\n          {searchQuery && (\r\n            <button\r\n              onClick={handleClear}\r\n              style={{\r\n                background: \"var(--bg-secondary)\",\r\n                border: \"none\",\r\n                borderRadius: \"50%\",\r\n                width: \"24px\",\r\n                height: \"24px\",\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"center\",\r\n                cursor: \"pointer\",\r\n                color: \"var(--text-muted)\",\r\n                fontSize: \"14px\",\r\n                flexShrink: 0,\r\n              }}\r\n            >\r\n              x\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Estado vazio */}\r\n      {searchQuery.trim() === \"\" && (\r\n        <div\r\n          style={{\r\n            textAlign: \"center\",\r\n            padding: \"40px 40px\",\r\n            color: \"var(--text-muted)\",\r\n            animation: \"fadeIn 0.3s ease\",\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              width: \"80px\",\r\n              height: \"80px\",\r\n              margin: \"0 auto 20px\",\r\n              opacity: 0.2,\r\n              color: \"var(--primary)\",\r\n            }}\r\n          >\r\n            <Icons.Search />\r\n          </div>\r\n          <p\r\n            style={{\r\n              fontFamily: \"var(--font-sans)\",\r\n              fontSize: \"15px\",\r\n              marginBottom: \"8px\",\r\n            }}\r\n          >\r\n            Digite para buscar\r\n          </p>\r\n          <p\r\n            style={{\r\n              fontFamily: \"var(--font-sans)\",\r\n              fontSize: \"13px\",\r\n              opacity: 0.7,\r\n            }}\r\n          >\r\n            Busque por título, compositor ou gênero\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Sem resultados */}\r\n      {searchQuery.trim() !== \"\" && searchResults.length === 0 && (\r\n        <div\r\n          style={{\r\n            textAlign: \"center\",\r\n            padding: \"40px\",\r\n            color: \"var(--text-muted)\",\r\n            animation: \"fadeIn 0.3s ease\",\r\n          }}\r\n        >\r\n          <p style={{ fontFamily: \"var(--font-sans)\", fontSize: \"15px\" }}>\r\n            Nenhum resultado para &quot;<strong>{searchQuery}</strong>&quot;\r\n          </p>\r\n          <p\r\n            style={{\r\n              fontFamily: \"var(--font-sans)\",\r\n              fontSize: \"13px\",\r\n              opacity: 0.7,\r\n              marginTop: \"8px\",\r\n            }}\r\n          >\r\n            Tente outro termo de busca\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {/* Resultados */}\r\n      {searchResults.length > 0 && (\r\n        <div style={{ animation: \"fadeIn 0.3s ease\" }}>\r\n          <p\r\n            style={{\r\n              padding: \"0 20px 12px\",\r\n              color: \"var(--text-muted)\",\r\n              fontSize: \"13px\",\r\n              fontFamily: \"var(--font-sans)\",\r\n            }}\r\n          >\r\n            {searchResults.length} resultado\r\n            {searchResults.length !== 1 ? \"s\" : \"\"} encontrado\r\n            {searchResults.length !== 1 ? \"s\" : \"\"}\r\n          </p>\r\n\r\n          <div\r\n            style={{\r\n              padding: \"0 20px\",\r\n              contentVisibility: \"auto\",\r\n              containIntrinsicSize: \"0 2000px\",\r\n            }}\r\n          >\r\n            {searchResults.map((sheet, index) => (\r\n              <div\r\n                key={sheet.id}\r\n                onClick={() => {\r\n                  router.push(`/acervo/${sheet.category.id}/${sheet.id}`);\r\n                }}\r\n                style={{\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  gap: \"14px\",\r\n                  padding: \"14px\",\r\n                  background: \"var(--bg-card)\",\r\n                  borderRadius: \"14px\",\r\n                  marginBottom: \"10px\",\r\n                  cursor: \"pointer\",\r\n                  border: \"1px solid var(--border)\",\r\n                  transition: \"all 0.2s ease\",\r\n                  animation: `fadeSlideIn 0.3s ease ${index * 0.03}s both`,\r\n                }}\r\n              >\r\n                <div\r\n                  style={{\r\n                    width: \"50px\",\r\n                    height: \"50px\",\r\n                    borderRadius: \"12px\",\r\n                    background:\r\n                      \"linear-gradient(145deg, #3a3a4a 0%, #2a2a38 100%)\",\r\n                    border: \"1px solid rgba(212, 175, 55, 0.2)\",\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    justifyContent: \"center\",\r\n                    flexShrink: 0,\r\n                  }}\r\n                >\r\n                  <CategoryIcon\r\n                    categoryId={sheet.category.id}\r\n                    size={22}\r\n                    color=\"#D4AF37\"\r\n                  />\r\n                </div>\r\n\r\n                <div style={{ flex: 1, minWidth: 0 }}>\r\n                  <p\r\n                    style={{\r\n                      fontFamily: \"var(--font-sans)\",\r\n                      fontSize: \"15px\",\r\n                      fontWeight: \"600\",\r\n                      color: \"var(--text-primary)\",\r\n                      marginBottom: \"3px\",\r\n                      whiteSpace: \"nowrap\",\r\n                      overflow: \"hidden\",\r\n                      textOverflow: \"ellipsis\",\r\n                    }}\r\n                  >\r\n                    {sheet.title}\r\n                  </p>\r\n                  <p\r\n                    style={{\r\n                      fontFamily: \"var(--font-sans)\",\r\n                      fontSize: \"13px\",\r\n                      color: \"var(--text-muted)\",\r\n                    }}\r\n                  >\r\n                    {sheet.composer} &bull;{\" \"}\r\n                    <span style={{ color: \"#D4AF37\" }}>\r\n                      {sheet.category.name}\r\n                    </span>\r\n                  </p>\r\n                </div>\r\n\r\n                <button\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    toggleFavorite(sheet.id);\r\n                  }}\r\n                  style={{\r\n                    background: favorites.includes(sheet.id)\r\n                      ? \"rgba(232,90,79,0.1)\"\r\n                      : \"transparent\",\r\n                    border: \"none\",\r\n                    borderRadius: \"10px\",\r\n                    width: \"38px\",\r\n                    height: \"38px\",\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    justifyContent: \"center\",\r\n                    cursor: \"pointer\",\r\n                    color: favorites.includes(sheet.id)\r\n                      ? \"var(--primary)\"\r\n                      : \"var(--text-muted)\",\r\n                    transition: \"all 0.2s ease\",\r\n                    flexShrink: 0,\r\n                  }}\r\n                >\r\n                  <div style={{ width: \"18px\", height: \"18px\" }}>\r\n                    <Icons.Heart filled={favorites.includes(sheet.id)} />\r\n                  </div>\r\n                </button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchPage;\r\n","\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\n\r\nconst useDebounce = <T>(value: T, delay = 300): T => {\r\n  const [debouncedValue, setDebouncedValue] = useState(value);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setDebouncedValue(value);\r\n    }, delay);\r\n\r\n    return () => clearTimeout(timer);\r\n  }, [value, delay]);\r\n\r\n  return debouncedValue;\r\n};\r\n\r\nexport default useDebounce;\r\n"],"names":[],"mappings":"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"}