{"version":3,"sources":["../../../../../frontend-next/src/components/admin/AdminPartituras.tsx","../../../../../frontend-next/src/components/animations/LottieAnimation.tsx","../../../../../frontend-next/src/components/admin/UploadPastaModal.tsx","../../../../../frontend-next/src/components/onboarding/TutorialOverlay.tsx"],"sourcesContent":["\"use client\";\r\n\r\n// ===== ADMIN PARTITURAS =====\r\n// Gerenciamento de partituras com expansao inline e preview de PDF\r\n\r\nimport { useState, useEffect, useMemo, useRef, useCallback, lazy, Suspense } from 'react';\r\n\r\nimport { useUI } from '@/contexts/UIContext';\r\nimport { API } from '@/lib/api';\r\nimport CategoryIcon from '@/components/common/CategoryIcon';\r\nimport { PartesGridSkeleton } from '@/components/common/Skeleton';\r\nimport UploadPastaModal from './UploadPastaModal';\r\nimport TutorialOverlay, { useTutorial } from '@/components/onboarding/TutorialOverlay';\r\nimport RepertorioSelectorModal from '@/components/modals/RepertorioSelectorModal';\r\nimport Storage from '@/lib/storage';\r\nimport { API_BASE_URL } from '@/constants/api';\r\n\r\nconst PDFViewerModal = lazy(() => import('@/components/modals/PDFViewerModal'));\r\nconst ImportacaoLoteModal = lazy(() => import('@/components/modals/ImportacaoLoteModal'));\r\n\r\n// ===== Interfaces =====\r\n\r\ninterface Categoria {\r\n  id: string;\r\n  nome: string;\r\n}\r\n\r\ninterface Partitura {\r\n  id: string | number;\r\n  titulo?: string;\r\n  compositor?: string | null;\r\n  categoria_id?: string;\r\n  ano?: string | number;\r\n  destaque?: number;\r\n  downloads?: number;\r\n  total_partes?: number | string;\r\n}\r\n\r\ninterface Parte {\r\n  id: string | number;\r\n  instrumento: string;\r\n}\r\n\r\ninterface PreviewParte {\r\n  parteId: string | number;\r\n  blobUrl: string;\r\n  instrumento: string;\r\n}\r\n\r\ninterface Repertorio {\r\n  id: string | number;\r\n  nome: string;\r\n  ativo?: number;\r\n  partituras?: Partitura[];\r\n}\r\n\r\ninterface DroppedFiles {\r\n  files: File[];\r\n  folderName: string;\r\n}\r\n\r\ninterface FileSystemEntryLike {\r\n  isFile: boolean;\r\n  isDirectory: boolean;\r\n  name: string;\r\n  file: (successCallback: (file: File) => void, errorCallback?: (err: unknown) => void) => void;\r\n  createReader: () => {\r\n    readEntries: (successCallback: (entries: FileSystemEntryLike[]) => void, errorCallback?: (err: unknown) => void) => void;\r\n  };\r\n}\r\n\r\n// Helper para detectar instrumento pelo nome do arquivo\r\nconst detectInstrumento = (filename: string): string => {\r\n  const name = filename.toLowerCase().replace(/\\.pdf$/i, '');\r\n\r\n  const patterns: Array<{ pattern: RegExp; name: string | ((m: RegExpMatchArray) => string) }> = [\r\n    { pattern: /grade|regente|maestro|partitura.*geral/i, name: 'Grade' },\r\n    { pattern: /flauta|flaut/i, name: 'Flauta' },\r\n    { pattern: /requinta/i, name: 'Requinta' },\r\n    { pattern: /clarinete?\\s*(bb|si\\s*b)?\\s*[123]|clar.*[123]/i, name: (m: RegExpMatchArray) => `Clarinete Bb ${m[0].match(/[123]/)?.[0] || '1'}` },\r\n    { pattern: /clarinete|clar/i, name: 'Clarinete' },\r\n    { pattern: /sax.*alto|alto.*sax/i, name: 'Sax Alto' },\r\n    { pattern: /sax.*tenor|tenor.*sax/i, name: 'Sax Tenor' },\r\n    { pattern: /sax.*bar[ií]tono|bar[ií]tono.*sax/i, name: 'Sax Bar\\u00edtono' },\r\n    { pattern: /sax.*soprano|soprano.*sax/i, name: 'Sax Soprano' },\r\n    { pattern: /trompete?\\s*[123]|trump.*[123]/i, name: (m: RegExpMatchArray) => `Trompete ${m[0].match(/[123]/)?.[0] || '1'}` },\r\n    { pattern: /trompete|trump/i, name: 'Trompete' },\r\n    { pattern: /trombone\\s*[123]/i, name: (m: RegExpMatchArray) => `Trombone ${m[0].match(/[123]/)?.[0] || '1'}` },\r\n    { pattern: /trombone/i, name: 'Trombone' },\r\n    { pattern: /bombardino|euph|flicorne/i, name: 'Bombardino' },\r\n    { pattern: /tuba|sousafone|bass/i, name: 'Tuba' },\r\n    { pattern: /caixa.*clara|snare/i, name: 'Caixa Clara' },\r\n    { pattern: /bumbo|bass.*drum/i, name: 'Bumbo' },\r\n    { pattern: /prato/i, name: 'Pratos' },\r\n    { pattern: /percuss/i, name: 'Percuss\\u00e3o' },\r\n    { pattern: /horn|trompa/i, name: 'Trompa' },\r\n  ];\r\n\r\n  for (const { pattern, name: instrName } of patterns) {\r\n    const match = name.match(pattern);\r\n    if (match) {\r\n      return typeof instrName === 'function' ? instrName(match) : instrName;\r\n    }\r\n  }\r\n\r\n  // Se nao detectou, usa o nome do arquivo limpo\r\n  return name.replace(/[-_]/g, ' ').replace(/\\s+/g, ' ').trim() || 'Parte';\r\n};\r\n\r\nconst AdminPartituras = () => {\r\n  const { showToast } = useUI();\r\n  const [partituras, setPartituras] = useState<Partitura[]>([]);\r\n  const [categorias, setCategorias] = useState<Categoria[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [search, setSearch] = useState('');\r\n  const [filterCategoria, setFilterCategoria] = useState('');\r\n  const [showCatDropdown, setShowCatDropdown] = useState(false);\r\n  const [showUploadModal, setShowUploadModal] = useState(false);\r\n  const [showImportacaoLote, setShowImportacaoLote] = useState(false);\r\n\r\n  // Estado para drag & drop global na tela\r\n  const [isDraggingOver, setIsDraggingOver] = useState(false);\r\n  const [droppedFiles, setDroppedFiles] = useState<DroppedFiles | null>(null);\r\n  const [droppedEntries, setDroppedEntries] = useState<FileSystemEntryLike[] | null>(null);\r\n  const dragCounterRef = useRef(0);\r\n\r\n  // Estado para expansao inline\r\n  const [expandedId, setExpandedId] = useState<string | number | null>(null);\r\n  const [partes, setPartes] = useState<Parte[]>([]);\r\n  const [loadingPartes, setLoadingPartes] = useState(false);\r\n  const [uploading, setUploading] = useState<string | number | null>(null);\r\n  const [deleting, setDeleting] = useState<string | number | null>(null);\r\n  const [addingPart, setAddingPart] = useState(false);\r\n  const addFileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  // Estado para pre-visualizacao do PDF (modal)\r\n  const [previewParte, setPreviewParte] = useState<PreviewParte | null>(null);\r\n  const [loadingPreview, setLoadingPreview] = useState(false);\r\n  const [showPDFModal, setShowPDFModal] = useState(false);\r\n\r\n  // Cache de contagem de partes por partitura\r\n  const [partesCount, setPartesCount] = useState<Record<string | number, number>>({});\r\n\r\n  // Estado para modal de edicao\r\n  const [editModalOpen, setEditModalOpen] = useState(false);\r\n  const [editingPartitura, setEditingPartitura] = useState<Partitura | null>(null);\r\n  const [editForm, setEditForm] = useState({ titulo: '', compositor: '', categoria_id: '' });\r\n  const [savingEdit, setSavingEdit] = useState(false);\r\n\r\n  // Estado para repertorio\r\n  const [repertorios, setRepertorios] = useState<Repertorio[]>([]);\r\n  const [repertorioAtivo, setRepertorioAtivo] = useState<Repertorio | null>(null);\r\n  const [partiturasInRepertorio, setPartiturasInRepertorio] = useState<Set<string | number>>(new Set());\r\n  const [showRepertorioModal, setShowRepertorioModal] = useState(false);\r\n  const [selectedPartituraForRepertorio, setSelectedPartituraForRepertorio] = useState<Partitura | null>(null);\r\n  const [loadingRepertorios, setLoadingRepertorios] = useState(false);\r\n\r\n  // Funcoes para modal de edicao\r\n  const openEditModal = (partitura: Partitura) => {\r\n    setEditingPartitura(partitura);\r\n    setEditForm({\r\n      titulo: partitura.titulo || '',\r\n      compositor: partitura.compositor || '',\r\n      categoria_id: partitura.categoria_id || ''\r\n    });\r\n    setEditModalOpen(true);\r\n  };\r\n\r\n  const closeEditModal = () => {\r\n    setEditModalOpen(false);\r\n    setEditingPartitura(null);\r\n    setEditForm({ titulo: '', compositor: '', categoria_id: '' });\r\n  };\r\n\r\n  const saveEditModal = async () => {\r\n    if (!editingPartitura) return;\r\n\r\n    setSavingEdit(true);\r\n    try {\r\n      const updateData = {\r\n        ...editingPartitura,\r\n        titulo: editForm.titulo || editingPartitura.titulo,\r\n        compositor: editForm.compositor || null,\r\n        categoria_id: editForm.categoria_id || editingPartitura.categoria_id\r\n      };\r\n      await API.updatePartitura(editingPartitura.id, updateData);\r\n\r\n      // Atualiza estado local\r\n      setPartituras(prev => prev.map(p =>\r\n        p.id === editingPartitura.id ? {\r\n          ...p,\r\n          titulo: editForm.titulo || p.titulo,\r\n          compositor: editForm.compositor || null,\r\n          categoria_id: editForm.categoria_id || p.categoria_id\r\n        } : p\r\n      ));\r\n\r\n      showToast('Partitura atualizada com sucesso!');\r\n      closeEditModal();\r\n    } catch (err: unknown) {\r\n      const message = err instanceof Error ? err.message : 'Erro ao salvar';\r\n      showToast(message, 'error');\r\n    } finally {\r\n      setSavingEdit(false);\r\n    }\r\n  };\r\n\r\n  // Acao pendente apos tutorial (ex: abrir modal de upload quando veio pelo atalho)\r\n  const [pendingAction, setPendingAction] = useState<string | null>(null);\r\n\r\n  // Ref para rastrear se o tutorial ja foi mostrado (distingue \"nunca apareceu\" de \"foi fechado\")\r\n  const tutorialWasShown = useRef(false);\r\n\r\n  // Tutorial de onboarding\r\n  // tutorialPending = true durante o delay antes do tutorial aparecer (bloqueia interacoes)\r\n  const [showTutorial, setShowTutorial, tutorialPending] = useTutorial(partituras, loading);\r\n\r\n  // Rastrear quando o tutorial aparece\r\n  useEffect(() => {\r\n    if (showTutorial) {\r\n      tutorialWasShown.current = true;\r\n    }\r\n  }, [showTutorial]);\r\n\r\n  // Normalizacao avancada para busca (estilo YouTube)\r\n  const normalizeText = (text: string | null | undefined): string => {\r\n    if (!text) return '';\r\n    return text.toLowerCase()\r\n      .normalize('NFD')\r\n      .replace(/[\\u0300-\\u036f]/g, '')\r\n      .replace(/[\\u00BA\\u00AA\\u00B0]/g, '')\r\n      .replace(/n[\\u00B0\\u00BA.]?\\s*/gi, 'n')\r\n      .replace(/\\./g, ' ')\r\n      .replace(/\\s+/g, ' ')\r\n      .trim();\r\n  };\r\n\r\n  // Verifica se todos os termos da busca estao presentes (em qualquer ordem)\r\n  const matchesSearch = useCallback((text: string | null | undefined, query: string): boolean => {\r\n    if (!query) return true;\r\n    const normalizedText = normalizeText(text);\r\n    const queryTerms = normalizeText(query).split(' ').filter(t => t.length > 0);\r\n    return queryTerms.every(term => normalizedText.includes(term));\r\n  }, []);\r\n\r\n  // ===== DRAG & DROP GLOBAL =====\r\n  // Funcao para ler entradas de diretorio recursivamente\r\n  const readAllEntriesRecursively = async (entry: FileSystemEntryLike, path: string = ''): Promise<File[]> => {\r\n    const files: File[] = [];\r\n    if (entry.isFile) {\r\n      const file = await new Promise<File>((resolve, reject) => {\r\n        try {\r\n          entry.file(resolve, reject);\r\n        } catch (err) {\r\n          reject(err);\r\n        }\r\n      });\r\n      Object.defineProperty(file, 'webkitRelativePath', {\r\n        value: path + file.name,\r\n        writable: false\r\n      });\r\n      files.push(file);\r\n    } else if (entry.isDirectory) {\r\n      const reader = entry.createReader();\r\n      const entries = await new Promise<FileSystemEntryLike[]>((resolve, reject) => {\r\n        const allEntries: FileSystemEntryLike[] = [];\r\n        const readEntries = () => {\r\n          reader.readEntries((results: FileSystemEntryLike[]) => {\r\n            if (results.length === 0) {\r\n              resolve(allEntries);\r\n            } else {\r\n              allEntries.push(...results);\r\n              readEntries();\r\n            }\r\n          }, reject);\r\n        };\r\n        readEntries();\r\n      });\r\n      for (const childEntry of entries) {\r\n        const childFiles = await readAllEntriesRecursively(childEntry, path + entry.name + '/');\r\n        files.push(...childFiles);\r\n      }\r\n    }\r\n    return files;\r\n  };\r\n\r\n  // Handlers de drag & drop global\r\n  const handleGlobalDragEnter = useCallback((e: DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    dragCounterRef.current++;\r\n    if (e.dataTransfer?.types.includes('Files')) {\r\n      setIsDraggingOver(true);\r\n    }\r\n  }, []);\r\n\r\n  const handleGlobalDragLeave = useCallback((e: DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    dragCounterRef.current--;\r\n    if (dragCounterRef.current === 0) {\r\n      setIsDraggingOver(false);\r\n    }\r\n  }, []);\r\n\r\n  const handleGlobalDragOver = useCallback((e: DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  }, []);\r\n\r\n  const handleGlobalDrop = useCallback(async (e: DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsDraggingOver(false);\r\n    dragCounterRef.current = 0;\r\n\r\n    const items = e.dataTransfer?.items;\r\n    if (!items || items.length === 0) return;\r\n\r\n    // Conta quantas pastas foram soltas\r\n    const folderEntries: FileSystemEntryLike[] = [];\r\n    for (let i = 0; i < items.length; i++) {\r\n      const entry = items[i].webkitGetAsEntry?.() as FileSystemEntryLike | null;\r\n      if (entry?.isDirectory) {\r\n        folderEntries.push(entry);\r\n      }\r\n    }\r\n\r\n    if (folderEntries.length === 0) {\r\n      showToast('Arraste uma pasta contendo arquivos PDF', 'error');\r\n      return;\r\n    }\r\n\r\n    // Verifica se e uma pasta com subpastas (lote) ou pasta simples\r\n    if (folderEntries.length === 1) {\r\n      const mainFolder = folderEntries[0];\r\n      const reader = mainFolder.createReader();\r\n\r\n      const entries = await new Promise<FileSystemEntryLike[]>((resolve) => {\r\n        const allEntries: FileSystemEntryLike[] = [];\r\n        const readEntries = () => {\r\n          reader.readEntries((results: FileSystemEntryLike[]) => {\r\n            if (results.length === 0) {\r\n              resolve(allEntries);\r\n            } else {\r\n              allEntries.push(...results);\r\n              readEntries();\r\n            }\r\n          });\r\n        };\r\n        readEntries();\r\n      });\r\n\r\n      // Conta subpastas que contem PDFs\r\n      const subFolders = entries.filter(e => e.isDirectory);\r\n      const hasPDFsInRoot = entries.some(e => e.isFile && e.name.toLowerCase().endsWith('.pdf'));\r\n\r\n      if (subFolders.length > 0 && !hasPDFsInRoot) {\r\n        // Tem subpastas e nao tem PDFs na raiz -> Importacao em Lote\r\n        setDroppedEntries(folderEntries);\r\n        setShowImportacaoLote(true);\r\n      } else if (hasPDFsInRoot) {\r\n        // Tem PDFs na raiz -> Upload de Pasta simples\r\n        const allFiles = await readAllEntriesRecursively(mainFolder, '');\r\n        const pdfFiles = allFiles.filter(f => f.name.toLowerCase().endsWith('.pdf'));\r\n\r\n        if (pdfFiles.length === 0) {\r\n          showToast('Nenhum arquivo PDF encontrado na pasta', 'error');\r\n          return;\r\n        }\r\n\r\n        setDroppedFiles({ files: pdfFiles, folderName: mainFolder.name });\r\n        setShowUploadModal(true);\r\n      } else {\r\n        // Pasta vazia ou sem PDFs\r\n        showToast('Nenhum arquivo PDF encontrado na pasta', 'error');\r\n      }\r\n    } else {\r\n      // Multiplas pastas soltas -> Importacao em Lote\r\n      setDroppedEntries(folderEntries);\r\n      setShowImportacaoLote(true);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [showToast]);\r\n\r\n  // Registra os event listeners globais\r\n  useEffect(() => {\r\n    const container = document.body;\r\n    container.addEventListener('dragenter', handleGlobalDragEnter);\r\n    container.addEventListener('dragleave', handleGlobalDragLeave);\r\n    container.addEventListener('dragover', handleGlobalDragOver);\r\n    container.addEventListener('drop', handleGlobalDrop);\r\n\r\n    return () => {\r\n      container.removeEventListener('dragenter', handleGlobalDragEnter);\r\n      container.removeEventListener('dragleave', handleGlobalDragLeave);\r\n      container.removeEventListener('dragover', handleGlobalDragOver);\r\n      container.removeEventListener('drop', handleGlobalDrop);\r\n    };\r\n  }, [handleGlobalDragEnter, handleGlobalDragLeave, handleGlobalDragOver, handleGlobalDrop]);\r\n\r\n  // Limpa arquivos pre-carregados quando modais fecham\r\n  useEffect(() => {\r\n    if (!showUploadModal) {\r\n      setDroppedFiles(null);\r\n    }\r\n  }, [showUploadModal]);\r\n\r\n  useEffect(() => {\r\n    if (!showImportacaoLote) {\r\n      setDroppedEntries(null);\r\n    }\r\n  }, [showImportacaoLote]);\r\n\r\n  const loadData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const [parts, cats] = await Promise.all([\r\n        API.getPartituras(),\r\n        API.getCategorias()\r\n      ]);\r\n      setPartituras(parts || []);\r\n      setCategorias(cats || []);\r\n    } catch {\r\n      showToast('Erro ao carregar dados', 'error');\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  // Carregar todos os repertorios\r\n  const loadRepertorios = async () => {\r\n    setLoadingRepertorios(true);\r\n    try {\r\n      const [reps, repDetails] = await Promise.all([\r\n        API.getRepertorios(),\r\n        API.getRepertorioAtivo().catch(() => null)\r\n      ]);\r\n      setRepertorios(reps || []);\r\n      const active = reps?.find((r: Repertorio) => r.ativo === 1);\r\n      setRepertorioAtivo(active || null);\r\n\r\n      // Se tem repertorio ativo e conseguiu carregar detalhes, atualizar partituras\r\n      if (active && repDetails?.partituras) {\r\n        setPartiturasInRepertorio(new Set(repDetails.partituras.map((p: Partitura) => p.id)));\r\n      } else {\r\n        setPartiturasInRepertorio(new Set());\r\n      }\r\n    } catch {\r\n      // Silencioso - repertorio pode nao existir\r\n    } finally {\r\n      setLoadingRepertorios(false);\r\n    }\r\n  };\r\n\r\n  // Abrir modal de repertorio\r\n  const openRepertorioModal = (partitura: Partitura) => {\r\n    // Se ja esta no repertorio ativo, remover diretamente\r\n    if (repertorioAtivo && partiturasInRepertorio.has(partitura.id)) {\r\n      removeFromRepertorio(repertorioAtivo.id, partitura.id);\r\n      return;\r\n    }\r\n\r\n    // Se so tem um repertorio e e o ativo, adicionar diretamente\r\n    if (repertorios.length === 1 && repertorioAtivo) {\r\n      addToRepertorio(repertorioAtivo, partitura.id);\r\n      return;\r\n    }\r\n\r\n    // Caso contrario, abrir modal para escolher\r\n    setSelectedPartituraForRepertorio(partitura);\r\n    setShowRepertorioModal(true);\r\n  };\r\n\r\n  // Adicionar partitura ao repertorio (UI otimista)\r\n  const addToRepertorio = async (repertorio: Repertorio, partituraId: string | number) => {\r\n    // UI otimista: atualiza imediatamente\r\n    if (repertorio.ativo === 1) {\r\n      setPartiturasInRepertorio(prev => new Set([...prev, partituraId]));\r\n    }\r\n    setShowRepertorioModal(false);\r\n    setSelectedPartituraForRepertorio(null);\r\n\r\n    try {\r\n      await API.addPartituraToRepertorio(repertorio.id, partituraId);\r\n      showToast(`Adicionada ao \"${repertorio.nome}\"`);\r\n    } catch (err: unknown) {\r\n      // Reverte em caso de erro\r\n      if (repertorio.ativo === 1) {\r\n        setPartiturasInRepertorio(prev => {\r\n          const next = new Set(prev);\r\n          next.delete(partituraId);\r\n          return next;\r\n        });\r\n      }\r\n      const message = err instanceof Error ? err.message : 'Erro ao adicionar';\r\n      showToast(message, 'error');\r\n    }\r\n  };\r\n\r\n  // Remover partitura do repertorio (UI otimista)\r\n  const removeFromRepertorio = async (repertorioId: string | number, partituraId: string | number) => {\r\n    // UI otimista: atualiza imediatamente\r\n    setPartiturasInRepertorio(prev => {\r\n      const next = new Set(prev);\r\n      next.delete(partituraId);\r\n      return next;\r\n    });\r\n\r\n    try {\r\n      await API.removePartituraFromRepertorio(repertorioId, partituraId);\r\n      showToast('Removida do repertório');\r\n    } catch (err: unknown) {\r\n      // Reverte em caso de erro\r\n      setPartiturasInRepertorio(prev => new Set([...prev, partituraId]));\r\n      const message = err instanceof Error ? err.message : 'Erro ao remover';\r\n      showToast(message, 'error');\r\n    }\r\n  };\r\n\r\n  // Criar novo repertorio e adicionar a partitura\r\n  const createRepertorioAndAdd = async (nome: string) => {\r\n    try {\r\n      const result = await API.createRepertorio({ nome, ativo: true });\r\n      showToast('Repertório criado!');\r\n\r\n      // Recarregar repertorios\r\n      await loadRepertorios();\r\n\r\n      // Adicionar partitura ao novo repertorio\r\n      if (selectedPartituraForRepertorio && result.id) {\r\n        await API.addPartituraToRepertorio(result.id, selectedPartituraForRepertorio.id);\r\n        setPartiturasInRepertorio(prev => {\r\n          const updated = new Set(prev);\r\n          updated.add(selectedPartituraForRepertorio.id);\r\n          return updated;\r\n        });\r\n        showToast(`\"${selectedPartituraForRepertorio.titulo}\" adicionada!`);\r\n      }\r\n\r\n      setShowRepertorioModal(false);\r\n      setSelectedPartituraForRepertorio(null);\r\n    } catch (err: unknown) {\r\n      const message = err instanceof Error ? err.message : 'Erro ao criar repertório';\r\n      showToast(message, 'error');\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  useEffect(() => { loadData(); loadRepertorios(); }, []);\r\n\r\n  useEffect(() => {\r\n    const handler = (e: Event) => {\r\n      const detail = (e as CustomEvent).detail;\r\n      if (detail === 'novo') {\r\n        showToast('Funcao de criar partitura em desenvolvimento');\r\n      }\r\n      if (detail === 'pasta') {\r\n        // Verifica se tutorial foi completado diretamente no Storage\r\n        const tutorialCompleted = Storage.get('tutorial_admin_partituras_completed', false);\r\n        const isMobile = window.innerWidth < 768;\r\n\r\n        // Se tutorial nao foi completado e nao e mobile, SEMPRE guarda a acao\r\n        if (!tutorialCompleted && !isMobile) {\r\n          setPendingAction('openUploadModal');\r\n        } else {\r\n          setShowUploadModal(true);\r\n        }\r\n      }\r\n    };\r\n    window.addEventListener('admin-partituras-action', handler);\r\n    return () => window.removeEventListener('admin-partituras-action', handler);\r\n  }, [showToast]);\r\n\r\n  // Executar acao pendente apos tutorial ser fechado\r\n  useEffect(() => {\r\n    if (!pendingAction) return;\r\n\r\n    const tutorialCompleted = Storage.get('tutorial_admin_partituras_completed', false);\r\n\r\n    const tutorialClosedThisSession = tutorialWasShown.current && !showTutorial && !tutorialPending;\r\n    const canExecute = !loading && (tutorialCompleted || tutorialClosedThisSession);\r\n\r\n    if (canExecute) {\r\n      if (pendingAction === 'openUploadModal') {\r\n        setShowUploadModal(true);\r\n      }\r\n      setPendingAction(null);\r\n    }\r\n  }, [showTutorial, tutorialPending, pendingAction, loading]);\r\n\r\n  // Carregar partes quando expandir\r\n  const loadPartes = useCallback(async (partituraId: string | number) => {\r\n    setLoadingPartes(true);\r\n    setPreviewParte(null);\r\n    try {\r\n      const data = await API.getPartesPartitura(partituraId);\r\n      setPartes(data || []);\r\n      setPartesCount(prev => ({ ...prev, [partituraId]: (data || []).length }));\r\n    } catch {\r\n      showToast('Erro ao carregar partes', 'error');\r\n    } finally {\r\n      setLoadingPartes(false);\r\n    }\r\n  }, [showToast]);\r\n\r\n  // Toggle expansao\r\n  const toggleExpand = (partitura: Partitura) => {\r\n    if (expandedId === partitura.id) {\r\n      setExpandedId(null);\r\n      setPartes([]);\r\n      setPreviewParte(null);\r\n    } else {\r\n      setExpandedId(partitura.id);\r\n      loadPartes(partitura.id);\r\n    }\r\n  };\r\n\r\n  // Fechar preview\r\n  const closePreview = useCallback(() => {\r\n    if (previewParte?.blobUrl) {\r\n      URL.revokeObjectURL(previewParte.blobUrl);\r\n    }\r\n    setPreviewParte(null);\r\n    setShowPDFModal(false);\r\n  }, [previewParte]);\r\n\r\n  // Visualizar PDF no modal com autenticacao (usando ID da parte)\r\n  const handleViewPart = useCallback(async (parte: Parte) => {\r\n    if (previewParte?.parteId === parte.id && showPDFModal) {\r\n      closePreview();\r\n      return;\r\n    }\r\n\r\n    setLoadingPreview(true);\r\n\r\n    // Limpa preview anterior se houver\r\n    if (previewParte?.blobUrl) {\r\n      URL.revokeObjectURL(previewParte.blobUrl);\r\n    }\r\n\r\n    try {\r\n      const token = Storage.get<string | null>('authToken', null);\r\n      const url = `${API_BASE_URL}/api/download/parte/${parte.id}`;\r\n\r\n      const blobUrl = await new Promise<string>((resolve, reject) => {\r\n        const xhr = new XMLHttpRequest();\r\n        xhr.open('GET', url, true);\r\n        xhr.responseType = 'arraybuffer';\r\n\r\n        xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\r\n        xhr.setRequestHeader('Accept', 'application/pdf, application/octet-stream');\r\n        if (token) {\r\n          xhr.setRequestHeader('Authorization', `Bearer ${token}`);\r\n        }\r\n\r\n        xhr.onload = function() {\r\n          if (xhr.status >= 200 && xhr.status < 300) {\r\n            const blob = new Blob([xhr.response], { type: 'application/pdf' });\r\n            resolve(URL.createObjectURL(blob));\r\n          } else {\r\n            try {\r\n              const decoder = new TextDecoder('utf-8');\r\n              const text = decoder.decode(xhr.response);\r\n              const errorData = JSON.parse(text);\r\n              reject(new Error(errorData.error || `HTTP ${xhr.status}`));\r\n            } catch {\r\n              reject(new Error(`Erro ao carregar PDF (${xhr.status})`));\r\n            }\r\n          }\r\n        };\r\n\r\n        xhr.onerror = function() {\r\n          reject(new Error('Erro de conexao ao carregar PDF'));\r\n        };\r\n\r\n        xhr.ontimeout = function() {\r\n          reject(new Error('Timeout ao carregar PDF'));\r\n        };\r\n\r\n        xhr.send();\r\n      });\r\n\r\n      setPreviewParte({ parteId: parte.id, blobUrl, instrumento: parte.instrumento });\r\n      setShowPDFModal(true);\r\n    } catch (err: unknown) {\r\n      const message = err instanceof Error ? err.message : 'Erro ao abrir PDF';\r\n      showToast(message, 'error');\r\n    } finally {\r\n      setLoadingPreview(false);\r\n    }\r\n  }, [previewParte, showPDFModal, closePreview, showToast]);\r\n\r\n  // Substituir parte\r\n  const handleReplacePart = async (partituraId: string | number, parteId: string | number, file: File) => {\r\n    if (!file) return;\r\n    setUploading(parteId);\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('arquivo', file);\r\n      await API.replacePartePartitura(partituraId, parteId, formData);\r\n      showToast('Parte substituida com sucesso!');\r\n      await loadPartes(partituraId);\r\n    } catch (err: unknown) {\r\n      const message = err instanceof Error ? err.message : 'Erro ao substituir parte';\r\n      showToast(message, 'error');\r\n    } finally {\r\n      setUploading(null);\r\n    }\r\n  };\r\n\r\n  // Deletar parte\r\n  const handleDeletePart = async (partituraId: string | number, parteId: string | number) => {\r\n    if (!confirm('Remover esta parte da partitura?')) return;\r\n    setDeleting(parteId);\r\n    try {\r\n      await API.deletePartePartitura(partituraId, parteId);\r\n      showToast('Parte removida com sucesso!');\r\n      await Promise.all([\r\n        loadPartes(partituraId),\r\n        loadData()\r\n      ]);\r\n    } catch (err: unknown) {\r\n      const message = err instanceof Error ? err.message : 'Erro ao remover parte';\r\n      showToast(message, 'error');\r\n    } finally {\r\n      setDeleting(null);\r\n    }\r\n  };\r\n\r\n  // Adicionar nova parte (deteccao automatica do instrumento)\r\n  const handleAddPart = async (partituraId: string | number, file: File) => {\r\n    if (!file) return;\r\n\r\n    const instrumento = detectInstrumento(file.name);\r\n\r\n    setAddingPart(true);\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('arquivo', file);\r\n      formData.append('instrumento', instrumento);\r\n      await API.addPartePartitura(partituraId, formData);\r\n      showToast(`Parte \"${instrumento}\" adicionada!`);\r\n      await Promise.all([\r\n        loadPartes(partituraId),\r\n        loadData()\r\n      ]);\r\n    } catch (err: unknown) {\r\n      const message = err instanceof Error ? err.message : 'Erro ao adicionar parte';\r\n      showToast(message, 'error');\r\n    } finally {\r\n      setAddingPart(false);\r\n    }\r\n  };\r\n\r\n  // Filtragem com busca avancada\r\n  const filtered = useMemo(() => {\r\n    let results = partituras;\r\n    if (filterCategoria) {\r\n      results = results.filter(p => p.categoria_id === filterCategoria);\r\n    }\r\n    if (search) {\r\n      results = results.filter(p =>\r\n        matchesSearch(p.titulo, search) || matchesSearch(p.compositor, search)\r\n      );\r\n    }\r\n    return results.sort((a, b) => (a.titulo ?? '').localeCompare(b.titulo ?? '', 'pt-BR'));\r\n  }, [partituras, search, filterCategoria, matchesSearch]);\r\n\r\n  // Expande primeira partitura (para tutorial)\r\n  const expandFirstPartitura = useCallback(() => {\r\n    if (filtered.length > 0 && expandedId !== filtered[0].id) {\r\n      setExpandedId(filtered[0].id);\r\n      loadPartes(filtered[0].id);\r\n    }\r\n  }, [filtered, expandedId, loadPartes]);\r\n\r\n  // Colapsa primeira partitura (para tutorial)\r\n  const collapseFirstPartitura = useCallback(() => {\r\n    if (expandedId !== null) {\r\n      setExpandedId(null);\r\n      setPartes([]);\r\n    }\r\n  }, [expandedId]);\r\n\r\n  // Agrupar por letra inicial\r\n  const groupedByLetter = filtered.reduce<Record<string, Partitura[]>>((acc, p) => {\r\n    const letter = p.titulo?.charAt(0)?.toUpperCase() || '#';\r\n    if (!acc[letter]) acc[letter] = [];\r\n    acc[letter].push(p);\r\n    return acc;\r\n  }, {});\r\n\r\n  const sortedLetters = Object.keys(groupedByLetter).sort((a, b) => a.localeCompare(b, 'pt-BR'));\r\n\r\n  const handleDelete = async (id: string | number) => {\r\n    if (!confirm('Remover esta partitura?')) return;\r\n    try {\r\n      await API.deletePartitura(id);\r\n      showToast('Partitura removida!');\r\n      if (expandedId === id) setExpandedId(null);\r\n      loadData();\r\n    } catch (e: unknown) {\r\n      const message = e instanceof Error ? e.message : 'Erro ao remover';\r\n      showToast(message, 'error');\r\n    }\r\n  };\r\n\r\n  const toggleDestaque = async (partitura: Partitura) => {\r\n    const novoDestaque = partitura.destaque === 1 ? 0 : 1;\r\n    setPartituras(prev => prev.map(p =>\r\n      p.id === partitura.id ? { ...p, destaque: novoDestaque } : p\r\n    ));\r\n    try {\r\n      await API.updatePartitura(partitura.id, { ...partitura, destaque: novoDestaque });\r\n      showToast(novoDestaque ? 'Adicionado aos destaques!' : 'Removido dos destaques');\r\n    } catch (e: unknown) {\r\n      setPartituras(prev => prev.map(p =>\r\n        p.id === partitura.id ? { ...p, destaque: partitura.destaque } : p\r\n      ));\r\n      const message = e instanceof Error ? e.message : 'Erro';\r\n      showToast(message, 'error');\r\n    }\r\n  };\r\n\r\n  const getCategoriaInfo = (id: string | undefined) => categorias.find(c => c.id === id) || {} as Partial<Categoria>;\r\n  const selectedCategoria = categorias.find(c => c.id === filterCategoria);\r\n\r\n  return (\r\n    <div className=\"page-transition\" style={{ padding: '32px', maxWidth: '1000px', margin: '0 auto', fontFamily: 'var(--font-sans)' }}>\r\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '24px', flexWrap: 'wrap', gap: '12px' }}>\r\n        <h1 style={{\r\n          fontSize: '24px',\r\n          fontWeight: '700',\r\n          color: 'var(--text-primary)',\r\n          fontFamily: 'var(--font-sans)',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '10px'\r\n        }}>\r\n          <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n            <path d=\"M9 18V5l12-2v13\"/>\r\n            <circle cx=\"6\" cy=\"18\" r=\"3\"/>\r\n            <circle cx=\"18\" cy=\"16\" r=\"3\"/>\r\n          </svg>\r\n          Partituras\r\n        </h1>\r\n        <div style={{ display: 'flex', gap: '10px' }}>\r\n          <button\r\n            data-tutorial=\"upload-pasta\"\r\n            onClick={() => (window as Window & { adminNav?: (section: string, action: string) => void }).adminNav?.('partituras', 'pasta')}\r\n            disabled={tutorialPending || showTutorial}\r\n            className=\"btn-primary-hover\"\r\n            style={{\r\n              display: 'flex', alignItems: 'center', gap: '8px', padding: '10px 20px', borderRadius: '12px',\r\n              background: (tutorialPending || showTutorial) ? 'linear-gradient(135deg, rgba(212, 175, 55, 0.5) 0%, rgba(184, 134, 11, 0.5) 100%)' : 'linear-gradient(135deg, #D4AF37 0%, #B8860B 100%)',\r\n              color: '#fff', border: 'none', fontSize: '14px', fontWeight: '500',\r\n              cursor: (tutorialPending || showTutorial) ? 'not-allowed' : 'pointer', fontFamily: 'var(--font-sans)',\r\n              opacity: (tutorialPending || showTutorial) ? 0.7 : 1, transition: 'all 0.2s ease'\r\n            }}\r\n          >\r\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n              <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"/><polyline points=\"17 8 12 3 7 8\"/><line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\"/>\r\n            </svg>\r\n            Upload de Pasta\r\n          </button>\r\n          <button\r\n            onClick={() => setShowImportacaoLote(true)}\r\n            disabled={tutorialPending || showTutorial}\r\n            className=\"btn-secondary-hover\"\r\n            style={{\r\n              display: 'flex', alignItems: 'center', gap: '8px', padding: '10px 20px', borderRadius: '12px',\r\n              background: (tutorialPending || showTutorial) ? 'rgba(212, 175, 55, 0.3)' : 'rgba(212, 175, 55, 0.15)',\r\n              color: (tutorialPending || showTutorial) ? 'var(--text-muted)' : '#D4AF37',\r\n              border: '1px solid rgba(212, 175, 55, 0.3)', fontSize: '14px', fontWeight: '500',\r\n              cursor: (tutorialPending || showTutorial) ? 'not-allowed' : 'pointer', fontFamily: 'var(--font-sans)',\r\n              opacity: (tutorialPending || showTutorial) ? 0.7 : 1, transition: 'all 0.2s ease'\r\n            }}\r\n          >\r\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n              <path d=\"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z\"/><path d=\"M12 11v6M9 14h6\"/>\r\n            </svg>\r\n            Importar Lote\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filtros */}\r\n      <div style={{ display: 'flex', gap: '12px', marginBottom: '20px', flexWrap: 'wrap' }}>\r\n        <div style={{ flex: 1, minWidth: '250px' }}>\r\n          <div className=\"search-bar\">\r\n            <svg className=\"search-icon\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n              <circle cx=\"11\" cy=\"11\" r=\"8\"/><path d=\"m21 21-4.35-4.35\"/>\r\n            </svg>\r\n            <input type=\"text\" placeholder=\"Buscar por título ou compositor...\" value={search} onChange={e => setSearch(e.target.value)} />\r\n            {search && (\r\n              <button className=\"clear-btn\" onClick={() => setSearch('')}>\r\n                <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2.5\">\r\n                  <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"/><line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"/>\r\n                </svg>\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Dropdown de categoria */}\r\n        <div style={{ position: 'relative', minWidth: '200px' }}>\r\n          <button type=\"button\" onClick={() => setShowCatDropdown(!showCatDropdown)} style={{\r\n            width: '100%', padding: '12px 16px', borderRadius: '12px', border: '1.5px solid var(--border)',\r\n            background: 'var(--bg-card)', color: selectedCategoria ? 'var(--text-primary)' : 'var(--text-muted)',\r\n            fontSize: '14px', fontFamily: 'var(--font-sans)', textAlign: 'left', cursor: 'pointer',\r\n            display: 'flex', alignItems: 'center', justifyContent: 'space-between', gap: '12px', transition: 'all 0.2s'\r\n          }}>\r\n            <span style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n              {selectedCategoria && (\r\n                <span style={{ width: '24px', height: '24px', borderRadius: '6px', background: 'linear-gradient(145deg, #3a3a4a 0%, #2a2a38 100%)', display: 'flex', alignItems: 'center', justifyContent: 'center', border: '1px solid rgba(212, 175, 55, 0.2)' }}>\r\n                  <CategoryIcon categoryId={selectedCategoria.id} size={14} color=\"#D4AF37\" />\r\n                </span>\r\n              )}\r\n              {selectedCategoria ? selectedCategoria.nome : 'Todas categorias'}\r\n            </span>\r\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" style={{ transform: showCatDropdown ? 'rotate(180deg)' : 'rotate(0deg)', transition: 'transform 0.2s', flexShrink: 0 }}>\r\n              <polyline points=\"6 9 12 15 18 9\"/>\r\n            </svg>\r\n          </button>\r\n\r\n          {showCatDropdown && (\r\n            <div style={{ position: 'absolute', top: 'calc(100% + 4px)', left: 0, right: 0, background: 'var(--bg-secondary)', border: '1.5px solid var(--border)', borderRadius: '12px', boxShadow: '0 8px 24px rgba(0,0,0,0.15)', zIndex: 100, maxHeight: '280px', overflowY: 'auto' }}>\r\n              <button onClick={() => { setFilterCategoria(''); setShowCatDropdown(false); }} style={{ width: '100%', padding: '12px 16px', border: 'none', background: !filterCategoria ? 'rgba(212, 175, 55, 0.1)' : 'transparent', color: !filterCategoria ? '#D4AF37' : 'var(--text-primary)', fontSize: '14px', fontFamily: 'var(--font-sans)', textAlign: 'left', cursor: 'pointer', display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n                Todas categorias\r\n              </button>\r\n              {categorias.map(cat => (\r\n                <button key={cat.id} onClick={() => { setFilterCategoria(cat.id); setShowCatDropdown(false); }} style={{ width: '100%', padding: '12px 16px', border: 'none', background: filterCategoria === cat.id ? 'rgba(212, 175, 55, 0.1)' : 'transparent', color: filterCategoria === cat.id ? '#D4AF37' : 'var(--text-primary)', fontSize: '14px', fontFamily: 'var(--font-sans)', textAlign: 'left', cursor: 'pointer', display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n                  <span style={{ width: '24px', height: '24px', borderRadius: '6px', background: 'linear-gradient(145deg, #3a3a4a 0%, #2a2a38 100%)', display: 'flex', alignItems: 'center', justifyContent: 'center', border: '1px solid rgba(212, 175, 55, 0.2)' }}>\r\n                    <CategoryIcon categoryId={cat.id} size={14} color=\"#D4AF37\" />\r\n                  </span>\r\n                  {cat.nome}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{ marginBottom: '20px', color: 'var(--text-secondary)', fontSize: '14px', fontFamily: 'var(--font-sans)' }}>\r\n        {filtered.length} partitura(s) {search && `para \"${search}\"`}\r\n      </div>\r\n\r\n      {/* Lista agrupada por letra */}\r\n      {loading ? (\r\n        <div style={{ textAlign: 'center', padding: '40px', color: 'var(--text-secondary)', fontFamily: 'var(--font-sans)' }}>Carregando...</div>\r\n      ) : filtered.length === 0 ? (\r\n        <div style={{ textAlign: 'center', padding: '60px 20px', color: 'var(--text-secondary)', fontFamily: 'var(--font-sans)' }}>\r\n          <svg width=\"48\" height=\"48\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"1.5\" style={{ opacity: 0.5, marginBottom: '16px' }}><circle cx=\"11\" cy=\"11\" r=\"8\"/><path d=\"m21 21-4.35-4.35\"/></svg>\r\n          <p style={{ margin: 0 }}>Nenhuma partitura encontrada</p>\r\n        </div>\r\n      ) : (\r\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '24px' }}>\r\n          {sortedLetters.map((letter) => (\r\n            <div key={letter}>\r\n              <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '12px', paddingBottom: '8px', borderBottom: '2px solid var(--border)' }}>\r\n                <div style={{ width: '36px', height: '36px', borderRadius: '8px', background: 'linear-gradient(135deg, #D4AF37 0%, #B8860B 100%)', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '18px', fontWeight: '700', color: '#fff', fontFamily: 'var(--font-sans)', boxShadow: '0 2px 6px rgba(212, 175, 55, 0.3)' }}>\r\n                  {letter}\r\n                </div>\r\n                <span style={{ fontSize: '13px', color: 'var(--text-muted)', fontFamily: 'var(--font-sans)' }}>\r\n                  {groupedByLetter[letter].length} {groupedByLetter[letter].length === 1 ? 'partitura' : 'partituras'}\r\n                </span>\r\n              </div>\r\n\r\n              <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\r\n                {groupedByLetter[letter].map((p) => {\r\n                  const cat = getCategoriaInfo(p.categoria_id);\r\n                  const isExpanded = expandedId === p.id;\r\n\r\n                  return (\r\n                    <div key={p.id} style={{ background: 'var(--bg-secondary)', borderRadius: '16px', border: isExpanded ? '1px solid rgba(52, 152, 219, 0.4)' : '1px solid var(--border)', overflow: 'hidden', transition: 'all 0.2s ease' }}>\r\n                      <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', padding: '14px 16px', cursor: 'pointer' }}>\r\n                        <div onClick={() => toggleExpand(p)} style={{ display: 'flex', alignItems: 'center', gap: '14px', flex: 1 }}>\r\n                          <svg data-tutorial={filtered.indexOf(p) === 0 ? 'expand-button' : undefined} width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"var(--text-muted)\" strokeWidth=\"2\" style={{ transform: isExpanded ? 'rotate(90deg)' : 'rotate(0deg)', transition: 'transform 0.2s', flexShrink: 0 }}>\r\n                            <polyline points=\"9 18 15 12 9 6\"/>\r\n                          </svg>\r\n                          <div style={{ width: '44px', height: '44px', borderRadius: '12px', background: 'linear-gradient(145deg, #3a3a4a 0%, #2a2a38 100%)', display: 'flex', alignItems: 'center', justifyContent: 'center', border: '1px solid rgba(212, 175, 55, 0.2)', flexShrink: 0 }}>\r\n                            <CategoryIcon categoryId={cat.id || p.categoria_id || ''} size={22} color=\"#D4AF37\" />\r\n                          </div>\r\n                          <div style={{ minWidth: 0 }}>\r\n                            <div style={{ fontWeight: '600', color: 'var(--text-primary)', marginBottom: '2px', display: 'flex', alignItems: 'center', gap: '8px', fontSize: '15px' }}>\r\n                              {p.titulo}\r\n                              {p.destaque === 1 && <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"#D4AF37\" stroke=\"#D4AF37\" strokeWidth=\"1\"><polygon points=\"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2\"/></svg>}\r\n                            </div>\r\n                            <div style={{ fontSize: '13px', color: 'var(--text-secondary)' }}>\r\n                              {p.compositor || 'Sem compositor'} {'\\u2022'} {cat.nome || 'Sem categoria'} {p.ano && `\\u2022 ${p.ano}`}\r\n                            </div>\r\n                            <div style={{ fontSize: '12px', color: 'var(--text-muted)', marginTop: '2px', display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                              <span style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>\r\n                                <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"><path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"/><polyline points=\"7 10 12 15 17 10\"/><line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"3\"/></svg>\r\n                                {p.downloads || 0}\r\n                              </span>\r\n                              <span style={{ display: 'flex', alignItems: 'center', gap: '4px' }}>\r\n                                <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"><path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"/><polyline points=\"14 2 14 8 20 8\"/></svg>\r\n                                {partesCount[p.id] !== undefined ? partesCount[p.id] : (p.total_partes || '?')} partes\r\n                              </span>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div style={{ display: 'flex', gap: '8px', alignItems: 'center' }}>\r\n                          <button onClick={() => toggleDestaque(p)} title={p.destaque === 1 ? 'Remover destaque' : 'Destacar'} className=\"btn-icon-hover\" style={{ width: '36px', height: '36px', borderRadius: '10px', background: p.destaque === 1 ? 'linear-gradient(135deg, #D4AF37 0%, #B8860B 100%)' : 'var(--bg-primary)', border: p.destaque === 1 ? 'none' : '1px solid var(--border)', color: p.destaque === 1 ? '#fff' : 'var(--text-muted)', cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill={p.destaque === 1 ? 'currentColor' : 'none'} stroke=\"currentColor\" strokeWidth=\"2\"><polygon points=\"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2\"/></svg>\r\n                          </button>\r\n                          <button onClick={() => openRepertorioModal(p)} title={partiturasInRepertorio.has(p.id) ? 'Remover do Repertório' : 'Adicionar ao Repertório'} className=\"btn-purple-hover\" style={{ width: '36px', height: '36px', borderRadius: '10px', background: partiturasInRepertorio.has(p.id) ? 'linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%)' : 'rgba(155, 89, 182, 0.1)', border: partiturasInRepertorio.has(p.id) ? 'none' : '1px solid rgba(155, 89, 182, 0.3)', color: partiturasInRepertorio.has(p.id) ? '#fff' : '#9b59b6', cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                            {partiturasInRepertorio.has(p.id) ? (\r\n                              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><polyline points=\"20 6 9 17 4 12\"/></svg>\r\n                            ) : (\r\n                              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"/><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"/></svg>\r\n                            )}\r\n                          </button>\r\n                          <button onClick={() => openEditModal(p)} title=\"Editar\" className=\"btn-info-hover\" style={{ width: '36px', height: '36px', borderRadius: '10px', background: 'rgba(52, 152, 219, 0.1)', border: '1px solid rgba(52, 152, 219, 0.3)', color: '#3498db', cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                            <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"/><path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"/></svg>\r\n                          </button>\r\n                          <button onClick={() => handleDelete(p.id)} title=\"Excluir\" className=\"btn-danger-hover\" style={{ width: '36px', height: '36px', borderRadius: '10px', background: 'rgba(231, 76, 60, 0.1)', border: '1px solid rgba(231, 76, 60, 0.3)', color: '#e74c3c', cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                            <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><polyline points=\"3 6 5 6 21 6\"/><path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"/></svg>\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Area expandida - partes */}\r\n                      {isExpanded && (\r\n                        <div style={{ borderTop: '1px solid var(--border)', background: 'var(--bg-primary)', padding: '12px' }}>\r\n                          {loadingPartes ? (\r\n                            <PartesGridSkeleton count={8} />\r\n                          ) : partes.length === 0 ? (\r\n                            <div style={{ textAlign: 'center', padding: '16px', color: 'var(--text-muted)', fontSize: '12px' }}>Nenhuma parte encontrada</div>\r\n                          ) : (\r\n                            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(180px, 1fr))', gap: '6px', marginBottom: '8px' }}>\r\n                              {partes.map((parte, parteIndex) => {\r\n                                const isViewing = previewParte?.parteId === parte.id;\r\n                                const isLoading = loadingPreview && !isViewing;\r\n                                return (\r\n                                  <div key={parte.id} onClick={() => !loadingPreview && handleViewPart(parte)} className=\"parte-item list-item-animate\" style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', padding: '6px 8px', background: isViewing ? 'rgba(52, 152, 219, 0.15)' : 'var(--bg-secondary)', borderRadius: '6px', border: isViewing ? '1px solid rgba(52, 152, 219, 0.4)' : '1px solid var(--border)', cursor: loadingPreview ? 'wait' : 'pointer', transition: 'all 0.15s ease', minHeight: '32px', animationDelay: `${parteIndex * 0.02}s` }}>\r\n                                    <div style={{ display: 'flex', alignItems: 'center', gap: '6px', flex: 1, minWidth: 0 }}>\r\n                                      {isLoading ? (\r\n                                        <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#D4AF37\" strokeWidth=\"2\" style={{ animation: 'spin 1s linear infinite', flexShrink: 0 }}><circle cx=\"12\" cy=\"12\" r=\"10\" strokeOpacity=\"0.25\"/><path d=\"M12 2a10 10 0 0 1 10 10\" strokeLinecap=\"round\"/></svg>\r\n                                      ) : (\r\n                                        <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke={isViewing ? '#3498db' : '#D4AF37'} strokeWidth=\"1.5\" style={{ flexShrink: 0 }}><path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"/><polyline points=\"14 2 14 8 20 8\"/></svg>\r\n                                      )}\r\n                                      <span style={{ fontSize: '12px', color: isViewing ? '#3498db' : 'var(--text-primary)', fontWeight: isViewing ? '500' : '400', whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }}>{parte.instrumento}</span>\r\n                                    </div>\r\n                                    <div data-tutorial={partes.indexOf(parte) === 0 ? 'action-buttons' : undefined} style={{ display: 'flex', gap: '4px', marginLeft: '8px', padding: '2px', borderRadius: '6px', background: 'var(--bg-primary)' }} onClick={(e) => e.stopPropagation()} onMouseEnter={(e) => { const parent = e.currentTarget.parentElement; if (parent) { parent.style.background = isViewing ? 'rgba(52, 152, 219, 0.15)' : 'var(--bg-secondary)'; parent.style.borderColor = isViewing ? 'rgba(52, 152, 219, 0.4)' : 'var(--border)'; } }}>\r\n                                      <label data-tutorial={partes.indexOf(parte) === 0 ? 'btn-replace' : undefined} title=\"Substituir arquivo\" className=\"action-btn action-btn-replace\" style={{ width: '24px', height: '24px', borderRadius: '4px', background: 'rgba(212, 175, 55, 0.1)', border: '1px solid rgba(212, 175, 55, 0.2)', color: '#D4AF37', cursor: uploading === parte.id ? 'wait' : 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center', transition: 'all 0.15s ease' }}>\r\n                                        {uploading === parte.id ? (\r\n                                          <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" style={{ animation: 'spin 1s linear infinite' }}><circle cx=\"12\" cy=\"12\" r=\"10\" strokeOpacity=\"0.25\"/><path d=\"M12 2a10 10 0 0 1 10 10\" strokeLinecap=\"round\"/></svg>\r\n                                        ) : (\r\n                                          <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M17 1l4 4-4 4\"/><path d=\"M3 11V9a4 4 0 0 1 4-4h14\"/><path d=\"M7 23l-4-4 4-4\"/><path d=\"M21 13v2a4 4 0 0 1-4 4H3\"/></svg>\r\n                                        )}\r\n                                        <input type=\"file\" accept=\".pdf\" style={{ display: 'none' }} onChange={(e) => { if (e.target.files?.[0]) { handleReplacePart(p.id, parte.id, e.target.files[0]); } e.target.value = ''; }} disabled={uploading === parte.id} />\r\n                                      </label>\r\n                                      <button data-tutorial={partes.indexOf(parte) === 0 ? 'btn-delete' : undefined} onClick={() => handleDeletePart(p.id, parte.id)} disabled={deleting === parte.id} title=\"Remover parte\" className=\"action-btn action-btn-delete\" style={{ width: '24px', height: '24px', borderRadius: '4px', background: 'rgba(231, 76, 60, 0.1)', border: '1px solid rgba(231, 76, 60, 0.2)', color: '#e74c3c', cursor: deleting === parte.id ? 'wait' : 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center', transition: 'all 0.15s ease' }}>\r\n                                        {deleting === parte.id ? (\r\n                                          <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" style={{ animation: 'spin 1s linear infinite' }}><circle cx=\"12\" cy=\"12\" r=\"10\" strokeOpacity=\"0.25\"/><path d=\"M12 2a10 10 0 0 1 10 10\" strokeLinecap=\"round\"/></svg>\r\n                                        ) : (\r\n                                          <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"><polyline points=\"3 6 5 6 21 6\"/><path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"/></svg>\r\n                                        )}\r\n                                      </button>\r\n                                    </div>\r\n                                  </div>\r\n                                );\r\n                              })}\r\n                            </div>\r\n                          )}\r\n                          <label data-tutorial=\"add-parte\" style={{ display: 'inline-flex', alignItems: 'center', gap: '6px', padding: '6px 12px', borderRadius: '6px', background: 'transparent', border: '1px dashed var(--border)', color: 'var(--text-muted)', fontSize: '12px', cursor: addingPart ? 'wait' : 'pointer', transition: 'all 0.15s' }}>\r\n                            {addingPart ? (\r\n                              <><svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" style={{ animation: 'spin 1s linear infinite' }}><circle cx=\"12\" cy=\"12\" r=\"10\" strokeOpacity=\"0.25\"/><path d=\"M12 2a10 10 0 0 1 10 10\" strokeLinecap=\"round\"/></svg>Adicionando...</>\r\n                            ) : (\r\n                              <><svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"/><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"/></svg>Adicionar parte</>\r\n                            )}\r\n                            <input ref={addFileInputRef} type=\"file\" accept=\".pdf\" style={{ display: 'none' }} onChange={(e) => { if (e.target.files?.[0]) { handleAddPart(p.id, e.target.files[0]); } e.target.value = ''; }} disabled={addingPart} />\r\n                          </label>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Overlay de Drag & Drop Global */}\r\n      {isDraggingOver && (\r\n        <div style={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, background: 'rgba(0, 0, 0, 0.85)', backdropFilter: 'blur(8px)', display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', zIndex: 9999, pointerEvents: 'none' }}>\r\n          <div style={{ width: '140px', height: '140px', borderRadius: '32px', background: 'linear-gradient(145deg, rgba(212, 175, 55, 0.2) 0%, rgba(184, 134, 11, 0.1) 100%)', display: 'flex', alignItems: 'center', justifyContent: 'center', marginBottom: '24px', border: '2px dashed #D4AF37', animation: 'pulse 1.5s ease-in-out infinite' }}>\r\n            <svg width=\"64\" height=\"64\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#D4AF37\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"><path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"/><polyline points=\"7 10 12 15 17 10\"/><line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"3\"/></svg>\r\n          </div>\r\n          <div style={{ fontSize: '24px', fontWeight: '700', color: '#D4AF37', marginBottom: '12px', textAlign: 'center' }}>Solte a pasta aqui</div>\r\n          <div style={{ fontSize: '14px', color: 'var(--text-secondary)', textAlign: 'center', maxWidth: '300px' }}>\r\n            <div style={{ marginBottom: '8px' }}><strong>1 pasta com PDFs</strong> {'\\u2192'} Upload simples</div>\r\n            <div><strong>Pasta com subpastas</strong> {'\\u2192'} Importacao em lote</div>\r\n          </div>\r\n          <style>{`@keyframes pulse { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.05); opacity: 0.8; } }`}</style>\r\n        </div>\r\n      )}\r\n\r\n      <UploadPastaModal isOpen={showUploadModal} onClose={() => setShowUploadModal(false)} onSuccess={() => { loadData(); setShowUploadModal(false); }} categorias={categorias} initialFiles={droppedFiles} />\r\n\r\n      <Suspense fallback={null}>\r\n        <ImportacaoLoteModal isOpen={showImportacaoLote} onClose={() => setShowImportacaoLote(false)} onSuccess={() => { loadData(); }} onOpenUploadPasta={() => { setShowImportacaoLote(false); setShowUploadModal(true); }} initialEntries={droppedEntries} />\r\n      </Suspense>\r\n\r\n      <Suspense fallback={null}>\r\n        <PDFViewerModal isOpen={showPDFModal} onClose={closePreview} pdfUrl={previewParte?.blobUrl ?? null} title={previewParte?.instrumento || 'Visualizador de PDF'} onDownload={() => previewParte?.blobUrl && window.open(previewParte.blobUrl, '_blank')} />\r\n      </Suspense>\r\n\r\n      <TutorialOverlay isOpen={showTutorial} onClose={() => setShowTutorial(false)} onExpandFirst={expandFirstPartitura} onCollapseFirst={collapseFirstPartitura} />\r\n\r\n      {/* @ts-expect-error RepertorioSelectorModal defines its own Repertorio interface */}\r\n      <RepertorioSelectorModal isOpen={showRepertorioModal} onClose={() => { setShowRepertorioModal(false); setSelectedPartituraForRepertorio(null); }} onSelect={(repertorio: Repertorio) => addToRepertorio(repertorio, selectedPartituraForRepertorio?.id as string | number)} onCreate={createRepertorioAndAdd} repertorios={repertorios} partituraTitulo={selectedPartituraForRepertorio?.titulo} loading={loadingRepertorios} />\r\n\r\n      {/* Modal de Edicao de Partitura */}\r\n      {editModalOpen && editingPartitura && (\r\n        <>\r\n          <div onClick={closeEditModal} style={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, background: 'rgba(0, 0, 0, 0.6)', backdropFilter: 'blur(4px)', zIndex: 1000, animation: 'fadeIn 0.2s ease' }} />\r\n          <div style={{ position: 'fixed', top: '50%', left: '50%', transform: 'translate(-50%, -50%)', background: 'var(--bg-card)', borderRadius: '24px', padding: '0', zIndex: 1001, width: '440px', maxWidth: '90vw', maxHeight: '90vh', overflow: 'hidden', boxShadow: '0 25px 60px rgba(0, 0, 0, 0.4)', animation: 'scaleIn 0.25s cubic-bezier(0.16, 1, 0.3, 1)' }}>\r\n            <div style={{ padding: '24px 24px 20px', borderBottom: '1px solid var(--border)', background: 'linear-gradient(180deg, var(--bg-secondary) 0%, var(--bg-card) 100%)' }}>\r\n              <div style={{ display: 'flex', alignItems: 'center', gap: '16px' }}>\r\n                <div style={{ width: '56px', height: '56px', borderRadius: '16px', background: 'linear-gradient(145deg, #3a3a4a 0%, #2a2a38 100%)', display: 'flex', alignItems: 'center', justifyContent: 'center', border: '1px solid rgba(212, 175, 55, 0.2)', boxShadow: '0 4px 12px rgba(0, 0, 0, 0.2)' }}>\r\n                  <CategoryIcon categoryId={editingPartitura.categoria_id || ''} size={28} color=\"#D4AF37\" />\r\n                </div>\r\n                <div style={{ flex: 1, minWidth: 0 }}>\r\n                  <h2 style={{ margin: 0, fontSize: '20px', fontWeight: '700', color: 'var(--text-primary)', fontFamily: 'var(--font-sans)' }}>Editar Partitura</h2>\r\n                  <p style={{ margin: '4px 0 0', fontSize: '13px', color: 'var(--text-muted)', fontFamily: 'var(--font-sans)', whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }}>{editingPartitura.titulo}</p>\r\n                </div>\r\n                <button onClick={closeEditModal} className=\"btn-icon-hover\" style={{ width: '36px', height: '36px', borderRadius: '12px', background: 'var(--bg-primary)', border: '1px solid var(--border)', color: 'var(--text-muted)', cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center', transition: 'all 0.2s' }}>\r\n                  <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"><line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"/><line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"/></svg>\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div style={{ padding: '24px' }}>\r\n              <div style={{ marginBottom: '20px' }}>\r\n                <label style={{ display: 'block', fontSize: '13px', fontWeight: '600', color: 'var(--text-secondary)', marginBottom: '8px', fontFamily: 'var(--font-sans)' }}>Titulo da Partitura</label>\r\n                <input type=\"text\" value={editForm.titulo} onChange={(e) => setEditForm(prev => ({ ...prev, titulo: e.target.value }))} placeholder=\"Nome da partitura\" style={{ width: '100%', padding: '14px 16px', borderRadius: '12px', border: '1.5px solid var(--border)', background: 'var(--bg-primary)', color: 'var(--text-primary)', fontSize: '15px', fontFamily: 'var(--font-sans)', outline: 'none', transition: 'border-color 0.2s, box-shadow 0.2s', boxSizing: 'border-box' }} onFocus={(e) => { e.target.style.borderColor = '#D4AF37'; e.target.style.boxShadow = '0 0 0 3px rgba(212, 175, 55, 0.15)'; }} onBlur={(e) => { e.target.style.borderColor = 'var(--border)'; e.target.style.boxShadow = 'none'; }} />\r\n              </div>\r\n              <div style={{ marginBottom: '20px' }}>\r\n                <label style={{ display: 'block', fontSize: '13px', fontWeight: '600', color: 'var(--text-secondary)', marginBottom: '8px', fontFamily: 'var(--font-sans)' }}>Compositor</label>\r\n                <input type=\"text\" value={editForm.compositor} onChange={(e) => setEditForm(prev => ({ ...prev, compositor: e.target.value }))} placeholder=\"Nome do compositor\" style={{ width: '100%', padding: '14px 16px', borderRadius: '12px', border: '1.5px solid var(--border)', background: 'var(--bg-primary)', color: 'var(--text-primary)', fontSize: '15px', fontFamily: 'var(--font-sans)', outline: 'none', transition: 'border-color 0.2s, box-shadow 0.2s', boxSizing: 'border-box' }} onFocus={(e) => { e.target.style.borderColor = '#D4AF37'; e.target.style.boxShadow = '0 0 0 3px rgba(212, 175, 55, 0.15)'; }} onBlur={(e) => { e.target.style.borderColor = 'var(--border)'; e.target.style.boxShadow = 'none'; }} />\r\n              </div>\r\n              <div style={{ marginBottom: '28px' }}>\r\n                <label style={{ display: 'block', fontSize: '13px', fontWeight: '600', color: 'var(--text-secondary)', marginBottom: '8px', fontFamily: 'var(--font-sans)' }}>Categoria</label>\r\n                <div style={{ position: 'relative' }}>\r\n                  <select value={editForm.categoria_id} onChange={(e) => setEditForm(prev => ({ ...prev, categoria_id: e.target.value }))} style={{ width: '100%', padding: '14px 16px', paddingRight: '44px', borderRadius: '12px', border: '1.5px solid var(--border)', background: 'var(--bg-primary)', color: 'var(--text-primary)', fontSize: '15px', fontFamily: 'var(--font-sans)', outline: 'none', cursor: 'pointer', appearance: 'none', transition: 'border-color 0.2s, box-shadow 0.2s' }} onFocus={(e) => { e.target.style.borderColor = '#D4AF37'; e.target.style.boxShadow = '0 0 0 3px rgba(212, 175, 55, 0.15)'; }} onBlur={(e) => { e.target.style.borderColor = 'var(--border)'; e.target.style.boxShadow = 'none'; }}>\r\n                    <option value=\"\">Sem categoria</option>\r\n                    {categorias.map(cat => <option key={cat.id} value={cat.id}>{cat.nome}</option>)}\r\n                  </select>\r\n                  <div style={{ position: 'absolute', right: '16px', top: '50%', transform: 'translateY(-50%)', pointerEvents: 'none', color: 'var(--text-muted)' }}>\r\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"><polyline points=\"6 9 12 15 18 9\"/></svg>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div style={{ display: 'flex', gap: '12px' }}>\r\n                <button onClick={closeEditModal} className=\"btn-ghost-hover\" style={{ flex: 1, padding: '14px 20px', borderRadius: '12px', border: '1.5px solid var(--border)', background: 'transparent', color: 'var(--text-secondary)', fontSize: '15px', fontWeight: '600', fontFamily: 'var(--font-sans)', cursor: 'pointer', transition: 'all 0.2s' }}>Cancelar</button>\r\n                <button onClick={saveEditModal} disabled={savingEdit || !editForm.titulo.trim()} className=\"btn-primary-hover\" style={{ flex: 1, padding: '14px 20px', borderRadius: '12px', border: 'none', background: savingEdit || !editForm.titulo.trim() ? 'linear-gradient(135deg, rgba(212, 175, 55, 0.5) 0%, rgba(184, 134, 11, 0.5) 100%)' : 'linear-gradient(135deg, #D4AF37 0%, #B8860B 100%)', color: '#fff', fontSize: '15px', fontWeight: '600', fontFamily: 'var(--font-sans)', cursor: savingEdit || !editForm.titulo.trim() ? 'not-allowed' : 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '8px', transition: 'all 0.2s', boxShadow: savingEdit || !editForm.titulo.trim() ? 'none' : '0 4px 12px rgba(212, 175, 55, 0.3)' }}>\r\n                  {savingEdit ? (<><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" style={{ animation: 'spin 1s linear infinite' }}><circle cx=\"12\" cy=\"12\" r=\"10\" strokeOpacity=\"0.25\"/><path d=\"M12 2a10 10 0 0 1 10 10\" strokeLinecap=\"round\"/></svg>Salvando...</>) : (<><svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\"><path d=\"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\"/><polyline points=\"17 21 17 13 7 13 7 21\"/><polyline points=\"7 3 7 8 15 8\"/></svg>Salvar Alteracoes</>)}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      <style>{`\r\n        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }\r\n        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }\r\n        @keyframes scaleIn { from { opacity: 0; transform: translate(-50%, -50%) scale(0.9); } to { opacity: 1; transform: translate(-50%, -50%) scale(1); } }\r\n        .parte-item:hover { background: rgba(212, 175, 55, 0.08) !important; border-color: rgba(212, 175, 55, 0.3) !important; }\r\n        .action-btn-replace:hover { background: rgba(212, 175, 55, 0.25) !important; border-color: rgba(212, 175, 55, 0.5) !important; transform: scale(1.05); }\r\n        .action-btn-delete:hover { background: rgba(231, 76, 60, 0.25) !important; border-color: rgba(231, 76, 60, 0.5) !important; transform: scale(1.05); }\r\n        .action-btn:active { transform: scale(0.95); }\r\n        .parte-item:active { transform: scale(0.98); }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminPartituras;\r\n","\"use client\";\r\n\r\n// ===== LOTTIE ANIMATION =====\r\n// Wrapper reutilizavel para animacoes Lottie\r\n// Usa next/dynamic para evitar SSR (lottie-react precisa de browser APIs)\r\n\r\nimport { CSSProperties } from 'react';\r\nimport dynamic from 'next/dynamic';\r\n\r\n// Import lottie-react com SSR desabilitado\r\nconst Lottie = dynamic(() => import('lottie-react'), { ssr: false });\r\n\r\n// Importacao estatica dos arquivos JSON (Metodo 4.2 do guia)\r\n// O bundler valida a existencia dos arquivos em tempo de compilacao\r\nimport successAnimation from '@/assets/animations/success.json';\r\nimport warningAnimation from '@/assets/animations/warning.json';\r\nimport errorAnimation from '@/assets/animations/error.json';\r\nimport scanAnimation from '@/assets/animations/scan.json';\r\nimport uploadAnimation from '@/assets/animations/upload.json';\r\n\r\ntype AnimationName = 'success' | 'warning' | 'attention' | 'error' | 'scan' | 'upload';\r\n\r\n// Mapeamento de nomes para os dados de animacao importados\r\nconst ANIMATIONS: Record<AnimationName, unknown> = {\r\n  success: successAnimation,\r\n  warning: warningAnimation,\r\n  attention: warningAnimation, // alias para compatibilidade\r\n  error: errorAnimation,\r\n  scan: scanAnimation,\r\n  upload: uploadAnimation\r\n};\r\n\r\ninterface LottieAnimationProps {\r\n  /** Nome da animacao pre-definida (success, warning, error, scan, upload) */\r\n  name?: AnimationName;\r\n  /** Dados JSON da animacao (alternativa a name) */\r\n  animationData?: unknown;\r\n  /** Se deve repetir (padrao: true) */\r\n  loop?: boolean;\r\n  /** Se deve iniciar automaticamente (padrao: true) */\r\n  autoplay?: boolean;\r\n  /** Tamanho em pixels (padrao: 120) */\r\n  size?: number;\r\n  /** Estilos adicionais */\r\n  style?: CSSProperties;\r\n  /** Callback quando a animacao completa */\r\n  onComplete?: () => void;\r\n}\r\n\r\nconst SpinnerFallback = ({ size, style }: { size: number; style?: CSSProperties }) => (\r\n  <div style={{\r\n    width: size,\r\n    height: size,\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    margin: '0 auto',\r\n    ...style\r\n  }}>\r\n    <div style={{\r\n      width: '50%',\r\n      height: '50%',\r\n      border: '3px solid var(--border)',\r\n      borderTopColor: '#D4AF37',\r\n      borderRadius: '50%',\r\n      animation: 'spin 1s linear infinite'\r\n    }} />\r\n    <style>{`\r\n      @keyframes spin {\r\n        to { transform: rotate(360deg); }\r\n      }\r\n    `}</style>\r\n  </div>\r\n);\r\n\r\nconst LottieAnimation = ({\r\n  name,\r\n  animationData,\r\n  loop = true,\r\n  autoplay = true,\r\n  size = 120,\r\n  style = {},\r\n  onComplete\r\n}: LottieAnimationProps) => {\r\n  // Determina os dados da animacao: prop direta ou pelo nome\r\n  const animation = animationData || (name ? ANIMATIONS[name] : undefined);\r\n\r\n  // Callback de conclusao via prop do lottie-react\r\n  const handleLottieComplete = () => {\r\n    if (!loop && onComplete) {\r\n      onComplete();\r\n    }\r\n  };\r\n\r\n  // Se nao encontrar a animacao, mostra fallback\r\n  if (!animation) {\r\n    console.warn(`LottieAnimation: animacao \"${name}\" nao encontrada`);\r\n    return <SpinnerFallback size={size} style={style} />;\r\n  }\r\n\r\n  return (\r\n    <div style={{\r\n      width: size,\r\n      height: size,\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      margin: '0 auto',\r\n      ...style\r\n    }}>\r\n      <Lottie\r\n        animationData={animation}\r\n        loop={loop}\r\n        autoplay={autoplay}\r\n        onComplete={handleLottieComplete}\r\n        style={{ width: '100%', height: '100%' }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LottieAnimation;\r\n","\"use client\";\r\n\r\n// ===== UPLOAD PASTA MODAL =====\r\n// Modal para upload de pasta com multiplas partes de partitura\r\n// Layout: Header fixo + Conteudo scrollavel + Footer fixo\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useUI } from '@/contexts/UIContext';\r\nimport { API } from '@/lib/api';\r\nimport CategoryIcon from '@/components/common/CategoryIcon';\r\n// Augment input attributes to allow webkitdirectory\r\ndeclare module 'react' {\r\n  interface InputHTMLAttributes<T> extends HTMLAttributes<T> {\r\n    webkitdirectory?: string;\r\n    directory?: string;\r\n  }\r\n}\r\n\r\nimport LottieAnimation from '@/components/animations/LottieAnimation';\r\nimport { extrairInstrumento } from '@/utils/instrumentParser';\r\nimport { analisarMetadados } from '@/utils/metadataParser';\r\n\r\n// ===== Interfaces =====\r\n\r\ninterface Categoria {\r\n  id: string;\r\n  nome: string;\r\n}\r\n\r\ninterface ParsedFile {\r\n  file: File;\r\n  nomeOriginal: string;\r\n  instrumento: string;\r\n  reconhecido: boolean;\r\n}\r\n\r\ninterface InitialFiles {\r\n  files: File[];\r\n  folderName: string;\r\n}\r\n\r\ninterface FileSystemEntryLike {\r\n  isFile: boolean;\r\n  isDirectory: boolean;\r\n  name: string;\r\n  file: (callback: (file: File) => void) => void;\r\n  createReader: () => {\r\n    readEntries: (callback: (entries: FileSystemEntryLike[]) => void) => void;\r\n  };\r\n}\r\n\r\ninterface UploadPastaModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSuccess?: () => void;\r\n  categorias?: Categoria[];\r\n  initialFiles?: InitialFiles | null;\r\n}\r\n\r\ntype UploadPhase = 'idle' | 'preparing' | 'uploading' | 'processing' | 'complete' | 'error';\r\n\r\nconst UploadPastaModal = ({ isOpen, onClose, onSuccess, initialFiles }: UploadPastaModalProps) => {\r\n  const { showToast } = useUI();\r\n  const [folderName, setFolderName] = useState('');\r\n  const [parsedData, setParsedData] = useState<ParsedFile[]>([]);\r\n  const [categorias, setCategorias] = useState<Categoria[]>([]);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n\r\n  // Estados de progresso do upload\r\n  const [uploadPhase, setUploadPhase] = useState<UploadPhase>('idle');\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  const [completedFiles, setCompletedFiles] = useState<number[]>([]);\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const [funnyPhraseIndex, setFunnyPhraseIndex] = useState(0);\r\n\r\n  // Frases engraçadas para mostrar durante o upload\r\n  const funnyPhrases = [\r\n    'Adicionando os últimos detalhes...',\r\n    'Refinando a visualização das partituras...',\r\n    'Escrevendo o próximo Dobrado Tusca...',\r\n    'Removendo o Dobrado Ludgero da próxima apresentação...',\r\n    'Ratando a primeira nota de Preta Pretinha...',\r\n    'Esperando João Viana voltar do banheiro...',\r\n    'Deixando Julielson menos durinho no pandeiro...',\r\n    'Afinando os pistões virtuais...',\r\n    'Procurando a partitura perdida do saxofone...',\r\n    'Ajustando o compasso que ninguém acerta...',\r\n    'Adicionando mais uma fermata só de sacanagem...',\r\n    'Verificando se o bombardino está acordado...',\r\n    'Calibrando o volume da tuba...',\r\n    'Inserindo pausas estratégicas para o café...',\r\n    'Convencendo o maestro que está tudo certo...',\r\n    'Organizando as estantes de partitura...'\r\n  ];\r\n\r\n  // Campos editaveis\r\n  const [titulo, setTitulo] = useState('');\r\n  const [categoria, setCategoria] = useState('');\r\n  const [compositor, setCompositor] = useState('');\r\n  const [arranjador, setArranjador] = useState('');\r\n  const [ano, setAno] = useState('');\r\n  const [showCatDropdown, setShowCatDropdown] = useState(false);\r\n\r\n  // Contadores\r\n  const reconhecidos = parsedData.filter(p => p.reconhecido).length;\r\n  const naoReconhecidos = parsedData.filter(p => !p.reconhecido).length;\r\n\r\n  // Carrega categorias\r\n  useEffect(() => {\r\n    const loadCategorias = async () => {\r\n      try {\r\n        const cats = await API.getCategorias();\r\n        setCategorias(cats || []);\r\n      } catch {\r\n        console.error('Erro ao carregar categorias');\r\n      }\r\n    };\r\n    if (isOpen) loadCategorias();\r\n  }, [isOpen]);\r\n\r\n  // Alterna frases engracadas durante upload\r\n  useEffect(() => {\r\n    if (uploading && (uploadPhase === 'uploading' || uploadPhase === 'processing')) {\r\n      const interval = setInterval(() => {\r\n        setFunnyPhraseIndex(prev => (prev + 1) % funnyPhrases.length);\r\n      }, 2500);\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [uploading, uploadPhase, funnyPhrases.length]);\r\n\r\n  // Reset ao fechar\r\n  useEffect(() => {\r\n    if (!isOpen) {\r\n      setFolderName('');\r\n      setParsedData([]);\r\n      setTitulo('');\r\n      setCategoria('');\r\n      setCompositor('');\r\n      setArranjador('');\r\n      setAno('');\r\n      setUploadPhase('idle');\r\n      setUploadProgress(0);\r\n      setCompletedFiles([]);\r\n      setErrorMessage('');\r\n    }\r\n  }, [isOpen]);\r\n\r\n  // Processa arquivos pre-carregados (drag & drop global)\r\n  useEffect(() => {\r\n    if (isOpen && initialFiles && initialFiles.files && initialFiles.files.length > 0 && categorias.length > 0) {\r\n      processFiles(initialFiles.files, initialFiles.folderName + '/');\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isOpen, initialFiles, categorias]);\r\n\r\n  // Processa os arquivos\r\n  const processFiles = (pdfFiles: File[], folderPath: string) => {\r\n    if (pdfFiles.length === 0) {\r\n      showToast('Nenhum arquivo PDF encontrado na pasta', 'error');\r\n      return;\r\n    }\r\n\r\n    const pathParts = folderPath.split('/');\r\n    const pastaName = pathParts.length > 0 ? pathParts[0] : 'Pasta sem nome';\r\n    setFolderName(pastaName);\r\n\r\n    // Usa analise multi-camada para melhor deteccao\r\n    const metadados = analisarMetadados(folderPath, pastaName, categorias);\r\n    setTitulo(metadados.titulo);\r\n    setCompositor(metadados.compositor);\r\n    setArranjador(metadados.arranjador || '');\r\n    setCategoria(metadados.categoria || '');\r\n\r\n    const parsed = pdfFiles.map((file: File) => {\r\n      const { instrumento, reconhecido } = extrairInstrumento(file.name);\r\n      return { file, nomeOriginal: file.name, instrumento, reconhecido };\r\n    });\r\n\r\n    setParsedData(parsed);\r\n  };\r\n\r\n  // Processa os arquivos quando selecionados via input\r\n  const handleFolderSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const fileList = Array.from(e.target.files || []);\r\n    if (fileList.length === 0) return;\r\n    const pdfFiles = fileList.filter(f => f.name.toLowerCase().endsWith('.pdf'));\r\n    const firstFile = pdfFiles[0] as File & { webkitRelativePath?: string };\r\n    const firstPath = firstFile?.webkitRelativePath || firstFile?.name || '';\r\n    processFiles(pdfFiles, firstPath);\r\n  };\r\n\r\n  // Funcao recursiva para ler arquivos de pasta (drag & drop)\r\n  const readAllEntriesRecursively = async (entry: FileSystemEntryLike, path: string = ''): Promise<File[]> => {\r\n    const files: File[] = [];\r\n    if (entry.isFile) {\r\n      const file = await new Promise<File>((resolve) => entry.file(resolve));\r\n      Object.defineProperty(file, 'webkitRelativePath', { value: path + file.name, writable: false });\r\n      files.push(file);\r\n    } else if (entry.isDirectory) {\r\n      const reader = entry.createReader();\r\n      const entries = await new Promise<FileSystemEntryLike[]>((resolve) => {\r\n        const allEntries: FileSystemEntryLike[] = [];\r\n        const readEntries = () => {\r\n          reader.readEntries((results: FileSystemEntryLike[]) => {\r\n            if (results.length === 0) resolve(allEntries);\r\n            else { allEntries.push(...results); readEntries(); }\r\n          });\r\n        };\r\n        readEntries();\r\n      });\r\n      for (const childEntry of entries) {\r\n        const childFiles = await readAllEntriesRecursively(childEntry, path + entry.name + '/');\r\n        files.push(...childFiles);\r\n      }\r\n    }\r\n    return files;\r\n  };\r\n\r\n  // Handlers de Drag & Drop\r\n  const handleDragEnter = (e: React.DragEvent) => { e.preventDefault(); e.stopPropagation(); setIsDragging(true); };\r\n  const handleDragLeave = (e: React.DragEvent) => { e.preventDefault(); e.stopPropagation(); if (!e.currentTarget.contains(e.relatedTarget as Node)) setIsDragging(false); };\r\n  const handleDragOver = (e: React.DragEvent) => { e.preventDefault(); e.stopPropagation(); };\r\n\r\n  const handleDrop = async (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsDragging(false);\r\n\r\n    const items = e.dataTransfer.items;\r\n    if (!items || items.length === 0) return;\r\n\r\n    let folderEntry: FileSystemEntryLike | null = null;\r\n    let dropFolderName = '';\r\n\r\n    for (let i = 0; i < items.length; i++) {\r\n      const item = items[i];\r\n      const entry = item.webkitGetAsEntry?.() as FileSystemEntryLike | null;\r\n      if (entry?.isDirectory) {\r\n        folderEntry = entry;\r\n        dropFolderName = entry.name;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (!folderEntry) {\r\n      const droppedFiles = Array.from(e.dataTransfer.files);\r\n      const pdfFiles = droppedFiles.filter(f => f.name.toLowerCase().endsWith('.pdf'));\r\n      if (pdfFiles.length === 0) {\r\n        showToast('Arraste uma pasta contendo arquivos PDF', 'error');\r\n        return;\r\n      }\r\n      processFiles(pdfFiles, pdfFiles[0].name);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const allFiles = await readAllEntriesRecursively(folderEntry, '');\r\n      const pdfFiles = allFiles.filter(f => f.name.toLowerCase().endsWith('.pdf'));\r\n      if (pdfFiles.length === 0) {\r\n        showToast('Nenhum arquivo PDF encontrado na pasta', 'error');\r\n        return;\r\n      }\r\n      processFiles(pdfFiles, dropFolderName + '/');\r\n    } catch (err) {\r\n      console.error('Erro ao ler pasta:', err);\r\n      showToast('Erro ao ler a pasta arrastada', 'error');\r\n    }\r\n  };\r\n\r\n  // Simula progresso visual\r\n  const simulateFileProgress = (totalFiles: number): Promise<void> => {\r\n    return new Promise((resolve) => {\r\n      let completed = 0;\r\n      const interval = setInterval(() => {\r\n        if (completed < totalFiles) {\r\n          completed++;\r\n          setCompletedFiles(prev => [...prev, completed - 1]);\r\n          setUploadProgress(Math.round((completed / totalFiles) * 100));\r\n        } else {\r\n          clearInterval(interval);\r\n          resolve();\r\n        }\r\n      }, 150);\r\n    });\r\n  };\r\n\r\n  // Upload\r\n  const handleUpload = async () => {\r\n    if (!titulo.trim()) { showToast('Título é obrigatório', 'error'); return; }\r\n    if (!categoria) { showToast('Categoria e obrigatoria', 'error'); return; }\r\n    if (parsedData.length === 0) { showToast('Nenhum arquivo para enviar', 'error'); return; }\r\n\r\n    setUploading(true);\r\n    setCompletedFiles([]);\r\n    setUploadProgress(0);\r\n    setErrorMessage('');\r\n\r\n    try {\r\n      setUploadPhase('preparing');\r\n      await new Promise(r => setTimeout(r, 500));\r\n\r\n      const formData = new FormData();\r\n      formData.append('titulo', titulo.trim());\r\n      formData.append('compositor', compositor.trim());\r\n      formData.append('arranjador', arranjador.trim());\r\n      formData.append('categoria', categoria);\r\n      formData.append('ano', ano);\r\n      formData.append('total_arquivos', parsedData.length.toString());\r\n\r\n      parsedData.forEach((item, index) => {\r\n        formData.append(`arquivo_${index}`, item.file);\r\n        formData.append(`instrumento_${index}`, item.instrumento);\r\n      });\r\n\r\n      setUploadPhase('uploading');\r\n      const progressPromise = simulateFileProgress(parsedData.length);\r\n      const uploadPromise = API.uploadPastaPartitura(formData);\r\n      const [result] = await Promise.all([uploadPromise, progressPromise]);\r\n\r\n      setUploadPhase('processing');\r\n      await new Promise(r => setTimeout(r, 800));\r\n\r\n      setUploadPhase('complete');\r\n      setUploadProgress(100);\r\n      await new Promise(r => setTimeout(r, 1500));\r\n\r\n      showToast(result.message || 'Partitura criada com sucesso!');\r\n      onSuccess?.();\r\n      onClose();\r\n    } catch (err: unknown) {\r\n      setUploadPhase('error');\r\n      const message = err instanceof Error ? err.message : 'Erro no upload';\r\n      setErrorMessage(message);\r\n      showToast(message, 'error');\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  const selectedCat = categorias.find(c => c.id === categoria);\r\n  const hasFiles = parsedData.length > 0;\r\n\r\n  return (\r\n    <div onClick={onClose} style={{\r\n      position: 'fixed',\r\n      top: 0, left: 0, right: 0, bottom: 0,\r\n      background: 'rgba(0,0,0,0.8)',\r\n      backdropFilter: 'blur(8px)',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      zIndex: 1000,\r\n      padding: '20px'\r\n    }}>\r\n      <div onClick={e => e.stopPropagation()} style={{\r\n        position: 'relative',\r\n        background: 'var(--bg-card)',\r\n        borderRadius: '16px',\r\n        width: '100%',\r\n        maxWidth: hasFiles ? '700px' : '500px',\r\n        maxHeight: '85vh',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        overflow: 'hidden',\r\n        fontFamily: 'var(--font-sans)',\r\n        transition: 'max-width 0.3s ease'\r\n      }}>\r\n        {/* ===== HEADER FIXO ===== */}\r\n        <div style={{\r\n          padding: '20px 24px',\r\n          borderBottom: '1px solid var(--border)',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'space-between',\r\n          flexShrink: 0\r\n        }}>\r\n          <div style={{ display: 'flex', alignItems: 'center', gap: '12px' }}>\r\n            <div style={{\r\n              width: '40px', height: '40px',\r\n              borderRadius: '10px',\r\n              background: 'linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(184, 134, 11, 0.1) 100%)',\r\n              display: 'flex', alignItems: 'center', justifyContent: 'center'\r\n            }}>\r\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#D4AF37\" strokeWidth=\"2\">\r\n                <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"/>\r\n                <polyline points=\"17 8 12 3 7 8\"/>\r\n                <line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\"/>\r\n              </svg>\r\n            </div>\r\n            <div>\r\n              <h2 style={{ fontSize: '18px', fontWeight: '700', color: 'var(--text-primary)', margin: 0 }}>\r\n                Upload de Pasta\r\n              </h2>\r\n              <p style={{ fontSize: '13px', color: 'var(--text-secondary)', margin: 0 }}>\r\n                {hasFiles ? `${parsedData.length} arquivo(s) detectado(s)` : 'Arraste ou selecione uma pasta'}\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Botao X para fechar */}\r\n          <button\r\n            onClick={onClose}\r\n            style={{\r\n              background: 'none',\r\n              border: 'none',\r\n              color: 'var(--text-secondary)',\r\n              cursor: 'pointer',\r\n              padding: '8px',\r\n              borderRadius: '8px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              transition: 'all 0.2s'\r\n            }}\r\n            onMouseEnter={e => { e.currentTarget.style.background = 'var(--bg-primary)'; e.currentTarget.style.color = 'var(--text-primary)'; }}\r\n            onMouseLeave={e => { e.currentTarget.style.background = 'none'; e.currentTarget.style.color = 'var(--text-secondary)'; }}\r\n          >\r\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"/>\r\n              <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"/>\r\n            </svg>\r\n          </button>\r\n        </div>\r\n\r\n        {/* ===== OVERLAY DE UPLOAD - REDESENHADO ===== */}\r\n        {uploading && (\r\n          <div style={{\r\n            position: 'absolute',\r\n            top: 0, left: 0, right: 0, bottom: 0,\r\n            background: 'linear-gradient(180deg, rgba(20, 20, 30, 0.98) 0%, rgba(15, 15, 25, 0.99) 100%)',\r\n            backdropFilter: 'blur(12px)',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            padding: '40px',\r\n            zIndex: 10,\r\n            overflow: 'hidden'\r\n          }}>\r\n            {/* Efeitos de fundo animados */}\r\n            {uploadPhase !== 'error' && uploadPhase !== 'complete' && (\r\n              <>\r\n                <div style={{\r\n                  position: 'absolute',\r\n                  width: '300px', height: '300px',\r\n                  borderRadius: '50%',\r\n                  background: 'radial-gradient(circle, rgba(212, 175, 55, 0.08) 0%, transparent 70%)',\r\n                  animation: 'pulse 3s ease-in-out infinite',\r\n                  top: '50%', left: '50%',\r\n                  transform: 'translate(-50%, -50%)'\r\n                }} />\r\n                <div style={{\r\n                  position: 'absolute',\r\n                  width: '400px', height: '400px',\r\n                  borderRadius: '50%',\r\n                  background: 'radial-gradient(circle, rgba(212, 175, 55, 0.04) 0%, transparent 70%)',\r\n                  animation: 'pulse 3s ease-in-out infinite 0.5s',\r\n                  top: '50%', left: '50%',\r\n                  transform: 'translate(-50%, -50%)'\r\n                }} />\r\n              </>\r\n            )}\r\n\r\n            {/* Container principal com glassmorphism */}\r\n            <div style={{\r\n              position: 'relative',\r\n              background: 'rgba(255, 255, 255, 0.03)',\r\n              borderRadius: '24px',\r\n              padding: '40px 48px',\r\n              border: '1px solid rgba(255, 255, 255, 0.08)',\r\n              boxShadow: '0 8px 32px rgba(0, 0, 0, 0.3)',\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              alignItems: 'center',\r\n              maxWidth: '400px',\r\n              width: '100%'\r\n            }}>\r\n              {/* Icone/Animacao principal */}\r\n              <div style={{\r\n                width: '140px', height: '140px',\r\n                borderRadius: '50%',\r\n                background: uploadPhase === 'error'\r\n                  ? 'linear-gradient(135deg, rgba(231, 76, 60, 0.15) 0%, rgba(192, 57, 43, 0.1) 100%)'\r\n                  : uploadPhase === 'complete'\r\n                    ? 'linear-gradient(135deg, rgba(39, 174, 96, 0.15) 0%, rgba(30, 130, 76, 0.1) 100%)'\r\n                    : 'linear-gradient(135deg, rgba(212, 175, 55, 0.12) 0%, rgba(184, 134, 11, 0.08) 100%)',\r\n                display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n                marginBottom: '24px',\r\n                boxShadow: uploadPhase === 'error'\r\n                  ? '0 0 40px rgba(231, 76, 60, 0.2)'\r\n                  : uploadPhase === 'complete'\r\n                    ? '0 0 40px rgba(39, 174, 96, 0.2)'\r\n                    : '0 0 40px rgba(212, 175, 55, 0.15)',\r\n                border: `2px solid ${uploadPhase === 'error' ? 'rgba(231, 76, 60, 0.3)' : uploadPhase === 'complete' ? 'rgba(39, 174, 96, 0.3)' : 'rgba(212, 175, 55, 0.2)'}`\r\n              }}>\r\n                {uploadPhase === 'preparing' && <LottieAnimation name=\"scan\" size={90} />}\r\n                {uploadPhase === 'uploading' && <LottieAnimation name=\"upload\" size={90} />}\r\n                {uploadPhase === 'processing' && <LottieAnimation name=\"scan\" size={90} />}\r\n                {uploadPhase === 'complete' && <LottieAnimation name=\"success\" size={90} loop={false} />}\r\n                {uploadPhase === 'error' && <LottieAnimation name=\"error\" size={90} loop={false} />}\r\n              </div>\r\n\r\n              {/* Titulo da fase */}\r\n              <div style={{\r\n                fontSize: '20px',\r\n                fontWeight: '700',\r\n                color: uploadPhase === 'error' ? '#e74c3c' : uploadPhase === 'complete' ? '#27ae60' : '#fff',\r\n                marginBottom: '8px',\r\n                textAlign: 'center'\r\n              }}>\r\n                {uploadPhase === 'preparing' && 'Preparando upload...'}\r\n                {uploadPhase === 'uploading' && `Enviando ${parsedData.length} arquivo${parsedData.length > 1 ? 's' : ''}...`}\r\n                {uploadPhase === 'processing' && 'Finalizando...'}\r\n                {uploadPhase === 'complete' && 'Upload Concluido!'}\r\n                {uploadPhase === 'error' && 'Ops! Algo deu errado'}\r\n              </div>\r\n\r\n              {/* Frase engracada animada */}\r\n              {(uploadPhase === 'uploading' || uploadPhase === 'processing' || uploadPhase === 'preparing') && (\r\n                <div style={{\r\n                  fontSize: '14px',\r\n                  color: 'rgba(212, 175, 55, 0.9)',\r\n                  marginBottom: '24px',\r\n                  textAlign: 'center',\r\n                  minHeight: '20px',\r\n                  fontStyle: 'italic',\r\n                  transition: 'opacity 0.3s ease',\r\n                  animation: 'fadeInOut 2.5s ease-in-out infinite'\r\n                }}>\r\n                  {funnyPhrases[funnyPhraseIndex]}\r\n                </div>\r\n              )}\r\n\r\n              {/* Mensagem de erro */}\r\n              {uploadPhase === 'error' && (\r\n                <div style={{\r\n                  fontSize: '14px',\r\n                  color: 'rgba(231, 76, 60, 0.9)',\r\n                  marginBottom: '24px',\r\n                  textAlign: 'center',\r\n                  padding: '12px 16px',\r\n                  background: 'rgba(231, 76, 60, 0.1)',\r\n                  borderRadius: '8px',\r\n                  border: '1px solid rgba(231, 76, 60, 0.2)'\r\n                }}>\r\n                  {errorMessage}\r\n                </div>\r\n              )}\r\n\r\n              {/* Mensagem de sucesso */}\r\n              {uploadPhase === 'complete' && (\r\n                <div style={{\r\n                  fontSize: '14px',\r\n                  color: 'rgba(39, 174, 96, 0.9)',\r\n                  marginBottom: '24px',\r\n                  textAlign: 'center'\r\n                }}>\r\n                  Partitura adicionada ao acervo com sucesso!\r\n                </div>\r\n              )}\r\n\r\n              {/* Barra de progresso estilizada */}\r\n              {(uploadPhase === 'uploading' || uploadPhase === 'processing' || uploadPhase === 'preparing') && (\r\n                <div style={{ width: '100%', marginBottom: '16px' }}>\r\n                  <div style={{\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    marginBottom: '8px',\r\n                    fontSize: '12px'\r\n                  }}>\r\n                    <span style={{ color: 'var(--text-secondary)' }}>\r\n                      {uploadPhase === 'uploading' ? `${completedFiles.length} de ${parsedData.length} arquivos` : 'Processando...'}\r\n                    </span>\r\n                    <span style={{ color: '#D4AF37', fontWeight: '600' }}>\r\n                      {uploadProgress}%\r\n                    </span>\r\n                  </div>\r\n                  <div style={{\r\n                    width: '100%',\r\n                    height: '8px',\r\n                    background: 'rgba(255, 255, 255, 0.08)',\r\n                    borderRadius: '4px',\r\n                    overflow: 'hidden',\r\n                    position: 'relative'\r\n                  }}>\r\n                    <div style={{\r\n                      width: `${uploadProgress}%`,\r\n                      height: '100%',\r\n                      background: 'linear-gradient(90deg, #D4AF37 0%, #F4D03F 50%, #D4AF37 100%)',\r\n                      backgroundSize: '200% 100%',\r\n                      borderRadius: '4px',\r\n                      transition: 'width 0.3s ease',\r\n                      animation: 'shimmer 2s linear infinite',\r\n                      boxShadow: '0 0 10px rgba(212, 175, 55, 0.5)'\r\n                    }} />\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Lista de arquivos sendo enviados (mini preview) */}\r\n              {uploadPhase === 'uploading' && parsedData.length > 0 && (\r\n                <div style={{\r\n                  width: '100%',\r\n                  maxHeight: '80px',\r\n                  overflowY: 'auto',\r\n                  background: 'rgba(0, 0, 0, 0.2)',\r\n                  borderRadius: '8px',\r\n                  padding: '8px',\r\n                  marginTop: '8px'\r\n                }}>\r\n                  <div style={{ display: 'flex', flexWrap: 'wrap', gap: '4px' }}>\r\n                    {parsedData.slice(0, 10).map((item, idx) => (\r\n                      <span key={idx} style={{\r\n                        fontSize: '10px',\r\n                        padding: '3px 8px',\r\n                        borderRadius: '4px',\r\n                        background: completedFiles.includes(idx)\r\n                          ? 'rgba(39, 174, 96, 0.2)'\r\n                          : 'rgba(255, 255, 255, 0.05)',\r\n                        color: completedFiles.includes(idx)\r\n                          ? '#27ae60'\r\n                          : 'var(--text-secondary)',\r\n                        transition: 'all 0.3s ease'\r\n                      }}>\r\n                        {completedFiles.includes(idx) ? '\\u2713 ' : ''}{item.instrumento}\r\n                      </span>\r\n                    ))}\r\n                    {parsedData.length > 10 && (\r\n                      <span style={{\r\n                        fontSize: '10px',\r\n                        padding: '3px 8px',\r\n                        color: 'var(--text-secondary)'\r\n                      }}>\r\n                        +{parsedData.length - 10} mais...\r\n                      </span>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Botao tentar novamente */}\r\n              {uploadPhase === 'error' && (\r\n                <button onClick={() => { setUploadPhase('idle'); setUploading(false); }} style={{\r\n                  marginTop: '8px',\r\n                  padding: '12px 32px',\r\n                  borderRadius: '10px',\r\n                  background: 'linear-gradient(135deg, rgba(231, 76, 60, 0.2) 0%, rgba(192, 57, 43, 0.15) 100%)',\r\n                  border: '1px solid rgba(231, 76, 60, 0.3)',\r\n                  color: '#e74c3c',\r\n                  fontSize: '14px',\r\n                  fontWeight: '600',\r\n                  cursor: 'pointer',\r\n                  transition: 'all 0.2s',\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '8px'\r\n                }}\r\n                onMouseEnter={e => {\r\n                  e.currentTarget.style.background = 'rgba(231, 76, 60, 0.25)';\r\n                  e.currentTarget.style.transform = 'translateY(-2px)';\r\n                }}\r\n                onMouseLeave={e => {\r\n                  e.currentTarget.style.background = 'linear-gradient(135deg, rgba(231, 76, 60, 0.2) 0%, rgba(192, 57, 43, 0.15) 100%)';\r\n                  e.currentTarget.style.transform = 'translateY(0)';\r\n                }}\r\n                >\r\n                  <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n                    <path d=\"M1 4v6h6\"/><path d=\"M23 20v-6h-6\"/>\r\n                    <path d=\"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15\"/>\r\n                  </svg>\r\n                  Tentar novamente\r\n                </button>\r\n              )}\r\n            </div>\r\n\r\n            {/* CSS para animacoes */}\r\n            <style>{`\r\n              @keyframes pulse {\r\n                0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }\r\n                50% { transform: translate(-50%, -50%) scale(1.1); opacity: 0.7; }\r\n              }\r\n              @keyframes shimmer {\r\n                0% { background-position: 200% 0; }\r\n                100% { background-position: -200% 0; }\r\n              }\r\n              @keyframes fadeInOut {\r\n                0%, 100% { opacity: 0.7; }\r\n                50% { opacity: 1; }\r\n              }\r\n            `}</style>\r\n          </div>\r\n        )}\r\n\r\n        {/* ===== CONTEUDO SCROLLAVEL ===== */}\r\n        <div style={{\r\n          flex: 1,\r\n          overflowY: 'auto',\r\n          padding: '20px 24px'\r\n        }}>\r\n          {/* Dropzone - compacto se ja tem arquivos */}\r\n          {!hasFiles ? (\r\n            <div\r\n              onClick={() => document.getElementById('folder-input')?.click()}\r\n              onDragEnter={handleDragEnter}\r\n              onDragLeave={handleDragLeave}\r\n              onDragOver={handleDragOver}\r\n              onDrop={handleDrop}\r\n              style={{\r\n                border: isDragging ? '2px dashed #D4AF37' : '2px dashed var(--border)',\r\n                borderRadius: '12px',\r\n                padding: '48px 24px',\r\n                textAlign: 'center',\r\n                background: isDragging ? 'rgba(212, 175, 55, 0.08)' : 'var(--bg-primary)',\r\n                cursor: 'pointer',\r\n                transition: 'all 0.2s'\r\n              }}\r\n            >\r\n              <input type=\"file\" webkitdirectory=\"\" directory=\"\" multiple onChange={handleFolderSelect} style={{ display: 'none' }} id=\"folder-input\" />\r\n\r\n              <div style={{\r\n                width: '64px', height: '64px',\r\n                margin: '0 auto 16px',\r\n                borderRadius: '16px',\r\n                background: 'rgba(212, 175, 55, 0.1)',\r\n                display: 'flex', alignItems: 'center', justifyContent: 'center'\r\n              }}>\r\n                <svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#D4AF37\" strokeWidth=\"1.5\">\r\n                  <path d=\"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z\"/>\r\n                  <line x1=\"12\" y1=\"11\" x2=\"12\" y2=\"17\" opacity=\"0.6\"/>\r\n                  <line x1=\"9\" y1=\"14\" x2=\"15\" y2=\"14\" opacity=\"0.6\"/>\r\n                </svg>\r\n              </div>\r\n\r\n              <div style={{ fontSize: '15px', fontWeight: '600', color: isDragging ? '#D4AF37' : 'var(--text-primary)', marginBottom: '6px' }}>\r\n                {isDragging ? 'Solte aqui!' : 'Arraste uma pasta ou clique'}\r\n              </div>\r\n              <div style={{ fontSize: '13px', color: 'var(--text-secondary)' }}>\r\n                Pasta com PDFs das partes da partitura\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              {/* Resumo da pasta selecionada */}\r\n              <div\r\n                onClick={() => document.getElementById('folder-input')?.click()}\r\n                style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '12px',\r\n                  padding: '12px 16px',\r\n                  background: 'rgba(39, 174, 96, 0.08)',\r\n                  borderRadius: '10px',\r\n                  marginBottom: '20px',\r\n                  cursor: 'pointer',\r\n                  border: '1px solid rgba(39, 174, 96, 0.2)'\r\n                }}\r\n              >\r\n                <input type=\"file\" webkitdirectory=\"\" directory=\"\" multiple onChange={handleFolderSelect} style={{ display: 'none' }} id=\"folder-input\" />\r\n                <div style={{\r\n                  width: '36px', height: '36px',\r\n                  borderRadius: '8px',\r\n                  background: 'rgba(39, 174, 96, 0.15)',\r\n                  display: 'flex', alignItems: 'center', justifyContent: 'center',\r\n                  flexShrink: 0\r\n                }}>\r\n                  <svg width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#27ae60\" strokeWidth=\"2\">\r\n                    <path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"/>\r\n                    <polyline points=\"22 4 12 14.01 9 11.01\"/>\r\n                  </svg>\r\n                </div>\r\n                <div style={{ flex: 1, minWidth: 0 }}>\r\n                  <div style={{ fontSize: '14px', fontWeight: '600', color: '#27ae60', whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }}>\r\n                    {folderName}\r\n                  </div>\r\n                  <div style={{ fontSize: '12px', color: 'var(--text-secondary)' }}>\r\n                    {parsedData.length} PDF(s) \\u2022 Clique para trocar\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Formulario de dados */}\r\n              <div style={{ marginBottom: '20px' }}>\r\n                <h3 style={{ fontSize: '13px', fontWeight: '600', color: 'var(--text-secondary)', marginBottom: '12px', textTransform: 'uppercase', letterSpacing: '0.5px' }}>\r\n                  Dados da Partitura\r\n                </h3>\r\n\r\n                <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '12px' }}>\r\n                  {/* Titulo */}\r\n                  <div style={{ gridColumn: '1 / -1' }}>\r\n                    <label style={{ display: 'block', fontSize: '12px', fontWeight: '500', marginBottom: '4px', color: 'var(--text-secondary)' }}>Titulo *</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={titulo}\r\n                      onChange={e => setTitulo(e.target.value)}\r\n                      style={{\r\n                        width: '100%',\r\n                        padding: '10px 12px',\r\n                        borderRadius: '8px',\r\n                        border: '1.5px solid var(--border)',\r\n                        background: 'var(--bg-secondary)',\r\n                        color: 'var(--text-primary)',\r\n                        fontSize: '14px',\r\n                        outline: 'none'\r\n                      }}\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Categoria */}\r\n                  <div style={{ position: 'relative' }}>\r\n                    <label style={{ display: 'block', fontSize: '12px', fontWeight: '500', marginBottom: '4px', color: 'var(--text-secondary)' }}>Categoria *</label>\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setShowCatDropdown(!showCatDropdown)}\r\n                      style={{\r\n                        width: '100%',\r\n                        padding: '10px 12px',\r\n                        borderRadius: '8px',\r\n                        border: '1.5px solid var(--border)',\r\n                        background: 'var(--bg-secondary)',\r\n                        color: 'var(--text-primary)',\r\n                        fontSize: '14px',\r\n                        cursor: 'pointer',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'space-between',\r\n                        textAlign: 'left'\r\n                      }}\r\n                    >\r\n                      <span style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                        {selectedCat && <CategoryIcon categoryId={selectedCat.id} size={14} color=\"#D4AF37\" />}\r\n                        {selectedCat ? selectedCat.nome : 'Selecione...'}\r\n                      </span>\r\n                      <svg width=\"12\" height=\"12\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" style={{ transform: showCatDropdown ? 'rotate(180deg)' : 'none', transition: 'transform 0.2s' }}>\r\n                        <polyline points=\"6 9 12 15 18 9\"/>\r\n                      </svg>\r\n                    </button>\r\n\r\n                    {showCatDropdown && (\r\n                      <div style={{\r\n                        position: 'absolute',\r\n                        top: '100%',\r\n                        left: 0, right: 0,\r\n                        marginTop: '4px',\r\n                        background: 'var(--bg-secondary)',\r\n                        border: '1.5px solid var(--border)',\r\n                        borderRadius: '8px',\r\n                        boxShadow: '0 8px 24px rgba(0,0,0,0.2)',\r\n                        zIndex: 20,\r\n                        maxHeight: '180px',\r\n                        overflowY: 'auto'\r\n                      }}>\r\n                        {categorias.map(cat => (\r\n                          <button\r\n                            key={cat.id}\r\n                            onClick={() => { setCategoria(cat.id); setShowCatDropdown(false); }}\r\n                            style={{\r\n                              width: '100%',\r\n                              padding: '10px 12px',\r\n                              border: 'none',\r\n                              background: categoria === cat.id ? 'rgba(212, 175, 55, 0.1)' : 'transparent',\r\n                              color: categoria === cat.id ? '#D4AF37' : 'var(--text-primary)',\r\n                              fontSize: '13px',\r\n                              textAlign: 'left',\r\n                              cursor: 'pointer',\r\n                              display: 'flex',\r\n                              alignItems: 'center',\r\n                              gap: '8px'\r\n                            }}\r\n                          >\r\n                            <CategoryIcon categoryId={cat.id} size={14} color={categoria === cat.id ? '#D4AF37' : 'var(--text-secondary)'} />\r\n                            {cat.nome}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Compositor */}\r\n                  <div>\r\n                    <label style={{ display: 'block', fontSize: '12px', fontWeight: '500', marginBottom: '4px', color: 'var(--text-secondary)' }}>Compositor</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={compositor}\r\n                      onChange={e => setCompositor(e.target.value)}\r\n                      style={{\r\n                        width: '100%',\r\n                        padding: '10px 12px',\r\n                        borderRadius: '8px',\r\n                        border: '1.5px solid var(--border)',\r\n                        background: 'var(--bg-secondary)',\r\n                        color: 'var(--text-primary)',\r\n                        fontSize: '14px',\r\n                        outline: 'none'\r\n                      }}\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Arranjador */}\r\n                  <div>\r\n                    <label style={{ display: 'block', fontSize: '12px', fontWeight: '500', marginBottom: '4px', color: 'var(--text-secondary)' }}>Arranjador</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={arranjador}\r\n                      onChange={e => setArranjador(e.target.value)}\r\n                      style={{\r\n                        width: '100%',\r\n                        padding: '10px 12px',\r\n                        borderRadius: '8px',\r\n                        border: '1.5px solid var(--border)',\r\n                        background: 'var(--bg-secondary)',\r\n                        color: 'var(--text-primary)',\r\n                        fontSize: '14px',\r\n                        outline: 'none'\r\n                      }}\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Ano */}\r\n                  <div>\r\n                    <label style={{ display: 'block', fontSize: '12px', fontWeight: '500', marginBottom: '4px', color: 'var(--text-secondary)' }}>Ano</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      placeholder=\"Ex: 1950\"\r\n                      value={ano}\r\n                      onChange={e => setAno(e.target.value)}\r\n                      style={{\r\n                        width: '100%',\r\n                        padding: '10px 12px',\r\n                        borderRadius: '8px',\r\n                        border: '1.5px solid var(--border)',\r\n                        background: 'var(--bg-secondary)',\r\n                        color: 'var(--text-primary)',\r\n                        fontSize: '14px',\r\n                        outline: 'none'\r\n                      }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Lista de partes detectadas */}\r\n              <div>\r\n                <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '12px' }}>\r\n                  <h3 style={{ fontSize: '13px', fontWeight: '600', color: 'var(--text-secondary)', textTransform: 'uppercase', letterSpacing: '0.5px', margin: 0 }}>\r\n                    Partes Detectadas\r\n                  </h3>\r\n                  <div style={{ display: 'flex', gap: '12px', fontSize: '12px' }}>\r\n                    <span style={{ color: '#27ae60' }}>{'\\u2713'} {reconhecidos}</span>\r\n                    {naoReconhecidos > 0 && <span style={{ color: '#e67e22' }}>{'\\u26A0'} {naoReconhecidos}</span>}\r\n                  </div>\r\n                </div>\r\n\r\n                <div style={{\r\n                  display: 'grid',\r\n                  gridTemplateColumns: 'repeat(auto-fill, minmax(140px, 1fr))',\r\n                  gap: '8px',\r\n                  maxHeight: '200px',\r\n                  overflowY: 'auto',\r\n                  padding: '4px'\r\n                }}>\r\n                  {parsedData.map((item, idx) => (\r\n                    <div key={idx} style={{\r\n                      padding: '10px 12px',\r\n                      background: item.reconhecido ? 'rgba(39, 174, 96, 0.08)' : 'rgba(230, 126, 34, 0.08)',\r\n                      borderRadius: '8px',\r\n                      border: `1px solid ${item.reconhecido ? 'rgba(39, 174, 96, 0.2)' : 'rgba(230, 126, 34, 0.3)'}`,\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      gap: '8px'\r\n                    }}>\r\n                      <span style={{ color: item.reconhecido ? '#27ae60' : '#e67e22', fontSize: '12px' }}>\r\n                        {item.reconhecido ? '\\u2713' : '?'}\r\n                      </span>\r\n                      <span style={{\r\n                        fontSize: '12px',\r\n                        fontWeight: '500',\r\n                        color: item.reconhecido ? 'var(--text-primary)' : '#e67e22',\r\n                        whiteSpace: 'nowrap',\r\n                        overflow: 'hidden',\r\n                        textOverflow: 'ellipsis'\r\n                      }}>\r\n                        {item.instrumento}\r\n                      </span>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        {/* ===== FOOTER FIXO ===== */}\r\n        <div style={{\r\n          padding: '16px 24px',\r\n          borderTop: '1px solid var(--border)',\r\n          display: 'flex',\r\n          gap: '12px',\r\n          justifyContent: 'flex-end',\r\n          flexShrink: 0\r\n        }}>\r\n          <button\r\n            onClick={onClose}\r\n            style={{\r\n              padding: '12px 24px',\r\n              borderRadius: '8px',\r\n              background: 'transparent',\r\n              border: '1px solid var(--border)',\r\n              color: 'var(--text-primary)',\r\n              fontSize: '14px',\r\n              fontWeight: '500',\r\n              cursor: 'pointer',\r\n              transition: 'all 0.2s'\r\n            }}\r\n            onMouseEnter={e => e.currentTarget.style.background = 'var(--bg-primary)'}\r\n            onMouseLeave={e => e.currentTarget.style.background = 'transparent'}\r\n          >\r\n            Cancelar\r\n          </button>\r\n\r\n          <button\r\n            onClick={handleUpload}\r\n            disabled={uploading || !hasFiles}\r\n            style={{\r\n              padding: '12px 24px',\r\n              borderRadius: '8px',\r\n              background: (!hasFiles || uploading) ? 'rgba(212, 175, 55, 0.3)' : 'linear-gradient(135deg, #D4AF37 0%, #B8860B 100%)',\r\n              border: 'none',\r\n              color: '#fff',\r\n              fontSize: '14px',\r\n              fontWeight: '600',\r\n              cursor: (!hasFiles || uploading) ? 'not-allowed' : 'pointer',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '8px',\r\n              transition: 'all 0.2s',\r\n              boxShadow: hasFiles && !uploading ? '0 4px 12px rgba(212, 175, 55, 0.3)' : 'none'\r\n            }}\r\n          >\r\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n              <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"/>\r\n              <polyline points=\"17 8 12 3 7 8\"/>\r\n              <line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\"/>\r\n            </svg>\r\n            {hasFiles ? `Enviar ${parsedData.length} arquivo(s)` : 'Enviar'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UploadPastaModal;\r\n","\"use client\";\r\n\r\n// ===== TUTORIAL OVERLAY =====\r\n// Componente de onboarding com spotlight para guiar usuarios\r\n\r\nimport { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport { useMediaQuery } from '@hooks/useMediaQuery';\r\nimport Storage from '@lib/storage';\r\n\r\nconst STORAGE_KEY = 'tutorial_admin_partituras_completed';\r\n\r\n// Definicao dos passos do tutorial\r\n// Ordem: Upload -> Expandir -> Substituir -> Remover -> Adicionar\r\nexport interface TutorialStep {\r\n  targetSelector: string;\r\n  title: string;\r\n  subtitle?: string;\r\n  description: string;\r\n  position: string;\r\n  highlightPadding?: number;\r\n  beforeStep?: string;\r\n  action?: string;\r\n  id?: string;\r\n}\r\n\r\nconst TUTORIAL_STEPS: TutorialStep[] = [\r\n  {\r\n    targetSelector: '[data-tutorial=\"upload-pasta\"]',\r\n    title: 'Upload de Pasta',\r\n    subtitle: 'Funcao Principal',\r\n    description: 'Esta e a forma mais rapida de <strong>adicionar partituras</strong>! Selecione uma pasta inteira e o sistema <strong>detecta automaticamente</strong> os instrumentos pelos nomes dos arquivos.',\r\n    position: 'bottom',\r\n    highlightPadding: 12\r\n  },\r\n  {\r\n    targetSelector: '[data-tutorial=\"expand-button\"]',\r\n    title: 'Visualizar Todas as Partes',\r\n    subtitle: 'Expandir Partitura',\r\n    description: 'Clique aqui para <strong>expandir</strong> e ver todas as partes de instrumentos desta partitura. Voce pode visualizar, substituir ou adicionar novas partes.',\r\n    position: 'right',\r\n    highlightPadding: 20,\r\n    beforeStep: 'collapseFirst'\r\n  },\r\n  {\r\n    targetSelector: '[data-tutorial=\"btn-replace\"]',\r\n    title: 'Substituir Arquivo',\r\n    subtitle: 'Atualizar Parte',\r\n    description: 'Clique aqui para <strong>substituir o arquivo</strong> de uma parte especifica por uma versao atualizada.',\r\n    position: 'left',\r\n    highlightPadding: 8,\r\n    beforeStep: 'expandFirst'\r\n  },\r\n  {\r\n    targetSelector: '[data-tutorial=\"btn-delete\"]',\r\n    title: 'Remover Parte',\r\n    subtitle: 'Deletar Arquivo',\r\n    description: 'Use este botao para <strong>remover permanentemente</strong> uma parte da partitura.',\r\n    position: 'left',\r\n    highlightPadding: 8\r\n  },\r\n  {\r\n    targetSelector: '[data-tutorial=\"add-parte\"]',\r\n    title: 'Adicionar Parte',\r\n    subtitle: 'Novo Instrumento',\r\n    description: 'Use este botao para <strong>adicionar uma nova parte</strong> de instrumento que nao foi detectada automaticamente no upload.',\r\n    position: 'left',\r\n    highlightPadding: 10\r\n  }\r\n];\r\n\r\ninterface TutorialOverlayProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onExpandFirst?: () => void;\r\n  onCollapseFirst?: () => void;\r\n  steps?: TutorialStep[];\r\n  storageKey?: string;\r\n  onStepChange?: (stepIndex: number, step: TutorialStep) => void;\r\n  finalButtonText?: string;\r\n  allowMobile?: boolean;\r\n}\r\n\r\ninterface TooltipPosition {\r\n  top: number;\r\n  left: number;\r\n}\r\n\r\ninterface CalculatedPosition extends TooltipPosition {\r\n  tooltipWidth: number;\r\n}\r\n\r\nconst TutorialOverlay = ({\r\n  isOpen,\r\n  onClose,\r\n  onExpandFirst,\r\n  onCollapseFirst,\r\n  steps = TUTORIAL_STEPS,\r\n  storageKey = STORAGE_KEY,\r\n  onStepChange,\r\n  finalButtonText = 'Finalizar',\r\n  allowMobile = false\r\n}: TutorialOverlayProps) => {\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  const [targetRect, setTargetRect] = useState<DOMRect | null>(null);\r\n  const [tooltipPosition, setTooltipPosition] = useState<TooltipPosition>({ top: 0, left: 0 });\r\n  const [tooltipWidth, setTooltipWidth] = useState(360);\r\n  const [isAnimating, setIsAnimating] = useState(false);\r\n  const isMobile = useMediaQuery('(max-width: 767px)');\r\n  const [highlightNextButton, setHighlightNextButton] = useState(false);\r\n\r\n  const step = steps[currentStep];\r\n\r\n  // Calcula posicao do tooltip baseado no elemento alvo\r\n  const calculateTooltipPosition = useCallback((rect: DOMRect | null, preferredPosition: string, mobile = false): CalculatedPosition => {\r\n    if (!rect) return { top: 0, left: 0, tooltipWidth: 360 };\r\n\r\n    const SPACING = mobile ? 12 : 20;\r\n    const TOOLTIP_WIDTH = mobile ? Math.min(320, window.innerWidth - 32) : 360;\r\n    const TOOLTIP_HEIGHT_ESTIMATE = mobile ? 280 : 320;\r\n\r\n    let top: number, left: number;\r\n    let actualPosition = preferredPosition;\r\n\r\n    // Verifica se ha espaco suficiente na posicao preferida\r\n    const spaceBottom = window.innerHeight - rect.bottom;\r\n    const spaceTop = rect.top;\r\n    const spaceRight = window.innerWidth - rect.right;\r\n    const spaceLeft = rect.left;\r\n\r\n    // Se nao houver espaco na posicao preferida, encontra melhor alternativa\r\n    if (preferredPosition === 'bottom' && spaceBottom < TOOLTIP_HEIGHT_ESTIMATE + SPACING) {\r\n      actualPosition = spaceTop > spaceBottom ? 'top' : 'left';\r\n    } else if (preferredPosition === 'top' && spaceTop < TOOLTIP_HEIGHT_ESTIMATE + SPACING) {\r\n      actualPosition = spaceBottom > spaceTop ? 'bottom' : 'left';\r\n    } else if (preferredPosition === 'right' && spaceRight < TOOLTIP_WIDTH + SPACING) {\r\n      actualPosition = spaceLeft > spaceRight ? 'left' : 'bottom';\r\n    } else if (preferredPosition === 'left' && spaceLeft < TOOLTIP_WIDTH + SPACING) {\r\n      actualPosition = spaceRight > spaceLeft ? 'right' : 'bottom';\r\n    }\r\n\r\n    switch (actualPosition) {\r\n      case 'bottom':\r\n        top = rect.bottom + SPACING;\r\n        left = rect.left + (rect.width / 2) - (TOOLTIP_WIDTH / 2);\r\n        break;\r\n      case 'top':\r\n        top = rect.top - SPACING - TOOLTIP_HEIGHT_ESTIMATE;\r\n        left = rect.left + (rect.width / 2) - (TOOLTIP_WIDTH / 2);\r\n        break;\r\n      case 'right':\r\n        top = rect.top + (rect.height / 2) - (TOOLTIP_HEIGHT_ESTIMATE / 2);\r\n        left = rect.right + SPACING;\r\n        break;\r\n      case 'left':\r\n        top = rect.top + (rect.height / 2) - (TOOLTIP_HEIGHT_ESTIMATE / 2);\r\n        left = rect.left - SPACING - TOOLTIP_WIDTH;\r\n        break;\r\n      default:\r\n        top = rect.bottom + SPACING;\r\n        left = rect.left;\r\n    }\r\n\r\n    // Ajusta para nao sair da viewport\r\n    const padding = mobile ? 16 : 20;\r\n    if (left < padding) left = padding;\r\n    if (left + TOOLTIP_WIDTH > window.innerWidth - padding) {\r\n      left = window.innerWidth - TOOLTIP_WIDTH - padding;\r\n    }\r\n    if (top < padding) top = padding;\r\n    if (top + TOOLTIP_HEIGHT_ESTIMATE > window.innerHeight - padding) {\r\n      top = window.innerHeight - TOOLTIP_HEIGHT_ESTIMATE - padding;\r\n    }\r\n\r\n    return { top, left, tooltipWidth: TOOLTIP_WIDTH };\r\n  }, []);\r\n\r\n  // Atualiza posicao do elemento alvo (com scroll automatico se necessario)\r\n  // Suporta retry para elementos que demoram a renderizar (ex: modal)\r\n  const updateTargetPositionRef = useRef<(retryCount?: number) => void>(() => {});\r\n  const updateTargetPosition = useCallback((retryCount = 0) => {\r\n    if (!step) return;\r\n\r\n    const targetElement = document.querySelector(step.targetSelector);\r\n\r\n    // Se elemento nao encontrado e ainda temos retries, tenta novamente apos delay\r\n    if (!targetElement && retryCount < 10) {\r\n      setTimeout(() => updateTargetPositionRef.current(retryCount + 1), 200);\r\n      return;\r\n    }\r\n\r\n    if (targetElement) {\r\n      // Verifica se o elemento esta visivel na viewport\r\n      const rect = targetElement.getBoundingClientRect();\r\n      const MARGIN = isMobile ? 60 : 100; // Margem menor para mobile\r\n\r\n      const isElementVisible = (\r\n        rect.top >= MARGIN &&\r\n        rect.bottom <= window.innerHeight - MARGIN &&\r\n        rect.left >= 0 &&\r\n        rect.right <= window.innerWidth\r\n      );\r\n\r\n      // Se o elemento nao esta totalmente visivel, faz scroll\r\n      if (!isElementVisible) {\r\n        // Temporariamente permite scroll para fazer o scrollIntoView\r\n        document.body.style.overflow = '';\r\n        document.documentElement.style.overflow = '';\r\n        const mainContent = document.querySelector('main');\r\n        if (mainContent) {\r\n          (mainContent as HTMLElement).style.overflow = '';\r\n        }\r\n\r\n        // Scroll suave ate o elemento, centralizando-o na tela\r\n        targetElement.scrollIntoView({\r\n          behavior: 'smooth',\r\n          block: 'center',\r\n          inline: 'center'\r\n        });\r\n\r\n        // Aguarda o scroll terminar e entao atualiza a posicao\r\n        setTimeout(() => {\r\n          // Rebloqueia scroll apos o scrollIntoView\r\n          document.body.style.overflow = 'hidden';\r\n          document.documentElement.style.overflow = 'hidden';\r\n          if (mainContent) {\r\n            (mainContent as HTMLElement).style.overflow = 'hidden';\r\n          }\r\n\r\n          // Atualiza o rect apos o scroll\r\n          const newRect = targetElement.getBoundingClientRect();\r\n          setTargetRect(newRect);\r\n          const pos = calculateTooltipPosition(newRect, step.position, isMobile);\r\n          setTooltipPosition({ top: pos.top, left: pos.left });\r\n          setTooltipWidth(pos.tooltipWidth);\r\n        }, 500);\r\n      } else {\r\n        // Elemento ja visivel, apenas atualiza posicao\r\n        setTargetRect(rect);\r\n        const pos = calculateTooltipPosition(rect, step.position, isMobile);\r\n        setTooltipPosition({ top: pos.top, left: pos.left });\r\n        setTooltipWidth(pos.tooltipWidth);\r\n      }\r\n    }\r\n  }, [step, calculateTooltipPosition, isMobile]);\r\n\r\n  // Mantem ref sincronizado para retry recursivo\r\n  useEffect(() => {\r\n    updateTargetPositionRef.current = updateTargetPosition;\r\n  });\r\n\r\n  // Efeito para atualizar posicao quando muda o passo\r\n  useEffect(() => {\r\n    if (!isOpen || (isMobile && !allowMobile)) return;\r\n\r\n    // Defer setState to avoid synchronous setState in effect body\r\n    queueMicrotask(() => setIsAnimating(true));\r\n\r\n    // Executa acao antes do passo se necessario\r\n    if (step?.beforeStep === 'expandFirst' && onExpandFirst) {\r\n      onExpandFirst();\r\n      // Aguarda expansao carregar\r\n      setTimeout(updateTargetPosition, 600);\r\n    } else if (step?.beforeStep === 'collapseFirst' && onCollapseFirst) {\r\n      onCollapseFirst();\r\n      setTimeout(updateTargetPosition, 300);\r\n    } else {\r\n      // Pequeno delay para garantir que o DOM esta pronto\r\n      setTimeout(updateTargetPosition, 100);\r\n    }\r\n\r\n    const timer = setTimeout(() => setIsAnimating(false), 400);\r\n    return () => clearTimeout(timer);\r\n  }, [isOpen, currentStep, step, updateTargetPosition, onExpandFirst, onCollapseFirst, isMobile, allowMobile]);\r\n\r\n  // Listener para resize (atualiza apenas posicao)\r\n  useEffect(() => {\r\n    if (!isOpen) return;\r\n    const handleResize = () => updateTargetPosition();\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, [isOpen, updateTargetPosition]);\r\n\r\n  // Bloqueia scroll durante tutorial (em todos os elementos)\r\n  useEffect(() => {\r\n    if (isOpen && (!isMobile || allowMobile)) {\r\n      // Bloqueia scroll no body\r\n      document.body.style.overflow = 'hidden';\r\n      document.documentElement.style.overflow = 'hidden';\r\n\r\n      // Bloqueia scroll em qualquer container scrollavel\r\n      const mainContent = document.querySelector('main');\r\n      if (mainContent) {\r\n        (mainContent as HTMLElement).style.overflow = 'hidden';\r\n      }\r\n\r\n      // Previne scroll com touch/wheel\r\n      const preventScroll = (e: Event) => {\r\n        e.preventDefault();\r\n      };\r\n\r\n      window.addEventListener('wheel', preventScroll, { passive: false });\r\n      window.addEventListener('touchmove', preventScroll, { passive: false });\r\n\r\n      return () => {\r\n        document.body.style.overflow = '';\r\n        document.documentElement.style.overflow = '';\r\n        if (mainContent) {\r\n          (mainContent as HTMLElement).style.overflow = '';\r\n        }\r\n        window.removeEventListener('wheel', preventScroll);\r\n        window.removeEventListener('touchmove', preventScroll);\r\n      };\r\n    }\r\n  }, [isOpen, isMobile, allowMobile]);\r\n\r\n  const handleNext = () => {\r\n    if (currentStep === steps.length - 1) {\r\n      handleFinish();\r\n      return;\r\n    }\r\n    const nextStep = currentStep + 1;\r\n\r\n    // PRIMEIRO atualiza o step para que o walkthrough mostre o passo correto\r\n    setCurrentStep(nextStep);\r\n\r\n    // DEPOIS executa a acao (como abrir modal) com delay para o state atualizar\r\n    setTimeout(() => {\r\n      onStepChange?.(nextStep, steps[nextStep]);\r\n    }, 150);\r\n  };\r\n\r\n  const handlePrevious = () => {\r\n    if (currentStep > 0) {\r\n      const prevStep = currentStep - 1;\r\n      onStepChange?.(prevStep, steps[prevStep]);\r\n      setTimeout(() => setCurrentStep(prevStep), 100);\r\n    }\r\n  };\r\n\r\n  const handleFinish = () => {\r\n    // Sempre salva preferencia ao finalizar - nao mostra novamente\r\n    Storage.set(storageKey, true);\r\n    setCurrentStep(0);\r\n    onClose();\r\n  };\r\n\r\n  const handleSkip = () => {\r\n    // Tambem salva preferencia ao pular - nao mostra novamente\r\n    Storage.set(storageKey, true);\r\n    setCurrentStep(0);\r\n    onClose();\r\n  };\r\n\r\n  // Nao renderiza em mobile (exceto se allowMobile) ou se nao estiver aberto\r\n  if (!isOpen || !step || (isMobile && !allowMobile)) return null;\r\n\r\n  const padding = step.highlightPadding || 12;\r\n\r\n  // Usa Portal para renderizar direto no body, garantindo que fique acima de todos os modais\r\n  return createPortal(\r\n    <div style={{\r\n      position: 'fixed',\r\n      inset: 0,\r\n      zIndex: 99999,\r\n      pointerEvents: 'auto',\r\n      isolation: 'isolate'\r\n    }}>\r\n      {/* Overlay escuro - destaca botao proximo ao clicar */}\r\n      <div\r\n        onClick={() => {\r\n          setHighlightNextButton(true);\r\n          setTimeout(() => setHighlightNextButton(false), 1200);\r\n        }}\r\n        style={{\r\n          position: 'absolute',\r\n          inset: 0,\r\n          background: 'rgba(0, 0, 0, 0.5)',\r\n          transition: 'background 0.3s ease',\r\n          cursor: 'pointer'\r\n        }}\r\n      />\r\n\r\n      {/* Spotlight - buraco transparente */}\r\n      {targetRect && (\r\n        <div\r\n          style={{\r\n            position: 'absolute',\r\n            top: targetRect.top - padding,\r\n            left: targetRect.left - padding,\r\n            width: targetRect.width + (padding * 2),\r\n            height: targetRect.height + (padding * 2),\r\n            borderRadius: '12px',\r\n            boxShadow: '0 0 0 9999px rgba(0, 0, 0, 0.5)',\r\n            pointerEvents: 'none',\r\n            transition: 'all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)',\r\n            willChange: 'top, left, width, height'\r\n          }}\r\n        >\r\n          {/* Borda destacada animada */}\r\n          <div style={{\r\n            position: 'absolute',\r\n            inset: -3,\r\n            borderRadius: '14px',\r\n            border: '2px solid rgba(212, 175, 55, 0.8)',\r\n            animation: 'pulse-border 1.5s ease-in-out infinite',\r\n            transition: 'all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)'\r\n          }} />\r\n        </div>\r\n      )}\r\n\r\n      {/* Tooltip Card */}\r\n      <div\r\n        style={{\r\n          position: 'absolute',\r\n          top: tooltipPosition.top,\r\n          left: tooltipPosition.left,\r\n          width: tooltipWidth,\r\n          background: '#fff',\r\n          borderRadius: isMobile ? '12px' : '16px',\r\n          padding: isMobile ? '20px' : '28px',\r\n          boxShadow: '0 25px 50px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(0, 0, 0, 0.05)',\r\n          zIndex: 100000,\r\n          opacity: isAnimating ? 0 : 1,\r\n          transform: isAnimating ? 'translateY(12px) scale(0.98)' : 'translateY(0) scale(1)',\r\n          transition: 'all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)',\r\n          fontFamily: 'var(--font-sans)',\r\n          willChange: 'transform, opacity, top, left'\r\n        }}\r\n      >\r\n        {/* Indicador de progresso */}\r\n        <div style={{\r\n          display: 'flex',\r\n          gap: isMobile ? '4px' : '6px',\r\n          marginBottom: isMobile ? '14px' : '20px'\r\n        }}>\r\n          {steps.map((_, i) => (\r\n            <div\r\n              key={i}\r\n              style={{\r\n                flex: 1,\r\n                height: '4px',\r\n                background: i <= currentStep\r\n                  ? 'linear-gradient(90deg, #D4AF37, #B8860B)'\r\n                  : '#e5e5e5',\r\n                borderRadius: '999px',\r\n                transition: 'background 0.4s ease'\r\n              }}\r\n            />\r\n          ))}\r\n        </div>\r\n\r\n        {/* Contador de passos */}\r\n        <div style={{\r\n          fontSize: isMobile ? '11px' : '12px',\r\n          fontWeight: '700',\r\n          color: '#D4AF37',\r\n          marginBottom: isMobile ? '6px' : '8px',\r\n          letterSpacing: '1px',\r\n          textTransform: 'uppercase'\r\n        }}>\r\n          Passo {currentStep + 1} de {steps.length}\r\n        </div>\r\n\r\n        {/* Titulo */}\r\n        <h3 style={{\r\n          fontSize: isMobile ? '17px' : '20px',\r\n          fontWeight: '700',\r\n          color: '#1a1a2e',\r\n          marginBottom: '4px',\r\n          lineHeight: '1.3'\r\n        }}>\r\n          {step.title}\r\n        </h3>\r\n\r\n        {/* Subtitulo */}\r\n        {step.subtitle && (\r\n          <div style={{\r\n            fontSize: '13px',\r\n            fontWeight: '500',\r\n            color: '#888',\r\n            marginBottom: '12px'\r\n          }}>\r\n            {step.subtitle}\r\n          </div>\r\n        )}\r\n\r\n        {/* Descricao com HTML */}\r\n        <p\r\n          style={{\r\n            fontSize: isMobile ? '13px' : '14px',\r\n            lineHeight: isMobile ? '1.5' : '1.7',\r\n            color: '#555',\r\n            marginBottom: isMobile ? '18px' : '24px'\r\n          }}\r\n          dangerouslySetInnerHTML={{ __html: step.description }}\r\n        />\r\n\r\n        {/* Botoes de navegacao */}\r\n        <div style={{\r\n          display: 'flex',\r\n          gap: isMobile ? '8px' : '10px'\r\n        }}>\r\n          {currentStep > 0 && (\r\n            <button\r\n              onClick={handlePrevious}\r\n              style={{\r\n                flex: 1,\r\n                padding: isMobile ? '12px 14px' : '14px 16px',\r\n                borderRadius: isMobile ? '8px' : '10px',\r\n                background: '#f5f5f5',\r\n                border: 'none',\r\n                color: '#666',\r\n                fontSize: '14px',\r\n                fontWeight: '600',\r\n                cursor: 'pointer',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                gap: '6px',\r\n                transition: 'all 0.2s ease',\r\n                fontFamily: 'var(--font-sans)'\r\n              }}\r\n              onMouseEnter={e => {\r\n                e.currentTarget.style.background = '#eee';\r\n              }}\r\n              onMouseLeave={e => {\r\n                e.currentTarget.style.background = '#f5f5f5';\r\n              }}\r\n            >\r\n              <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2.5\">\r\n                <polyline points=\"15 18 9 12 15 6\"/>\r\n              </svg>\r\n              Anterior\r\n            </button>\r\n          )}\r\n          <button\r\n            onClick={handleNext}\r\n            style={{\r\n              flex: currentStep > 0 ? 1 : 'auto',\r\n              minWidth: currentStep > 0 ? 'auto' : '100%',\r\n              padding: isMobile ? '12px 18px' : '14px 24px',\r\n              borderRadius: isMobile ? '8px' : '10px',\r\n              background: 'linear-gradient(135deg, #D4AF37 0%, #B8860B 100%)',\r\n              border: 'none',\r\n              color: '#fff',\r\n              fontSize: '14px',\r\n              fontWeight: '700',\r\n              cursor: 'pointer',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              gap: '8px',\r\n              transition: 'all 0.2s ease',\r\n              boxShadow: highlightNextButton\r\n                ? '0 0 0 4px rgba(212, 175, 55, 0.4), 0 8px 25px rgba(212, 175, 55, 0.6)'\r\n                : '0 4px 15px rgba(212, 175, 55, 0.4)',\r\n              fontFamily: 'var(--font-sans)',\r\n              transform: highlightNextButton ? 'scale(1.05)' : 'scale(1)',\r\n              animation: highlightNextButton ? 'pulse-next 0.6s ease-in-out 2' : 'none'\r\n            }}\r\n            onMouseEnter={e => {\r\n              if (!highlightNextButton) {\r\n                e.currentTarget.style.transform = 'translateY(-2px)';\r\n                e.currentTarget.style.boxShadow = '0 6px 20px rgba(212, 175, 55, 0.5)';\r\n              }\r\n            }}\r\n            onMouseLeave={e => {\r\n              if (!highlightNextButton) {\r\n                e.currentTarget.style.transform = 'translateY(0)';\r\n                e.currentTarget.style.boxShadow = '0 4px 15px rgba(212, 175, 55, 0.4)';\r\n              }\r\n            }}\r\n          >\r\n            {currentStep === steps.length - 1 ? (\r\n              <>\r\n                {finalButtonText}\r\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2.5\">\r\n                  <polyline points=\"20 6 9 17 4 12\"/>\r\n                </svg>\r\n              </>\r\n            ) : (\r\n              <>\r\n                Proximo\r\n                <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2.5\">\r\n                  <polyline points=\"9 18 15 12 9 6\"/>\r\n                </svg>\r\n              </>\r\n            )}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Botao de pular tutorial - discreto */}\r\n        <button\r\n          onClick={handleSkip}\r\n          style={{\r\n            marginTop: '16px',\r\n            padding: '6px 12px',\r\n            borderRadius: '6px',\r\n            background: 'transparent',\r\n            border: 'none',\r\n            color: '#bbb',\r\n            cursor: 'pointer',\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            gap: '6px',\r\n            fontSize: '12px',\r\n            fontWeight: '400',\r\n            fontFamily: 'var(--font-sans)',\r\n            transition: 'all 0.2s ease',\r\n            alignSelf: 'center'\r\n          }}\r\n          onMouseEnter={e => {\r\n            e.currentTarget.style.color = '#888';\r\n          }}\r\n          onMouseLeave={e => {\r\n            e.currentTarget.style.color = '#bbb';\r\n          }}\r\n        >\r\n          Pular tutorial\r\n        </button>\r\n\r\n      </div>\r\n\r\n      {/* Estilos de animacao */}\r\n      <style>{`\r\n        @keyframes pulse-border {\r\n          0%, 100% {\r\n            opacity: 1;\r\n            transform: scale(1);\r\n          }\r\n          50% {\r\n            opacity: 0.7;\r\n            transform: scale(1.02);\r\n          }\r\n        }\r\n        @keyframes pulse-next {\r\n          0%, 100% {\r\n            transform: scale(1.05);\r\n          }\r\n          50% {\r\n            transform: scale(1.1);\r\n          }\r\n        }\r\n      `}</style>\r\n    </div>,\r\n    document.body\r\n  );\r\n};\r\n\r\n// Hook para verificar se deve mostrar o tutorial\r\n// Retorna [showTutorial, setShowTutorial, tutorialPending]\r\n// tutorialPending = true durante o delay antes do tutorial aparecer (bloqueia interacoes)\r\nexport const useTutorial = (\r\n  partituras?: unknown[],\r\n  loading?: boolean\r\n): [boolean, (v: boolean) => void, boolean] => {\r\n  const [showTutorial, setShowTutorial] = useState(false);\r\n  const [waitingForDelay, setWaitingForDelay] = useState(false);\r\n\r\n  // Derive tutorialPending: true when waiting for delay timer, false once tutorial is shown\r\n  const tutorialPending = waitingForDelay && !showTutorial;\r\n\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n\r\n    // Nao mostra em mobile\r\n    if (window.innerWidth < 768) return;\r\n\r\n    // Verifica se:\r\n    // 1. Nao foi completado antes\r\n    // 2. Existem partituras carregadas\r\n    // 3. Nao esta em loading\r\n    const tutorialCompleted = Storage.get(STORAGE_KEY, false);\r\n    if (!tutorialCompleted && !loading && partituras && partituras.length > 0) {\r\n      // Marca como pendente via microtask para evitar setState sincrono no effect\r\n      queueMicrotask(() => setWaitingForDelay(true));\r\n\r\n      // Pequeno delay para garantir que a UI esta pronta\r\n      const timer = setTimeout(() => {\r\n        setShowTutorial(true);\r\n        setWaitingForDelay(false);\r\n      }, 1000);\r\n\r\n      return () => {\r\n        clearTimeout(timer);\r\n        setWaitingForDelay(false);\r\n      };\r\n    }\r\n  }, [loading, partituras]);\r\n\r\n  return [showTutorial, setShowTutorial, tutorialPending];\r\n};\r\n\r\nexport default TutorialOverlay;\r\n"],"names":[],"mappings":"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"}