module.exports=[97081,a=>{"use strict";var b=a.i(42485),c=a.i(66592),d=a.i(15771),e=a.i(40811),f=a.i(26693);let g=({repertorio:a,partituras:d,isActive:e,isExpanded:g,onEdit:h,onDelete:i,onDuplicate:j,onActivate:k,onToggleExpand:l,onReorder:m})=>{let[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(null),r=()=>{q(null)},s=()=>{o(null),q(null)};return(0,b.jsxs)("div",{style:{background:"var(--bg-secondary)",borderRadius:"16px",border:e?"2px solid rgba(46, 204, 113, 0.5)":"1px solid var(--border)",overflow:"hidden"},children:[(0,b.jsxs)("div",{onClick:l,className:"card-header-hover",style:{padding:"16px 20px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer"},children:[(0,b.jsxs)("div",{style:{flex:1},children:[(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,b.jsx)("h3",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text-primary)",margin:0},children:a.nome}),e&&(0,b.jsx)("span",{style:{padding:"2px 8px",borderRadius:"4px",background:"rgba(46, 204, 113, 0.2)",color:"#2ecc71",fontSize:"10px",fontWeight:"600",textTransform:"uppercase"},children:"Ativo"})]}),(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginTop:"8px",fontSize:"13px",color:"var(--text-muted)"},children:[(0,b.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,b.jsx)("div",{style:{width:"14px",height:"14px"},children:(0,b.jsx)(f.Icons.Music,{})}),a.total_partituras||0," musicas"]}),a.data_apresentacao&&(0,b.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,b.jsx)("div",{style:{width:"14px",height:"14px"},children:(0,b.jsx)(f.Icons.Calendar,{})}),new Date(a.data_apresentacao).toLocaleDateString("pt-BR")]})]})]}),(0,b.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center"},onClick:a=>a.stopPropagation(),children:[!e&&k&&(0,b.jsx)("button",{onClick:k,title:"Ativar repertório",className:"btn-success-hover",style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(46, 204, 113, 0.1)",border:"1px solid rgba(46, 204, 113, 0.3)",color:"#2ecc71",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,b.jsx)(f.Icons.Check,{})}),(0,b.jsx)("button",{onClick:j,title:"Duplicar",className:"btn-purple-hover",style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(155, 89, 182, 0.1)",border:"1px solid rgba(155, 89, 182, 0.3)",color:"#9b59b6",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,b.jsx)("div",{style:{width:"14px",height:"14px"},children:(0,b.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,b.jsx)("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),(0,b.jsx)("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})}),(0,b.jsx)("button",{onClick:h,title:"Editar",className:"btn-info-hover",style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(52, 152, 219, 0.1)",border:"1px solid rgba(52, 152, 219, 0.3)",color:"#3498db",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,b.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,b.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,b.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),(0,b.jsx)("button",{onClick:i,title:"Excluir",className:"btn-danger-hover",style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(231, 76, 60, 0.1)",border:"1px solid rgba(231, 76, 60, 0.3)",color:"#e74c3c",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,b.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,b.jsx)("polyline",{points:"3 6 5 6 21 6"}),(0,b.jsx)("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})}),(0,b.jsx)("div",{style:{width:"14px",height:"14px",transition:"transform 0.2s",transform:g?"rotate(180deg)":"rotate(0deg)"},children:(0,b.jsx)(f.Icons.ChevronDown,{})})]})]}),g&&(0,b.jsxs)("div",{style:{padding:"0 20px 16px",borderTop:"1px solid var(--border)"},children:[(0,b.jsx)("p",{style:{fontSize:"12px",color:"var(--text-muted)",textTransform:"uppercase",marginTop:"16px",marginBottom:"12px"},children:"Músicas do repertório"}),d?0===d.length?(0,b.jsx)("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Nenhuma musica adicionada"}):(0,b.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:d.map((a,c)=>(0,b.jsxs)("div",{draggable:!0,onDragStart:a=>{o(c),a.dataTransfer.effectAllowed="move"},onDragOver:a=>{a.preventDefault(),n!==c&&q(c)},onDragLeave:r,onDrop:a=>{a.preventDefault(),null!==n&&n!==c&&m(n,c),o(null),q(null)},onDragEnd:s,className:n!==c&&p!==c?"draggable-item-hover":"",style:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",background:n===c?"rgba(212, 175, 55, 0.1)":p===c?"rgba(212, 175, 55, 0.2)":"var(--bg-primary)",borderRadius:"8px",border:p===c?"2px dashed #D4AF37":"1px solid var(--border)",cursor:"grab",opacity:n===c?.5:1,transition:"all 0.15s ease"},children:[(0,b.jsx)("div",{style:{width:"16px",height:"16px",color:"var(--text-muted)",flexShrink:0},children:(0,b.jsxs)("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:[(0,b.jsx)("circle",{cx:"9",cy:"6",r:"1.5"}),(0,b.jsx)("circle",{cx:"15",cy:"6",r:"1.5"}),(0,b.jsx)("circle",{cx:"9",cy:"12",r:"1.5"}),(0,b.jsx)("circle",{cx:"15",cy:"12",r:"1.5"}),(0,b.jsx)("circle",{cx:"9",cy:"18",r:"1.5"}),(0,b.jsx)("circle",{cx:"15",cy:"18",r:"1.5"})]})}),(0,b.jsx)("span",{style:{width:"22px",height:"22px",borderRadius:"50%",background:"rgba(212, 175, 55, 0.2)",color:"#D4AF37",fontSize:"11px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:c+1}),(0,b.jsx)("span",{style:{fontSize:"13px",color:"var(--text-primary)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",flex:1},children:a.titulo})]},a.id))}):(0,b.jsx)("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Carregando..."})]})]})};a.s(["default",0,()=>{let{showToast:a}=(0,d.useUI)(),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(!0),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)({nome:"",descricao:"",data_apresentacao:"",ativo:!1}),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)({}),x=async()=>{if(!j){k(!0);try{let a=await e.API.getRepertorios();i(a||[])}catch(b){a(b instanceof Error?b.message:"Erro ao carregar repertórios","error")}k(!1)}};(0,c.useEffect)(()=>{x()},[]);let y=()=>{o(null),q({nome:"",descricao:"",data_apresentacao:"",ativo:!0}),m(!0)},z=a=>{o(a),q({nome:a.nome||"",descricao:a.descricao||"",data_apresentacao:a.data_apresentacao||"",ativo:1===a.ativo}),m(!0)},A=()=>{m(!1),o(null),q({nome:"",descricao:"",data_apresentacao:"",ativo:!1})},B=async()=>{if(!p.nome.trim())return void a("Nome é obrigatório","error");s(!0);try{n?(await e.API.updateRepertorio(n.id,p),a("Repertório atualizado!")):(await e.API.createRepertorio(p),a("Repertório criado!")),A(),x()}catch(b){a(b instanceof Error?b.message:"Erro ao salvar","error")}s(!1)},C=async b=>{if(window.confirm("Excluir este repertório?"))try{await e.API.deleteRepertorio(b),a("Repertório excluído!"),x()}catch(b){a(b instanceof Error?b.message:"Erro ao excluir","error")}},D=async b=>{try{await e.API.duplicarRepertorio(b),a("Repertório duplicado!"),x()}catch(b){a(b instanceof Error?b.message:"Erro ao duplicar","error")}},E=async b=>{try{await e.API.updateRepertorio(b.id,{...b,ativo:!0}),a("Repertório ativado!"),x()}catch(b){a(b instanceof Error?b.message:"Erro ao ativar","error")}},F=async b=>{if(t===b.id)u(null);else if(u(b.id),!v[b.id])try{let a=await e.API.getRepertorio(b.id);w(c=>({...c,[b.id]:a.partituras||[]}))}catch{a("Erro ao carregar partituras","error")}},G=async(b,c,d)=>{let f=[...v[b]||[]];if(d<0||d>=f.length)return;let[g]=f.splice(c,1);f.splice(d,0,g),w(a=>({...a,[b]:f}));try{let a=f.map((a,b)=>({id:a.id,ordem:b}));await e.API.reorderRepertorioPartituras(b,a)}catch{a("Erro ao reordenar","error");let c=await e.API.getRepertorio(b);w(a=>({...a,[b]:c.partituras||[]}))}},H=h.find(a=>1===a.ativo),I=h.filter(a=>1!==a.ativo);return(0,b.jsxs)("div",{style:{padding:"24px 32px",maxWidth:"1200px",margin:"0 auto"},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",flexWrap:"wrap",gap:"16px"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{style:{fontSize:"24px",fontWeight:"700",color:"var(--text-primary)",margin:0},children:"Repertório"}),(0,b.jsx)("p",{style:{fontSize:"14px",color:"var(--text-muted)",margin:"4px 0 0"},children:"Gerencie os repertórios das apresentações"})]}),(0,b.jsxs)("button",{onClick:y,className:"btn-primary-hover",style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",borderRadius:"12px",background:"linear-gradient(135deg, #D4AF37 0%, #B8860B 100%)",color:"#fff",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:[(0,b.jsx)("div",{style:{width:"16px",height:"16px"},children:(0,b.jsx)(f.Icons.Plus,{})}),"Novo Repertório"]})]}),j?(0,b.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"var(--text-muted)"},children:"Carregando..."}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{style:{marginBottom:"32px"},children:[(0,b.jsxs)("h2",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,b.jsx)("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:"#2ecc71"}}),"Repertório Ativo"]}),H?(0,b.jsx)(g,{repertorio:H,partituras:v[H.id],isActive:!0,isExpanded:t===H.id,onEdit:()=>z(H),onDelete:()=>C(H.id),onDuplicate:()=>D(H.id),onToggleExpand:()=>F(H),onReorder:(a,b)=>G(H.id,a,b)}):(0,b.jsxs)("div",{style:{padding:"32px",background:"var(--bg-secondary)",borderRadius:"16px",textAlign:"center",color:"var(--text-muted)"},children:[(0,b.jsx)("p",{children:"Nenhum repertório ativo"}),(0,b.jsx)("button",{onClick:y,className:"btn-secondary-hover",style:{marginTop:"12px",padding:"8px 16px",borderRadius:"8px",background:"rgba(212, 175, 55, 0.2)",border:"1px solid rgba(212, 175, 55, 0.3)",color:"#D4AF37",cursor:"pointer"},children:"Criar Repertório"})]})]}),I.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{style:{fontSize:"16px",fontWeight:"600",color:"var(--text-primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,b.jsx)("div",{style:{width:"16px",height:"16px"},children:(0,b.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,b.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,b.jsx)("polyline",{points:"12 6 12 12 16 14"})]})}),"Historico"]}),(0,b.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:I.map(a=>(0,b.jsx)(g,{repertorio:a,partituras:v[a.id],isExpanded:t===a.id,onEdit:()=>z(a),onDelete:()=>C(a.id),onDuplicate:()=>D(a.id),onActivate:()=>E(a),onToggleExpand:()=>F(a),onReorder:(b,c)=>G(a.id,b,c)},a.id))})]})]}),l&&(0,b.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:(0,b.jsxs)("div",{style:{background:"var(--bg-card)",borderRadius:"16px",width:"100%",maxWidth:"480px",maxHeight:"90vh",overflow:"auto"},children:[(0,b.jsx)("div",{style:{padding:"20px",borderBottom:"1px solid var(--border)"},children:(0,b.jsx)("h3",{style:{fontSize:"18px",fontWeight:"600",color:"var(--text-primary)",margin:0},children:n?"Editar Repertório":"Novo Repertório"})}),(0,b.jsxs)("div",{style:{padding:"20px",display:"flex",flexDirection:"column",gap:"16px"},children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",fontSize:"12px",color:"var(--text-muted)",marginBottom:"6px"},children:"Nome *"}),(0,b.jsx)("input",{type:"text",value:p.nome,onChange:a=>q({...p,nome:a.target.value}),placeholder:"Ex: Apresentacao 7 de Setembro",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--bg-primary)",color:"var(--text-primary)",fontSize:"14px"}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",fontSize:"12px",color:"var(--text-muted)",marginBottom:"6px"},children:"Descricao"}),(0,b.jsx)("textarea",{value:p.descricao,onChange:a=>q({...p,descricao:a.target.value}),placeholder:"Descricao opcional...",rows:3,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--bg-primary)",color:"var(--text-primary)",fontSize:"14px",resize:"vertical"}})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{style:{display:"block",fontSize:"12px",color:"var(--text-muted)",marginBottom:"6px"},children:"Data da Apresentacao"}),(0,b.jsx)("input",{type:"date",value:p.data_apresentacao,onChange:a=>q({...p,data_apresentacao:a.target.value}),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",background:"var(--bg-primary)",color:"var(--text-primary)",fontSize:"14px"}})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer"},children:[(0,b.jsx)("input",{type:"checkbox",checked:p.ativo,onChange:a=>q({...p,ativo:a.target.checked}),style:{width:"18px",height:"18px"}}),(0,b.jsx)("span",{style:{fontSize:"14px",color:"var(--text-primary)"},children:"Definir como repertório ativo"})]}),(0,b.jsx)("p",{style:{fontSize:"12px",color:"var(--text-muted)",marginTop:"4px",marginLeft:"30px"},children:"O repertório atual será arquivado"})]})]}),(0,b.jsxs)("div",{style:{padding:"16px 20px",borderTop:"1px solid var(--border)",display:"flex",justifyContent:"flex-end",gap:"12px"},children:[(0,b.jsx)("button",{onClick:A,className:"btn-ghost-hover",style:{padding:"10px 20px",borderRadius:"8px",border:"1px solid var(--border)",background:"transparent",color:"var(--text-primary)",cursor:"pointer"},children:"Cancelar"}),(0,b.jsx)("button",{onClick:B,disabled:r,className:"btn-primary-hover",style:{padding:"10px 20px",borderRadius:"8px",border:"none",background:"linear-gradient(135deg, #D4AF37 0%, #B8860B 100%)",color:"#fff",cursor:r?"wait":"pointer",opacity:r?.7:1},children:r?"Salvando...":"Salvar"})]})]})})]})}])},76317,a=>{a.n(a.i(97081))}];

//# sourceMappingURL=frontend-next_src_components_admin_AdminRepertorio_tsx_06bfca15._.js.map